<!DOCTYPE html>
<html lang="cs" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="theme-color" content="#0a0a0f">
    <meta name="description" content="Scribblix - 100% offline dokumentaƒçn√≠ platforma. Vytv√°≈ôejte, organizujte a exportujte dokumentaci bez internetu.">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Scribblix">

    <title>Scribblix - Offline dokumentace</title>

    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/svg+xml" href="icons/icon-192.svg">
    <link rel="apple-touch-icon" href="icons/icon-192.svg">

    <link rel="stylesheet" href="styles.css?v=2.0.0">

    <!-- Dexie.js - IndexedDB wrapper (MIT license) -->
    <script src="https://unpkg.com/dexie@3.2.4/dist/dexie.min.js"></script>
    <!-- Marked.js - Markdown parser (MIT license) -->
    <script src="https://unpkg.com/marked@11.1.1/marked.min.js"></script>
    <!-- DOMPurify - XSS sanitizer (Apache 2.0 / MIT dual license) -->
    <script src="https://unpkg.com/dompurify@3.0.6/dist/purify.min.js"></script>
    <!-- FlexSearch - Fast fulltext search (Apache 2.0 license) -->
    <script src="https://cdn.jsdelivr.net/gh/nextapps-de/flexsearch@0.7.31/dist/flexsearch.bundle.min.js"></script>
</head>
<body>
    <!-- Skip to content link for accessibility -->
    <a href="#mainContent" class="skip-link">P≈ôeskoƒçit na obsah</a>

    <div class="app-container">
        <!-- Offline Indicator -->
        <div class="offline-banner" id="offlineBanner">
            <span class="offline-icon">üì°</span>
            <span class="offline-text">Offline re≈æim - v≈°echna data jsou ulo≈æena lok√°lnƒõ</span>
        </div>

        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="../../index.html" class="back-link" title="Zpƒõt na AdHUB">
                    <span class="back-icon">‚Üê</span>
                </a>
                <h1 class="logo">
                    <span class="logo-icon">üìñ</span>
                    <span class="logo-text">Scribblix</span>
                </h1>
                <button class="sidebar-toggle" id="sidebarToggle" title="Skr√Ωt sidebar">
                    <span>‚ò∞</span>
                </button>
            </div>

            <div class="sidebar-search">
                <input type="text" id="searchInput" class="search-input" placeholder="Hledat v dokumentaci... (Ctrl+K)" autocomplete="off">
                <span class="search-icon">üîç</span>
            </div>

            <div class="sidebar-actions">
                <button class="btn btn-primary" id="newSpaceBtn" title="Nov√Ω prostor">
                    <span>üìÅ</span> Nov√Ω prostor
                </button>
            </div>

            <nav class="sidebar-nav" id="sidebarNav">
                <div class="nav-loading" id="navLoading">
                    <span class="spinner">‚è≥</span>
                    <span>Naƒç√≠t√°m...</span>
                </div>
                <div class="nav-tree" id="navTree">
                    <!-- Navigation tree will be rendered here -->
                </div>
                <div class="nav-empty" id="navEmpty" style="display: none;">
                    <span class="empty-icon">üìù</span>
                    <p>≈Ω√°dn√© prostory</p>
                    <p class="empty-hint">Vytvo≈ôte sv≈Øj prvn√≠ prostor dokumentace</p>
                </div>
            </nav>

            <div class="sidebar-footer">
                <button class="footer-btn" id="importBtn" title="Import">
                    <span>üì•</span> <span>Import</span>
                </button>
                <button class="footer-btn" id="exportBtn" title="Export">
                    <span>üì§</span> <span>Export</span>
                </button>
                <button class="theme-toggle" id="themeToggle" title="P≈ôepnout t√©ma" aria-label="P≈ôepnout svƒõtl√Ω/tmav√Ω re≈æim">
                    <span class="icon-sun" aria-hidden="true">‚òÄÔ∏è</span>
                    <span class="icon-moon" aria-hidden="true">üåô</span>
                </button>
                <button class="footer-btn" id="settingsBtn" title="Nastaven√≠">
                    <span>‚öôÔ∏è</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content" id="mainContent">
            <!-- Welcome Screen -->
            <div class="welcome-screen" id="welcomeScreen">
                <div class="welcome-content">
                    <div class="welcome-icon">üìñ</div>
                    <h2>V√≠tejte v Scribblix</h2>
                    <p class="welcome-description">
                        100% offline dokumentaƒçn√≠ platforma. Vytv√°≈ôejte, organizujte a exportujte
                        dokumentaci bez p≈ôipojen√≠ k internetu.
                    </p>
                    <div class="welcome-features">
                        <div class="feature">
                            <span class="feature-icon">‚úèÔ∏è</span>
                            <div class="feature-text">
                                <strong>WYSIWYG Editor</strong>
                                <span>Markdown podpora s n√°hledem v re√°ln√©m ƒçase</span>
                            </div>
                        </div>
                        <div class="feature">
                            <span class="feature-icon">üìÅ</span>
                            <div class="feature-text">
                                <strong>Prostory & Str√°nky</strong>
                                <span>Organizujte dokumentaci do logick√Ωch celk≈Ø</span>
                            </div>
                        </div>
                        <div class="feature">
                            <span class="feature-icon">üîç</span>
                            <div class="feature-text">
                                <strong>Rychl√© vyhled√°v√°n√≠</strong>
                                <span>Fulltext search p≈ôes v≈°echny dokumenty</span>
                            </div>
                        </div>
                        <div class="feature">
                            <span class="feature-icon">üì§</span>
                            <div class="feature-text">
                                <strong>Export & Import</strong>
                                <span>JSON, Markdown, HTML form√°ty</span>
                            </div>
                        </div>
                        <div class="feature">
                            <span class="feature-icon">üîí</span>
                            <div class="feature-text">
                                <strong>100% Offline</strong>
                                <span>Data z≈Øst√°vaj√≠ ve va≈°em prohl√≠≈æeƒçi</span>
                            </div>
                        </div>
                        <div class="feature">
                            <span class="feature-icon">üì±</span>
                            <div class="feature-text">
                                <strong>PWA Ready</strong>
                                <span>Nainstalujte si jako desktopovou aplikaci</span>
                            </div>
                        </div>
                    </div>
                    <div class="welcome-actions">
                        <button class="btn btn-primary btn-large" id="welcomeNewSpace">
                            <span>üìÅ</span> Vytvo≈ôit prvn√≠ prostor
                        </button>
                        <button class="btn btn-secondary btn-large" id="welcomeImport">
                            <span>üì•</span> Importovat data
                        </button>
                    </div>
                    <div class="welcome-stats" id="welcomeStats">
                        <!-- Stats will be shown here if data exists -->
                    </div>
                </div>
            </div>

            <!-- Editor Screen -->
            <div class="editor-screen" id="editorScreen" style="display: none;">
                <div class="editor-header">
                    <div class="breadcrumb" id="breadcrumb">
                        <!-- Breadcrumb navigation -->
                    </div>
                    <div class="editor-actions">
                        <div class="editor-mode-toggle">
                            <button class="mode-btn active" data-mode="edit" title="Editovat">‚úèÔ∏è</button>
                            <button class="mode-btn" data-mode="preview" title="N√°hled">üëÅÔ∏è</button>
                            <button class="mode-btn" data-mode="split" title="Rozdƒõlen√Ω pohled">‚ó´</button>
                        </div>
                        <button class="btn btn-icon" id="undoBtn" title="Zpƒõt (Ctrl+Z)" disabled>
                            <span>‚Ü©Ô∏è</span>
                        </button>
                        <button class="btn btn-icon" id="redoBtn" title="Vp≈ôed (Ctrl+Y)" disabled>
                            <span>‚Ü™Ô∏è</span>
                        </button>
                        <button class="btn btn-icon" id="saveBtn" title="Ulo≈æit (Ctrl+S)">
                            <span>üíæ</span>
                        </button>
                        <button class="btn btn-icon" id="pageSettingsBtn" title="Nastaven√≠ str√°nky">
                            <span>‚öôÔ∏è</span>
                        </button>
                        <button class="btn btn-icon" id="historyBtn" title="Historie verz√≠">
                            <span>üïê</span>
                        </button>
                        <button class="btn btn-icon btn-danger" id="deletePageBtn" title="Smazat str√°nku">
                            <span>üóëÔ∏è</span>
                        </button>
                    </div>
                </div>

                <div class="editor-container" id="editorContainer">
                    <div class="editor-toolbar" id="editorToolbar">
                        <div class="toolbar-group">
                            <button class="toolbar-btn" data-action="bold" title="Tuƒçnƒõ (Ctrl+B)"><b>B</b></button>
                            <button class="toolbar-btn" data-action="italic" title="Kurz√≠va (Ctrl+I)"><i>I</i></button>
                            <button class="toolbar-btn" data-action="strikethrough" title="P≈ôe≈°krtnut√©"><s>S</s></button>
                            <button class="toolbar-btn" data-action="code" title="Inline k√≥d">&lt;/&gt;</button>
                        </div>
                        <div class="toolbar-separator"></div>
                        <div class="toolbar-group">
                            <button class="toolbar-btn" data-action="h1" title="Nadpis 1">H1</button>
                            <button class="toolbar-btn" data-action="h2" title="Nadpis 2">H2</button>
                            <button class="toolbar-btn" data-action="h3" title="Nadpis 3">H3</button>
                        </div>
                        <div class="toolbar-separator"></div>
                        <div class="toolbar-group">
                            <button class="toolbar-btn" data-action="ul" title="Neƒç√≠slovan√Ω seznam">‚Ä¢</button>
                            <button class="toolbar-btn" data-action="ol" title="ƒå√≠slovan√Ω seznam">1.</button>
                            <button class="toolbar-btn" data-action="checklist" title="Checklist">‚òë</button>
                            <button class="toolbar-btn" data-action="quote" title="Citace">"</button>
                        </div>
                        <div class="toolbar-separator"></div>
                        <div class="toolbar-group">
                            <button class="toolbar-btn" data-action="link" title="Odkaz">üîó</button>
                            <button class="toolbar-btn" data-action="image" title="Obr√°zek">üñºÔ∏è</button>
                            <button class="toolbar-btn" data-action="table" title="Tabulka">üìä</button>
                            <button class="toolbar-btn" data-action="codeblock" title="Blok k√≥du">üìù</button>
                            <button class="toolbar-btn" data-action="hr" title="Horizont√°ln√≠ linka">‚Äï</button>
                        </div>
                        <div class="toolbar-separator"></div>
                        <div class="toolbar-group" title="GitBook-style bloky">
                            <button class="toolbar-btn" data-action="hint-info" title="Info blok">‚ÑπÔ∏è</button>
                            <button class="toolbar-btn" data-action="hint-warning" title="Warning blok">‚ö†Ô∏è</button>
                            <button class="toolbar-btn" data-action="hint-danger" title="Danger blok">üö´</button>
                            <button class="toolbar-btn" data-action="hint-success" title="Success blok">‚úÖ</button>
                            <button class="toolbar-btn" data-action="expandable" title="Rozbalovac√≠ sekce">üìÇ</button>
                            <button class="toolbar-btn" data-action="tabs" title="Z√°lo≈æky">üìë</button>
                        </div>
                    </div>

                    <div class="editor-body">
                        <div class="editor-pane edit-pane" id="editPane">
                            <textarea class="editor-textarea" id="editorTextarea" placeholder="Zaƒçnƒõte ps√°t... Pou≈æijte Markdown pro form√°tov√°n√≠."></textarea>
                        </div>
                        <div class="editor-pane preview-pane" id="previewPane" style="display: none;">
                            <div class="preview-content" id="previewContent">
                                <!-- Rendered markdown preview -->
                            </div>
                        </div>
                    </div>
                </div>

                <div class="editor-toc" id="editorToc">
                    <div class="toc-header">
                        <span>üìë Obsah</span>
                        <button class="toc-toggle" id="tocToggle" title="Skr√Ωt obsah">√ó</button>
                    </div>
                    <div class="toc-content" id="tocContent">
                        <!-- Table of contents generated from headings -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Search Modal -->
    <div class="modal-overlay" id="searchModal">
        <div class="modal-content search-modal">
            <div class="modal-header">
                <h2>üîç Hledat v dokumentaci</h2>
                <button class="modal-close" id="closeSearchModal">√ó</button>
            </div>
            <div class="modal-body">
                <input type="text" id="modalSearchInput" class="modal-search-input" placeholder="Hledan√Ω v√Ωraz..." autofocus>
                <div class="search-results" id="searchResults">
                    <div class="search-empty">
                        <span>Zaƒçnƒõte ps√°t pro vyhled√°v√°n√≠...</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- New Space Modal -->
    <div class="modal-overlay" id="newSpaceModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üìÅ Nov√Ω prostor</h2>
                <button class="modal-close" data-close="newSpaceModal">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="spaceNameInput">N√°zev prostoru</label>
                    <input type="text" id="spaceNameInput" class="form-input" placeholder="Nap≈ô. Dokumentace projektu" autofocus>
                </div>
                <div class="form-group">
                    <label for="spaceDescInput">Popis (voliteln√©)</label>
                    <textarea id="spaceDescInput" class="form-textarea" placeholder="Kr√°tk√Ω popis prostoru..."></textarea>
                </div>
                <div class="form-group">
                    <label for="spaceIconInput">Ikona</label>
                    <div class="icon-picker" id="spaceIconPicker">
                        <button class="icon-option selected" data-icon="üìÅ">üìÅ</button>
                        <button class="icon-option" data-icon="üìö">üìö</button>
                        <button class="icon-option" data-icon="üìñ">üìñ</button>
                        <button class="icon-option" data-icon="üìù">üìù</button>
                        <button class="icon-option" data-icon="üéØ">üéØ</button>
                        <button class="icon-option" data-icon="üí°">üí°</button>
                        <button class="icon-option" data-icon="‚ö°">‚ö°</button>
                        <button class="icon-option" data-icon="üîß">üîß</button>
                        <button class="icon-option" data-icon="üöÄ">üöÄ</button>
                        <button class="icon-option" data-icon="üé®">üé®</button>
                        <button class="icon-option" data-icon="üìä">üìä</button>
                        <button class="icon-option" data-icon="üîí">üîí</button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-close="newSpaceModal">Zru≈°it</button>
                <button class="btn btn-primary" id="createSpaceBtn">Vytvo≈ôit</button>
            </div>
        </div>
    </div>

    <!-- New Page Modal -->
    <div class="modal-overlay" id="newPageModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üìÑ Nov√° str√°nka</h2>
                <button class="modal-close" data-close="newPageModal">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="pageNameInput">N√°zev str√°nky</label>
                    <input type="text" id="pageNameInput" class="form-input" placeholder="Nap≈ô. √övod" autofocus>
                </div>
                <div class="form-group">
                    <label for="pageParentSelect">Nad≈ôazen√° str√°nka (voliteln√©)</label>
                    <select id="pageParentSelect" class="form-select">
                        <option value="">-- ≈Ω√°dn√° (root str√°nka) --</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-close="newPageModal">Zru≈°it</button>
                <button class="btn btn-primary" id="createPageBtn">Vytvo≈ôit</button>
            </div>
        </div>
    </div>

    <!-- Page Settings Modal -->
    <div class="modal-overlay" id="pageSettingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚öôÔ∏è Nastaven√≠ str√°nky</h2>
                <button class="modal-close" data-close="pageSettingsModal">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="pageSettingsName">N√°zev str√°nky</label>
                    <input type="text" id="pageSettingsName" class="form-input">
                </div>
                <div class="form-group">
                    <label for="pageSettingsSlug">Slug (URL)</label>
                    <input type="text" id="pageSettingsSlug" class="form-input" placeholder="automaticky-vygenerov√°no">
                </div>
                <div class="form-group">
                    <label for="pageSettingsParent">Nad≈ôazen√° str√°nka</label>
                    <select id="pageSettingsParent" class="form-select">
                        <option value="">-- ≈Ω√°dn√° (root str√°nka) --</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Metadata</label>
                    <div class="metadata-info">
                        <span>Vytvo≈ôeno: <strong id="pageCreatedAt">-</strong></span>
                        <span>Upraveno: <strong id="pageUpdatedAt">-</strong></span>
                        <span>Poƒçet slov: <strong id="pageWordCount">0</strong></span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-close="pageSettingsModal">Zru≈°it</button>
                <button class="btn btn-primary" id="savePageSettingsBtn">Ulo≈æit</button>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal-overlay" id="settingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚öôÔ∏è Nastaven√≠</h2>
                <button class="modal-close" data-close="settingsModal">√ó</button>
            </div>
            <div class="modal-body">
                <div class="settings-section">
                    <h3>Vzhled</h3>
                    <div class="form-group">
                        <label for="settingTheme">Barevn√© t√©ma</label>
                        <select id="settingTheme" class="form-select">
                            <option value="dark">Tmav√©</option>
                            <option value="light">Svƒõtl√©</option>
                            <option value="system">Podle syst√©mu</option>
                        </select>
                    </div>
                </div>
                <div class="settings-section">
                    <h3>Editor</h3>
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="settingAutoSave" checked>
                            <span>Automatick√© ukl√°d√°n√≠ (ka≈æd√Ωch 30s)</span>
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="settingSpellcheck">
                            <span>Kontrola pravopisu</span>
                        </label>
                    </div>
                    <div class="form-group">
                        <label for="settingFontSize">Velikost p√≠sma editoru</label>
                        <select id="settingFontSize" class="form-select">
                            <option value="14">Mal√° (14px)</option>
                            <option value="16" selected>St≈ôedn√≠ (16px)</option>
                            <option value="18">Velk√° (18px)</option>
                            <option value="20">Extra velk√° (20px)</option>
                        </select>
                    </div>
                </div>
                <div class="settings-section">
                    <h3>Data</h3>
                    <div class="form-group">
                        <label>√ölo≈æi≈°tƒõ</label>
                        <div class="storage-info" id="storageInfo">
                            <span>Prostory: <strong id="storageSpaces">0</strong></span>
                            <span>Str√°nky: <strong id="storagePages">0</strong></span>
                            <span>Velikost: <strong id="storageSize">0 KB</strong></span>
                        </div>
                    </div>
                    <div class="form-group">
                        <button class="btn btn-danger" id="clearAllDataBtn">
                            üóëÔ∏è Smazat v≈°echna data
                        </button>
                    </div>
                </div>
                <div class="settings-section">
                    <h3>O aplikaci</h3>
                    <div class="about-info">
                        <p><strong>Scribblix</strong> v2.0.0</p>
                        <p>100% offline dokumentaƒçn√≠ platforma inspirovan√° GitBook</p>
                        <p><strong>Nov√© v 2.0:</strong> Content Blocks, Dark/Light mode, Historie verz√≠, Vylep≈°en√° p≈ô√≠stupnost</p>
                        <p class="about-license">
                            Knihovny: Dexie.js (Apache 2.0), Marked.js (MIT),
                            DOMPurify (Apache 2.0/MIT), FlexSearch (Apache 2.0)
                        </p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-close="settingsModal">Zav≈ô√≠t</button>
            </div>
        </div>
    </div>

    <!-- Export Modal -->
    <div class="modal-overlay" id="exportModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üì§ Export</h2>
                <button class="modal-close" data-close="exportModal">√ó</button>
            </div>
            <div class="modal-body">
                <div class="export-options">
                    <h3>Co exportovat?</h3>
                    <div class="form-group">
                        <label class="radio-label">
                            <input type="radio" name="exportScope" value="all" checked>
                            <span>V≈°echna data</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="exportScope" value="space">
                            <span>Aktu√°ln√≠ prostor</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="exportScope" value="page">
                            <span>Aktu√°ln√≠ str√°nka</span>
                        </label>
                    </div>
                    <h3>Form√°t</h3>
                    <div class="form-group">
                        <label class="radio-label">
                            <input type="radio" name="exportFormat" value="json" checked>
                            <span>JSON (kompletn√≠ z√°loha)</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="exportFormat" value="markdown">
                            <span>Markdown soubory</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="exportFormat" value="html">
                            <span>HTML (statick√© str√°nky)</span>
                        </label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-close="exportModal">Zru≈°it</button>
                <button class="btn btn-primary" id="doExportBtn">üì§ Exportovat</button>
            </div>
        </div>
    </div>

    <!-- Import Modal -->
    <div class="modal-overlay" id="importModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üì• Import</h2>
                <button class="modal-close" data-close="importModal">√ó</button>
            </div>
            <div class="modal-body">
                <div class="import-drop-zone" id="importDropZone">
                    <div class="drop-zone-content">
                        <span class="drop-icon">üìÅ</span>
                        <p>P≈ôet√°hnƒõte sem soubor</p>
                        <p class="drop-hint">nebo kliknƒõte pro v√Ωbƒõr</p>
                        <input type="file" id="importFileInput" accept=".json,.md,.zip" hidden>
                    </div>
                </div>
                <div class="import-info">
                    <p>Podporovan√© form√°ty:</p>
                    <ul>
                        <li><strong>.json</strong> - Scribblix z√°loha</li>
                        <li><strong>.md</strong> - Markdown soubor</li>
                        <li><strong>.zip</strong> - Slo≈æka s Markdown soubory</li>
                    </ul>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-close="importModal">Zru≈°it</button>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal-overlay" id="deleteModal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2>üóëÔ∏è Potvrzen√≠ smaz√°n√≠</h2>
                <button class="modal-close" data-close="deleteModal">√ó</button>
            </div>
            <div class="modal-body">
                <p class="delete-warning" id="deleteWarning">
                    Opravdu chcete smazat tuto polo≈æku?
                </p>
                <p class="delete-hint">Tato akce je nevratn√°!</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-close="deleteModal">Zru≈°it</button>
                <button class="btn btn-danger" id="confirmDeleteBtn">Smazat</button>
            </div>
        </div>
    </div>

    <!-- Version History Modal -->
    <div class="modal-overlay" id="historyModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üïê Historie verz√≠</h2>
                <button class="modal-close" data-close="historyModal">√ó</button>
            </div>
            <div class="modal-body">
                <div class="version-list" id="versionList">
                    <div class="search-empty">Naƒç√≠t√°n√≠ historie...</div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" data-close="historyModal">Zav≈ô√≠t</button>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Scripts -->
    <script src="db.js?v=2.0.0"></script>
    <script src="search.js?v=2.0.0"></script>
    <script src="blocks.js?v=2.0.0"></script>
    <script src="theme.js?v=2.0.0"></script>
    <script src="editor.js?v=2.0.0"></script>
    <script src="export.js?v=2.0.0"></script>
    <script src="app.js?v=2.0.0"></script>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(reg => console.log('Service Worker registrov√°n:', reg.scope))
                    .catch(err => console.error('Registrace Service Worker selhala:', err));
            });
        }
    </script>
</body>
</html>
