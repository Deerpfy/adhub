<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#8b5cf6">
    <meta name="description" content="PDF Search - Fulltextové vyhledávání v PDF souborech. 100% client-side, bez serveru.">
    <title>PDF Search - AdHUB</title>

    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">

    <!-- PDF.js pro extrakci textu z PDF -->
    <script src="https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.min.js"></script>

    <!-- MiniSearch pro fulltextové vyhledávání -->
    <script src="https://cdn.jsdelivr.net/npm/minisearch@7.1.1/dist/umd/index.min.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header>
            <div class="header-content">
                <!-- Back to Hub -->
                <a href="../../index.html" class="back-to-hub">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M19 12H5M12 19l-7-7 7-7"/>
                    </svg>
                    <span>Hub</span>
                </a>

                <!-- Language Selector -->
                <div class="lang-selector">
                    <button class="lang-btn active" data-lang="cs">CZ</button>
                    <button class="lang-btn" data-lang="en">EN</button>
                </div>

                <div class="page-title">
                    <h1 data-i18n="title">PDF Search</h1>
                    <p class="subtitle" data-i18n="subtitle">Fulltextové vyhledávání v PDF souborech</p>
                </div>
            </div>
        </header>

        <main class="main-card">
            <!-- Drop Zone -->
            <div class="drop-zone" id="dropZone">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                </svg>
                <div class="drop-text">
                    <span data-i18n="drop_title">Klikněte pro nahrání PDF</span>
                    <span data-i18n="drop_subtitle">nebo přetáhněte soubory sem</span>
                </div>
                <p class="drop-hint" data-i18n="drop_hint">Můžete nahrát více PDF souborů najednou</p>
            </div>
            <input type="file" id="fileInput" accept=".pdf" multiple hidden>

            <!-- Loading indicator -->
            <div class="loading-container" id="loadingContainer" style="display: none;">
                <div class="loading-spinner"></div>
                <p class="loading-text" id="loadingText" data-i18n="loading">Načítání...</p>
            </div>

            <!-- Search Section (visible when files are loaded) -->
            <div class="search-section" id="searchSection" style="display: none;">
                <!-- File List -->
                <div class="file-list" id="fileList">
                    <div class="file-list-header">
                        <h3 data-i18n="loaded_files">Nahraná PDF</h3>
                        <button class="btn btn-secondary btn-sm" id="addMoreBtn" data-i18n="add_more">Přidat další</button>
                    </div>
                    <div class="file-items" id="fileItems"></div>
                </div>

                <!-- Search Bar -->
                <div class="search-bar">
                    <div class="search-input-wrapper">
                        <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="11" cy="11" r="8"/>
                            <path d="M21 21l-4.35-4.35"/>
                        </svg>
                        <input type="text" id="searchInput" class="search-input" data-i18n-placeholder="search_placeholder" placeholder="Hledejte v dokumentech...">
                        <button class="clear-search" id="clearSearch" title="Vymazat" style="display: none;">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="18" y1="6" x2="6" y2="18"/>
                                <line x1="6" y1="6" x2="18" y2="18"/>
                            </svg>
                        </button>
                    </div>
                    <div class="search-options">
                        <label class="checkbox-label">
                            <input type="checkbox" id="fuzzySearch" checked>
                            <span data-i18n="fuzzy_search">Fuzzy vyhledávání</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="prefixSearch" checked>
                            <span data-i18n="prefix_search">Prefix matching</span>
                        </label>
                    </div>
                </div>

                <!-- Stats -->
                <div class="search-stats" id="searchStats">
                    <span id="statsText"></span>
                </div>

                <!-- Results -->
                <div class="results-container" id="resultsContainer">
                    <div class="no-results" id="noResults" style="display: none;">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <circle cx="11" cy="11" r="8"/>
                            <path d="M21 21l-4.35-4.35"/>
                            <path d="M8 8l6 6M14 8l-6 6"/>
                        </svg>
                        <p data-i18n="no_results">Nenalezeny žádné výsledky</p>
                    </div>
                    <div class="results-list" id="resultsList"></div>
                </div>
            </div>

            <!-- Status -->
            <p class="status" id="status"></p>
        </main>

        <footer>
            <p><a href="../../index.html">AdHUB</a> — PDF Search</p>
            <p style="font-size: 0.8rem; margin-top: 8px; color: var(--text-muted);">
                100% client-side processing. Your files never leave your device.
            </p>
        </footer>
    </div>

    <!-- Scripts -->
    <script src="script.js"></script>

    <!-- Initialize PDF.js worker -->
    <script>
        if (typeof pdfjsLib !== 'undefined') {
            pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://unpkg.com/pdfjs-dist@3.11.174/build/pdf.worker.min.js';
        }
    </script>
</body>
</html>
