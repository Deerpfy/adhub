<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Panel - Unified Streaming Chat</title>
    <link rel="stylesheet" href="styles.css">
    <script defer src="script.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Chat Panel</h1>
            <div class="controls">
                <div class="server-controls">
                    <button id="serverToggleBtn" class="btn btn-server-toggle">Zapnout Server</button>
                    <div class="server-status-container">
                        <span id="serverStatus" class="server-status server-status-off"></span>
                        <span id="serverStatusText" class="server-status-text">Kontroluji...</span>
                    </div>
                </div>
                <div class="chat-controls">
                <button id="addChatBtn" class="btn btn-primary">P≈ôidat Chat</button>
                <button id="youtubeKeyBtn" class="btn btn-warning">üîë YouTube API</button>
                <button id="settingsBtn" class="btn btn-secondary">‚öôÔ∏è Nastaven√≠</button>
                <button id="kickAuthBtn" class="btn btn-secondary">üîê Kick OAuth</button>
                <button id="clearAllBtn" class="btn btn-danger">Vymazat V≈°e</button>
                </div>
            </div>
        </header>

        <div id="youtubeKeyBubble" class="youtube-key-bubble" role="dialog" aria-live="polite">
            <div class="bubble-header">
                <span>üîë YouTube API kl√≠ƒç</span>
                <button type="button" id="closeYoutubeKeyBubble" class="bubble-close" aria-label="Zav≈ô√≠t">√ó</button>
            </div>
            <p id="youtubeKeyNote" data-default-message="API kl√≠ƒç se dr≈æ√≠ pouze v t√©to bublinƒõ a v pamƒõti va≈°eho prohl√≠≈æeƒçe. Nep≈ôen√°≈°√≠ se mezi za≈ô√≠zen√≠mi ani se neukl√°d√° na server.">
                API kl√≠ƒç se dr≈æ√≠ pouze v t√©to bublinƒõ a v pamƒõti va≈°eho prohl√≠≈æeƒçe. Nep≈ôen√°≈°√≠ se mezi za≈ô√≠zen√≠mi ani se neukl√°d√° na server.
            </p>
            <div class="bubble-status-row">
                <span>Stav kl√≠ƒçe:</span>
                <span id="youtubeKeyStatus" class="status-pill">Neaktivn√≠ ‚Äì kl√≠ƒç zat√≠m nen√≠ zad√°n</span>
            </div>
            <label for="youtubeKeyInput">Kl√≠ƒç (form√°t AIza...)</label>
            <input type="password" id="youtubeKeyInput" placeholder="Zadejte kl√≠ƒç" autocomplete="off" spellcheck="false">
            <div class="bubble-actions">
                <button type="button" class="btn btn-primary" id="applyYoutubeKeyBtn">Aktivovat v t√©to bublinƒõ</button>
                <button type="button" class="btn btn-secondary" id="clearYoutubeKeyBtn">Vymazat</button>
            </div>
            <small class="bubble-footnote">‚ö†Ô∏è Kl√≠ƒç se nikam neukl√°d√° ani nesd√≠l√≠ ‚Äì z≈Øst√°v√° pouze v tomto oknƒõ a po obnoven√≠ str√°nky ho budete muset zadat znovu.</small>
        </div>

        <div id="chatModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2>P≈ôidat Chat Zdroj</h2>
                <form id="chatForm">
                    <label for="platform">Platforma: <span style="color: #f44336;">*</span></label>
                    <select id="platform" required>
                        <option value="twitch">Twitch</option>
                        <option value="youtube">YouTube</option>
                        <option value="kick">Kick</option>
                        <option value="other">Jin√©</option>
                    </select>
                    
                    <label for="chatUrl" id="chatUrlLabel">URL kan√°lu nebo chatu: <span style="color: #f44336;">*</span></label>
                    <input type="text" id="chatUrl" placeholder="Zadejte URL..." required>
                    <small id="chatUrlHint" style="color: #aaa; font-size: 12px; display: block; margin-top: 5px; margin-bottom: 15px;">
                        Pro Twitch: zadejte URL kan√°lu (nap≈ô. https://www.twitch.tv/USERNAME)
                    </small>
                    
                    <div id="kickOAuthWarning" style="display: none; background: rgba(255, 152, 0, 0.2); border: 1px solid rgba(255, 152, 0, 0.5); border-radius: 8px; padding: 12px; margin-bottom: 15px;">
                        <strong style="color: #ff9800;">‚ö†Ô∏è Pozor:</strong>
                        <p style="margin: 8px 0 0 0; color: #fff; font-size: 13px;">
                            Pro Kick chat je pot≈ôeba OAuth autentizace. Ujistƒõte se, ≈æe jste p≈ôihl√°≈°eni p≈ôes tlaƒç√≠tko "üîê Kick OAuth" v hlaviƒçce.
                        </p>
                    </div>
                    
                    <label for="chatName">N√°zev chatu (voliteln√©):</label>
                    <input type="text" id="chatName" placeholder="Automaticky se vygeneruje z kan√°lu">
                    <small style="color: #aaa; font-size: 11px; display: block; margin-top: 5px; margin-bottom: 15px;">
                        Pokud nech√°te pr√°zdn√©, n√°zev se vygeneruje automaticky z n√°zvu kan√°lu
                    </small>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">P≈ôidat</button>
                        <button type="button" class="btn btn-secondary" id="cancelBtn">Zru≈°it</button>
                    </div>
                </form>
            </div>
        </div>

        <div id="editChatModal" class="modal">
            <div class="modal-content">
                <span class="close-edit">&times;</span>
                <h2>Upravit Chat</h2>
                <form id="editChatForm">
                    <label for="editPlatform">Platforma: <span style="color: #f44336;">*</span></label>
                    <select id="editPlatform" required>
                        <option value="twitch">Twitch</option>
                        <option value="youtube">YouTube</option>
                        <option value="kick">Kick</option>
                        <option value="other">Jin√©</option>
                    </select>
                    
                    <label for="editChatUrl" id="editChatUrlLabel">URL kan√°lu nebo chatu: <span style="color: #f44336;">*</span></label>
                    <input type="text" id="editChatUrl" placeholder="Zadejte URL..." required>
                    <small id="editChatUrlHint" style="color: #aaa; font-size: 12px; display: block; margin-top: 5px; margin-bottom: 15px;">
                        Pro Twitch: zadejte URL kan√°lu (nap≈ô. https://www.twitch.tv/USERNAME)
                    </small>
                    
                    <div id="editKickOAuthWarning" style="display: none; background: rgba(255, 152, 0, 0.2); border: 1px solid rgba(255, 152, 0, 0.5); border-radius: 8px; padding: 12px; margin-bottom: 15px;">
                        <strong style="color: #ff9800;">‚ö†Ô∏è Pozor:</strong>
                        <p style="margin: 8px 0 0 0; color: #fff; font-size: 13px;">
                            Pro Kick chat je pot≈ôeba OAuth autentizace. Ujistƒõte se, ≈æe jste p≈ôihl√°≈°eni p≈ôes tlaƒç√≠tko "üîê Kick OAuth" v hlaviƒçce.
                        </p>
                    </div>
                    
                    <label for="editChatName">N√°zev chatu (voliteln√©):</label>
                    <input type="text" id="editChatName" placeholder="Automaticky se vygeneruje z kan√°lu">
                    <small style="color: #aaa; font-size: 11px; display: block; margin-top: 5px; margin-bottom: 15px;">
                        Pokud nech√°te pr√°zdn√©, n√°zev se vygeneruje automaticky z n√°zvu kan√°lu
                    </small>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Ulo≈æit</button>
                        <button type="button" class="btn btn-secondary" id="cancelEditBtn">Zru≈°it</button>
                    </div>
                </form>
            </div>
        </div>

        <div id="settingsModal" class="modal">
            <div class="modal-content settings-modal-content" style="max-width: 600px;">
                <h2>‚öôÔ∏è Nastaven√≠ API</h2>
                <form id="settingsForm">
                    <div style="margin-bottom: 25px; padding: 15px; background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6; border-radius: 8px;">
                        <strong style="color: #3b82f6;">‚ÑπÔ∏è Informace:</strong>
                        <p style="margin: 8px 0 0 0; color: #aaa; font-size: 13px;">
                            Kick p≈ôihla≈°ovac√≠ √∫daje (Client ID/Secret) se ukl√°daj√≠ na serveru. YouTube API kl√≠ƒç se zad√°v√° pouze lok√°lnƒõ p≈ôes tlaƒç√≠tko ‚Äûüîë YouTube API‚Äú a nikdy se nesd√≠l√≠ mimo va≈°e aktu√°ln√≠ okno.
                        </p>
                    </div>
                    
                    <h3 style="color: #fff; margin-top: 20px; margin-bottom: 15px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px;">üéÆ Kick OAuth</h3>
                    <label for="kickClientId">Kick Client ID:</label>
                    <input type="text" id="kickClientId" placeholder="Zadejte Kick Client ID">
                    <small style="color: #aaa; font-size: 12px; display: block; margin-top: 5px; margin-bottom: 15px;">
                        Z√≠sk√°te na <a href="https://kick.com/settings/developer" target="_blank" style="color: #3b82f6;">kick.com/settings/developer</a>
                    </small>
                    
                    <label for="kickClientSecret">Kick Client Secret:</label>
                    <input type="password" id="kickClientSecret" placeholder="Zadejte Kick Client Secret">
                    <small style="color: #aaa; font-size: 12px; display: block; margin-top: 5px; margin-bottom: 15px;">
                        Citliv√° informace - ukl√°d√° se na serveru
                    </small>
                    
                    <h3 style="color: #fff; margin-top: 25px; margin-bottom: 15px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px;">üéØ Twitch</h3>
                    <label for="twitchChannelName">N√°zev Twitch profilu (voliteln√©):</label>
                    <input type="text" id="twitchChannelName" placeholder="nap≈ô. gamezense">
                    <small style="color: #aaa; font-size: 12px; display: block; margin-top: 5px; margin-bottom: 15px;">
                        V√Ωchoz√≠ Twitch kan√°l (voliteln√©). Kan√°ly se vƒõt≈°inou zad√°vaj√≠ p≈ôi p≈ôid√°v√°n√≠ konkr√©tn√≠ho chatu. Toto pole slou≈æ√≠ pro p≈ô√≠padn√© budouc√≠ funkce.
                    </small>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">üíæ Ulo≈æit</button>
                        <button type="button" class="btn btn-secondary" id="cancelSettingsBtn">Zru≈°it</button>
                    </div>
                </form>
            </div>
        </div>

        <div id="chatContainer" class="chat-container">
            <div class="empty-state" id="emptyState">
                <p>≈Ω√°dn√© chaty nejsou p≈ôidan√©. Kliknƒõte na "P≈ôidat Chat" pro zaƒç√°tek.</p>
            </div>
        </div>
    </div>

</body>
</html>

