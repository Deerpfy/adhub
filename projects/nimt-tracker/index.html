<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="theme-color" content="#10b981">
    <meta name="description" content="Offline AI Visibility Tracker - Sledujte viditelnost va≈°√≠ znaƒçky v AI vyhled√°vaƒç√≠ch">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìä</text></svg>">
    <title>AI Visibility Tracker - Offline</title>
    <link rel="stylesheet" href="styles.css?v=1.0.0">
</head>
<body>
    <div class="app-container">
        <!-- Sticky Header -->
        <header class="header">
            <div class="header-content">
                <div class="header-left">
                    <h1 class="logo">
                        <span class="logo-icon">üìä</span>
                        AI Visibility Tracker
                    </h1>
                    <span class="version-badge">v1.0.0</span>
                    <span class="offline-badge" id="offlineBadge">
                        <span class="offline-dot"></span>
                        Offline Ready
                    </span>
                </div>
                <div class="header-right">
                    <button class="btn-icon" id="themeToggle" title="P≈ôepnout t√©ma">
                        <span id="themeIcon">üåô</span>
                    </button>
                    <button class="btn-icon" id="exportBtn" title="Exportovat data">
                        <span>üì•</span>
                    </button>
                    <button class="btn-icon" id="importBtn" title="Importovat data">
                        <span>üì§</span>
                    </button>
                    <input type="file" id="importFile" accept=".json" style="display: none;">
                </div>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <nav class="nav-tabs">
            <button class="nav-tab active" data-tab="dashboard">
                <span class="tab-icon">üìà</span>
                <span class="tab-text">Dashboard</span>
            </button>
            <button class="nav-tab" data-tab="brands">
                <span class="tab-icon">üè∑Ô∏è</span>
                <span class="tab-text">Znaƒçky</span>
            </button>
            <button class="nav-tab" data-tab="prompts">
                <span class="tab-icon">üí¨</span>
                <span class="tab-text">Prompty</span>
            </button>
            <button class="nav-tab" data-tab="sources">
                <span class="tab-icon">üîó</span>
                <span class="tab-text">Zdroje</span>
            </button>
            <button class="nav-tab" data-tab="competitors">
                <span class="tab-icon">‚öîÔ∏è</span>
                <span class="tab-text">Konkurence</span>
            </button>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Tab -->
            <section class="tab-content active" id="tab-dashboard">
                <div class="dashboard-hero">
                    <h2 class="hero-title">AI Visibility Overview</h2>
                    <p class="hero-subtitle">Sledujte jak je va≈°e znaƒçka viditeln√° v AI vyhled√°vaƒç√≠ch</p>
                </div>

                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üéØ</div>
                        <div class="stat-info">
                            <span class="stat-value" id="totalMentions">0</span>
                            <span class="stat-label">Celkem zm√≠nek</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üìä</div>
                        <div class="stat-info">
                            <span class="stat-value" id="shareOfVoice">0%</span>
                            <span class="stat-label">Share of Voice</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üîó</div>
                        <div class="stat-info">
                            <span class="stat-value" id="totalSources">0</span>
                            <span class="stat-label">Citovan√© zdroje</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üí¨</div>
                        <div class="stat-info">
                            <span class="stat-value" id="totalPrompts">0</span>
                            <span class="stat-label">Sledovan√© prompty</span>
                        </div>
                    </div>
                </div>

                <!-- Charts Section -->
                <div class="charts-section">
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3 class="chart-title">AI Model Coverage</h3>
                            <span class="chart-subtitle">Zm√≠nky podle AI platformy</span>
                        </div>
                        <div class="chart-body">
                            <canvas id="aiModelsChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3 class="chart-title">Visibility Trend</h3>
                            <span class="chart-subtitle">V√Ωvoj viditelnosti v ƒçase</span>
                        </div>
                        <div class="chart-body">
                            <canvas id="trendChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Source Distribution -->
                <div class="section-card">
                    <div class="section-header">
                        <h3 class="section-title">
                            <span class="section-icon">üì∞</span>
                            Distribuce zdroj≈Ø citac√≠
                        </h3>
                    </div>
                    <div class="source-distribution" id="sourceDistribution">
                        <div class="empty-state small">
                            <p>Zat√≠m ≈æ√°dn√° data. P≈ôidejte zdroje v sekci "Zdroje".</p>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="section-card">
                    <div class="section-header">
                        <h3 class="section-title">
                            <span class="section-icon">üïê</span>
                            Ned√°vn√° aktivita
                        </h3>
                    </div>
                    <div class="activity-list" id="activityList">
                        <div class="empty-state small">
                            <p>Zat√≠m ≈æ√°dn√° aktivita.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Brands Tab -->
            <section class="tab-content" id="tab-brands">
                <div class="section-header-bar">
                    <h2 class="section-main-title">
                        <span class="section-icon">üè∑Ô∏è</span>
                        Spr√°va znaƒçek
                    </h2>
                    <button class="btn btn-primary" id="addBrandBtn">
                        <span>+</span> P≈ôidat znaƒçku
                    </button>
                </div>

                <div class="brands-grid" id="brandsGrid">
                    <div class="empty-state">
                        <div class="empty-icon">üè∑Ô∏è</div>
                        <p class="empty-title">≈Ω√°dn√© znaƒçky</p>
                        <p class="empty-text">P≈ôidejte znaƒçku pro zaƒç√°tek sledov√°n√≠</p>
                    </div>
                </div>
            </section>

            <!-- Prompts Tab -->
            <section class="tab-content" id="tab-prompts">
                <div class="section-header-bar">
                    <h2 class="section-main-title">
                        <span class="section-icon">üí¨</span>
                        AI Prompty
                    </h2>
                    <button class="btn btn-primary" id="addPromptBtn">
                        <span>+</span> P≈ôidat prompt
                    </button>
                </div>

                <!-- Prompt Generator -->
                <div class="prompt-generator-card">
                    <div class="card-header">
                        <h3 class="card-title">
                            <span class="card-icon">‚ú®</span>
                            Automatick√Ω gener√°tor prompt≈Ø
                        </h3>
                    </div>
                    <div class="card-body">
                        <p class="card-description">Zadejte URL webu a vygenerujeme relevantn√≠ AI prompty pro sledov√°n√≠.</p>
                        <div class="input-group">
                            <input type="url" id="generateUrlInput" class="input" placeholder="https://example.com">
                            <button class="btn btn-secondary" id="generatePromptsBtn">Generovat</button>
                        </div>
                        <div class="generated-prompts" id="generatedPrompts" style="display: none;">
                            <h4>Vygenerovan√© prompty:</h4>
                            <div class="prompts-list" id="generatedPromptsList"></div>
                        </div>
                    </div>
                </div>

                <div class="prompts-list-section" id="promptsListSection">
                    <div class="empty-state">
                        <div class="empty-icon">üí¨</div>
                        <p class="empty-title">≈Ω√°dn√© prompty</p>
                        <p class="empty-text">P≈ôidejte prompt nebo pou≈æijte gener√°tor</p>
                    </div>
                </div>
            </section>

            <!-- Sources Tab -->
            <section class="tab-content" id="tab-sources">
                <div class="section-header-bar">
                    <h2 class="section-main-title">
                        <span class="section-icon">üîó</span>
                        Citovan√© zdroje
                    </h2>
                    <button class="btn btn-primary" id="addSourceBtn">
                        <span>+</span> P≈ôidat zdroj
                    </button>
                </div>

                <!-- Source Stats -->
                <div class="source-stats" id="sourceStats">
                    <div class="source-stat-item">
                        <span class="source-stat-label">Editori√°ln√≠ m√©dia</span>
                        <div class="source-stat-bar">
                            <div class="source-stat-fill" id="editorialFill" style="width: 0%"></div>
                        </div>
                        <span class="source-stat-value" id="editorialPercent">0%</span>
                    </div>
                    <div class="source-stat-item">
                        <span class="source-stat-label">Vlastn√≠ web</span>
                        <div class="source-stat-bar">
                            <div class="source-stat-fill own-web" id="ownWebFill" style="width: 0%"></div>
                        </div>
                        <span class="source-stat-value" id="ownWebPercent">0%</span>
                    </div>
                    <div class="source-stat-item">
                        <span class="source-stat-label">Recenze & F√≥ra</span>
                        <div class="source-stat-bar">
                            <div class="source-stat-fill reviews" id="reviewsFill" style="width: 0%"></div>
                        </div>
                        <span class="source-stat-value" id="reviewsPercent">0%</span>
                    </div>
                    <div class="source-stat-item">
                        <span class="source-stat-label">Ostatn√≠</span>
                        <div class="source-stat-bar">
                            <div class="source-stat-fill other" id="otherFill" style="width: 0%"></div>
                        </div>
                        <span class="source-stat-value" id="otherPercent">0%</span>
                    </div>
                </div>

                <div class="sources-grid" id="sourcesGrid">
                    <div class="empty-state">
                        <div class="empty-icon">üîó</div>
                        <p class="empty-title">≈Ω√°dn√© zdroje</p>
                        <p class="empty-text">P≈ôidejte zdroje citac√≠ z AI odpovƒõd√≠</p>
                    </div>
                </div>
            </section>

            <!-- Competitors Tab -->
            <section class="tab-content" id="tab-competitors">
                <div class="section-header-bar">
                    <h2 class="section-main-title">
                        <span class="section-icon">‚öîÔ∏è</span>
                        Konkurenƒçn√≠ anal√Ωza
                    </h2>
                    <button class="btn btn-primary" id="addCompetitorBtn">
                        <span>+</span> P≈ôidat konkurenta
                    </button>
                </div>

                <!-- SoV Comparison Chart -->
                <div class="chart-card full-width">
                    <div class="chart-header">
                        <h3 class="chart-title">Share of Voice srovn√°n√≠</h3>
                        <span class="chart-subtitle">Pod√≠l znaƒçek v AI odpovƒõd√≠ch</span>
                    </div>
                    <div class="chart-body">
                        <canvas id="sovChart"></canvas>
                    </div>
                </div>

                <div class="competitors-grid" id="competitorsGrid">
                    <div class="empty-state">
                        <div class="empty-icon">‚öîÔ∏è</div>
                        <p class="empty-title">≈Ω√°dn√≠ konkurenti</p>
                        <p class="empty-text">P≈ôidejte konkurenty pro srovn√°n√≠</p>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <span class="footer-text">AI Visibility Tracker - 100% offline, va≈°e data z≈Øst√°vaj√≠ u v√°s</span>
                <span class="footer-link">
                    <a href="../" class="back-link">‚Üê Zpƒõt na AdHUB</a>
                </span>
            </div>
        </footer>
    </div>

    <!-- Modals -->
    <!-- Add Brand Modal -->
    <div class="modal-overlay" id="brandModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="brandModalTitle">P≈ôidat znaƒçku</h2>
                <button class="modal-close" data-close-modal>&times;</button>
            </div>
            <div class="modal-body">
                <form id="brandForm">
                    <input type="hidden" id="brandId">
                    <div class="form-group">
                        <label for="brandName">N√°zev znaƒçky *</label>
                        <input type="text" id="brandName" class="input" required placeholder="Nap≈ô. Moje Firma">
                    </div>
                    <div class="form-group">
                        <label for="brandUrl">Web URL</label>
                        <input type="url" id="brandUrl" class="input" placeholder="https://example.com">
                    </div>
                    <div class="form-group">
                        <label for="brandKeywords">Kl√≠ƒçov√° slova (oddƒõlen√° ƒç√°rkou)</label>
                        <input type="text" id="brandKeywords" class="input" placeholder="produkt, slu≈æba, kategorie">
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="brandIsPrimary"> Prim√°rn√≠ znaƒçka (moje)
                        </label>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" data-close-modal>Zru≈°it</button>
                        <button type="submit" class="btn btn-primary">Ulo≈æit</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Prompt Modal -->
    <div class="modal-overlay" id="promptModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="promptModalTitle">P≈ôidat prompt</h2>
                <button class="modal-close" data-close-modal>&times;</button>
            </div>
            <div class="modal-body">
                <form id="promptForm">
                    <input type="hidden" id="promptId">
                    <div class="form-group">
                        <label for="promptText">Text promptu *</label>
                        <textarea id="promptText" class="input textarea" required placeholder="Nap≈ô. What are the best CRM solutions for small business?"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="promptBrand">Sledovan√° znaƒçka *</label>
                        <select id="promptBrand" class="input" required>
                            <option value="">Vyberte znaƒçku</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="promptAiModel">AI Model</label>
                        <select id="promptAiModel" class="input">
                            <option value="chatgpt">ChatGPT</option>
                            <option value="perplexity">Perplexity</option>
                            <option value="gemini">Gemini</option>
                            <option value="claude">Claude</option>
                            <option value="google-ai">Google AI Mode</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>V√Ωsledky testov√°n√≠</label>
                        <div class="checkbox-group">
                            <label>
                                <input type="checkbox" id="promptMentioned"> Znaƒçka zm√≠nƒõna
                            </label>
                            <label>
                                <input type="checkbox" id="promptCited"> Citov√°n zdroj
                            </label>
                            <label>
                                <input type="checkbox" id="promptRecommended"> Znaƒçka doporuƒçena
                            </label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="promptNotes">Pozn√°mky</label>
                        <textarea id="promptNotes" class="input textarea small" placeholder="Voliteln√© pozn√°mky k v√Ωsledku"></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" data-close-modal>Zru≈°it</button>
                        <button type="submit" class="btn btn-primary">Ulo≈æit</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Source Modal -->
    <div class="modal-overlay" id="sourceModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="sourceModalTitle">P≈ôidat zdroj</h2>
                <button class="modal-close" data-close-modal>&times;</button>
            </div>
            <div class="modal-body">
                <form id="sourceForm">
                    <input type="hidden" id="sourceId">
                    <div class="form-group">
                        <label for="sourceName">N√°zev zdroje *</label>
                        <input type="text" id="sourceName" class="input" required placeholder="Nap≈ô. Forbes ƒçl√°nek">
                    </div>
                    <div class="form-group">
                        <label for="sourceUrl">URL *</label>
                        <input type="url" id="sourceUrl" class="input" required placeholder="https://example.com/article">
                    </div>
                    <div class="form-group">
                        <label for="sourceType">Typ zdroje *</label>
                        <select id="sourceType" class="input" required>
                            <option value="editorial">Editori√°ln√≠ m√©dia</option>
                            <option value="own-web">Vlastn√≠ web</option>
                            <option value="reviews">Recenze & F√≥ra</option>
                            <option value="other">Ostatn√≠</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="sourceBrand">Vztahuje se k znaƒçce</label>
                        <select id="sourceBrand" class="input">
                            <option value="">Obecn√Ω zdroj</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="sourceCitations">Poƒçet citac√≠</label>
                        <input type="number" id="sourceCitations" class="input" min="1" value="1">
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" data-close-modal>Zru≈°it</button>
                        <button type="submit" class="btn btn-primary">Ulo≈æit</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Competitor Modal -->
    <div class="modal-overlay" id="competitorModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="competitorModalTitle">P≈ôidat konkurenta</h2>
                <button class="modal-close" data-close-modal>&times;</button>
            </div>
            <div class="modal-body">
                <form id="competitorForm">
                    <input type="hidden" id="competitorId">
                    <div class="form-group">
                        <label for="competitorName">N√°zev konkurenta *</label>
                        <input type="text" id="competitorName" class="input" required placeholder="Nap≈ô. Konkurent A">
                    </div>
                    <div class="form-group">
                        <label for="competitorUrl">Web URL</label>
                        <input type="url" id="competitorUrl" class="input" placeholder="https://competitor.com">
                    </div>
                    <div class="form-group">
                        <label for="competitorMentions">Poƒçet AI zm√≠nek</label>
                        <input type="number" id="competitorMentions" class="input" min="0" value="0">
                    </div>
                    <div class="form-group">
                        <label for="competitorSov">Odhadovan√Ω Share of Voice (%)</label>
                        <input type="number" id="competitorSov" class="input" min="0" max="100" value="0">
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" data-close-modal>Zru≈°it</button>
                        <button type="submit" class="btn btn-primary">Ulo≈æit</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Confirm Delete Modal -->
    <div class="modal-overlay" id="confirmModal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2 class="modal-title">Potvrdit smaz√°n√≠</h2>
                <button class="modal-close" data-close-modal>&times;</button>
            </div>
            <div class="modal-body">
                <p id="confirmMessage">Opravdu chcete smazat tuto polo≈æku?</p>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" data-close-modal>Zru≈°it</button>
                    <button type="button" class="btn btn-danger" id="confirmDeleteBtn">Smazat</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Chart.js from CDN with local fallback -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script>
        // Fallback for offline - simple charts if Chart.js not loaded
        if (typeof Chart === 'undefined') {
            console.log('Chart.js not available, using fallback');
            window.Chart = class {
                constructor(ctx, config) {
                    this.ctx = ctx;
                    this.config = config;
                    this.renderFallback();
                }
                renderFallback() {
                    const canvas = this.ctx.canvas || this.ctx;
                    const container = canvas.parentElement;
                    container.innerHTML = '<div class="chart-fallback">Graf nen√≠ dostupn√Ω offline. Data jsou zobrazena n√≠≈æe.</div>';
                }
                update() {}
                destroy() {}
            };
        }
    </script>
    <script src="db.js?v=1.0.0"></script>
    <script src="app.js?v=1.0.0"></script>
</body>
</html>
