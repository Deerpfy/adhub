<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Prompt Formatter</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- LZ-String compression library -->
    <script src="https://unpkg.com/lz-string@1.5.0/libs/lz-string.min.js"></script>
    <style>
        * { box-sizing: border-box; }
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
            min-height: 100vh;
        }
        #root { min-height: 100vh; }
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: rgba(255,255,255,0.05); }
        ::-webkit-scrollbar-thumb { background: rgba(251,191,36,0.4); border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: rgba(251,191,36,0.6); }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
        .animate-pulse { animation: pulse 2s infinite; }
        /* Checklist color classes */
        .color-role { border-left: 3px solid #a855f7; padding-left: 8px; background: rgba(168, 85, 247, 0.1); }
        .color-context { border-left: 3px solid #3b82f6; padding-left: 8px; background: rgba(59, 130, 246, 0.1); }
        .color-task { border-left: 3px solid #22c55e; padding-left: 8px; background: rgba(34, 197, 94, 0.1); }
        .color-constraints { border-left: 3px solid #f97316; padding-left: 8px; background: rgba(249, 115, 22, 0.1); }
        .color-format { border-left: 3px solid #ec4899; padding-left: 8px; background: rgba(236, 72, 153, 0.1); }
        .color-examples { border-left: 3px solid #eab308; padding-left: 8px; background: rgba(234, 179, 8, 0.1); }
        .color-methods { border-left: 3px solid #ef4444; padding-left: 8px; background: rgba(239, 68, 68, 0.1); }
        .color-template { border-left: 3px solid #14b8a6; padding-left: 8px; background: rgba(20, 184, 166, 0.1); }
        .color-features { border-left: 3px solid #06b6d4; padding-left: 8px; background: rgba(6, 182, 212, 0.1); }
        .dot-purple { background: #a855f7; }
        .dot-blue { background: #3b82f6; }
        .dot-green { background: #22c55e; }
        .dot-orange { background: #f97316; }
        .dot-pink { background: #ec4899; }
        .dot-yellow { background: #eab308; }
        .dot-red { background: #ef4444; }
        .text-check-purple { color: #a855f7; }
        .text-check-blue { color: #3b82f6; }
        .text-check-green { color: #22c55e; }
        .text-check-orange { color: #f97316; }
        .text-check-pink { color: #ec4899; }
        .text-check-yellow { color: #eab308; }
        .text-check-red { color: #ef4444; }
        .bg-check-purple { background: rgba(168, 85, 247, 0.15); border-color: rgba(168, 85, 247, 0.3); }
        .bg-check-blue { background: rgba(59, 130, 246, 0.15); border-color: rgba(59, 130, 246, 0.3); }
        .bg-check-green { background: rgba(34, 197, 94, 0.15); border-color: rgba(34, 197, 94, 0.3); }
        .bg-check-orange { background: rgba(249, 115, 22, 0.15); border-color: rgba(249, 115, 22, 0.3); }
        .bg-check-pink { background: rgba(236, 72, 153, 0.15); border-color: rgba(236, 72, 153, 0.3); }
        .bg-check-yellow { background: rgba(234, 179, 8, 0.15); border-color: rgba(234, 179, 8, 0.3); }
        .bg-check-red { background: rgba(239, 68, 68, 0.15); border-color: rgba(239, 68, 68, 0.3); }

        /* Auto-resize textarea styles */
        .auto-resize-textarea {
            min-height: 60px;
            max-height: 200px;
            overflow-y: auto;
            transition: height 0.1s ease-out;
        }
        .auto-resize-textarea:focus {
            max-height: 300px;
        }
        /* Visual resize handle indicator */
        .auto-resize-textarea {
            resize: vertical;
        }
        /* Resize handle styling for better visibility */
        .resize-handle-container {
            position: relative;
        }
        .resize-handle-container::after {
            content: '';
            position: absolute;
            right: 4px;
            bottom: 4px;
            width: 10px;
            height: 10px;
            background: linear-gradient(135deg, transparent 50%, rgba(251,191,36,0.3) 50%);
            pointer-events: none;
            border-radius: 2px;
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        slate: {
                            750: '#293548',
                            850: '#172033',
                        }
                    }
                }
            }
        }
    </script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo, useRef, useCallback } = React;

        // ==================== AVAILABLE LANGUAGES ====================
        // Manual translations only - no API calls
        const AVAILABLE_LANGUAGES = [
            { code: 'en', name: 'English', native: 'English', flag: 'üá¨üáß' },
            { code: 'cs', name: 'Czech', native: 'ƒåe≈°tina', flag: 'üá®üáø' }
        ];

        // Legacy alias for backward compatibility
        const languages = AVAILABLE_LANGUAGES;

        // ==================== BASE TRANSLATIONS (Manual - EN + CS) ====================
        const BASE_TRANSLATIONS = {
            en: {
                title: 'AI Prompt Formatter',
                subtitle: 'Research-backed prompting techniques from 2025 studies ‚Ä¢ v2.0',
                version: 'v2.0',
                backToHub: 'Back to Hub',
                searchLanguage: 'Search language...',
                templates: {
                    general: { name: 'General Task', desc: 'Flexible format for any task', context: '' },
                    coding: { name: 'Coding Help', desc: 'Debug, write, or explain code', context: 'Focus on writing clean, efficient, and well-documented code. Include code comments where helpful.' },
                    creative: { name: 'Creative Writing', desc: 'Stories, content, copywriting', context: 'Focus on creativity, engaging narrative, and vivid language. Be original and expressive.' },
                    analysis: { name: 'Analysis', desc: 'Research, compare, evaluate', context: 'Provide thorough analysis with evidence-based reasoning. Consider multiple perspectives and cite sources where applicable.' },
                    explanation: { name: 'Explanation', desc: 'Teach or clarify concepts', context: 'Explain clearly for the target audience. Use analogies and examples to make complex concepts accessible.' },
                    // New categories from 2025 usage research
                    email: { name: 'Professional Email', desc: 'Business communication, outreach', context: 'Write professional, clear, and effective email communication. Consider tone, structure, and call-to-action.' },
                    academic: { name: 'Academic Writing', desc: 'Research papers, essays, citations', context: 'Follow academic standards. Use proper structure, citations, and evidence-based arguments.' },
                    data: { name: 'Data & Spreadsheets', desc: 'Excel formulas, SQL, data analysis', context: 'Focus on accurate data manipulation. Provide formulas, queries, or scripts with clear explanations.' },
                    marketing: { name: 'Marketing & SEO', desc: 'Ads, social media, SEO content', context: 'Create engaging, conversion-focused content. Optimize for target audience and platform requirements.' },
                    summarization: { name: 'Summarization', desc: 'Condense documents, key points', context: 'Extract key information clearly and concisely. Maintain accuracy while reducing length.' },
                    image_gen: { name: 'Image Generation', desc: 'DALL-E, Midjourney, Stable Diffusion', context: 'Craft detailed visual descriptions. Include style, mood, composition, and specific artistic elements.' },
                    translation: { name: 'Translation', desc: 'Language translation, localization', context: 'Translate accurately while preserving meaning, tone, and cultural context.' },
                    business: { name: 'Business Documents', desc: 'Reports, proposals, presentations', context: 'Create professional business documents with clear structure, data-driven insights, and actionable recommendations.' },
                    customer_service: { name: 'Customer Service', desc: 'Support responses, FAQs', context: 'Provide helpful, empathetic, and solution-oriented customer responses.' },
                    productivity: { name: 'Productivity', desc: 'Planning, organization, goals', context: 'Help with personal organization, goal setting, and task management. Be practical and actionable.' },
                },
                fields: {
                    role: { label: 'Role / Persona', placeholder: 'e.g., an expert technical writer' },
                    task: { label: 'Task', placeholder: 'e.g., Write documentation for a REST API endpoint' },
                    context: { label: 'Context / Background', placeholder: 'e.g., This is for a fintech startup' },
                    constraints: { label: 'Constraints / Requirements', placeholder: 'e.g., Keep it concise, use examples' },
                    steps: { label: 'Steps to Follow', placeholder: 'Enter each step on a new line...' },
                    outputFormat: { label: 'Output Format', placeholder: 'e.g., Markdown with headers and code blocks' },
                    expectations: { label: 'Expectations / End Goal', placeholder: 'e.g., Clear, actionable documentation' },
                    examples: { label: 'Examples (optional)', placeholder: 'e.g., Input: ... ‚Üí Output: ...' },
                    fewshot: { label: 'Few-Shot Examples (Input ‚Üí Output)', placeholder: 'Input: ... ‚Üí Output: ...' },
                },
                // Enhanced examples section translations
                examplesSection: {
                    title: 'Examples with File Format',
                    fileType: 'Data Format',
                    fileTypes: {
                        none: { name: 'Plain Text', desc: 'Simple text examples' },
                        excel: { name: 'Excel/Spreadsheet', desc: 'Rows & columns structure' },
                        csv: { name: 'CSV', desc: 'Comma-separated values' },
                        json: { name: 'JSON', desc: 'Key-value pairs' },
                        table: { name: 'Table', desc: 'Structured table format' },
                    },
                    params: {
                        columnSeparator: 'Column separator',
                        rowDescription: 'Row structure',
                        headers: 'Column headers',
                        headersPlaceholder: 'e.g., Name | Age | City',
                    },
                    addRow: 'Add row (+)',
                    removeRow: 'Remove',
                    rowPlaceholder: 'Example row data...',
                    rowSeparatorHint: 'Use (+) button to add separated example rows',
                    structurePreview: 'Structure preview',
                },
                methods: {
                    title: 'Research-Backed Methods',
                    active: 'method(s) active',
                    recommended: 'Recommended',
                    showAll: 'Show all',
                    hideOthers: 'Hide others',
                    bestFor: 'Best for this category',
                    cot: { name: 'Chain-of-Thought', citation: 'Google Brain 2022', tip: 'Best for math, logic, multi-step problems. +39pp on GSM8K.' },
                    zeroshot: { name: 'Zero-Shot CoT', citation: 'U.Tokyo + Google 2022', tip: '"Let\'s think step by step" - no examples needed. +61pp on MultiArith.' },
                    fewshot: { name: 'Few-Shot Learning', citation: 'OpenAI 2020', tip: 'Learn from 1-10 examples. Can improve accuracy 0%‚Üí90%.' },
                    tot: { name: 'Tree of Thoughts', citation: 'Princeton + DeepMind 2023', tip: 'Explore multiple paths with backtracking. 4%‚Üí74% on Game of 24.' },
                    selfconsistency: { name: 'Self-Consistency', citation: 'Google Research 2022', tip: 'Multiple reasoning paths, majority vote. +17.9% on GSM8K.' },
                    react: { name: 'ReAct', citation: 'Princeton + Google 2022', tip: 'Thought-Action-Observation cycle for tool use. +34% on ALFWorld.' },
                    risen: { name: 'RISEN Framework', citation: 'Kyle Balmer', tip: 'Role-Instructions-Steps-End Goal-Narrowing structure.' },
                    emotion: { name: 'EmotionPrompt', citation: 'Microsoft + CAS 2023', tip: 'Emotional stimuli boost performance. +8% instruction, +115% BIG-Bench.' },
                    plansolve: { name: 'Plan-and-Solve', citation: 'SUTD 2023', tip: 'Zero-shot planning before solving. +5% over Zero-Shot-CoT.' },
                    selfask: { name: 'Self-Ask', citation: 'UW + Meta AI 2022', tip: 'Ask follow-up questions until solved. Great for multi-hop QA.' },
                    pal: { name: 'PAL (Program-Aided)', citation: 'CMU 2022', tip: 'Generate code for calculations. +40% on GSM-Hard.' },
                    selfrefine: { name: 'Self-Refine', citation: 'CMU + AI2 + Google 2023', tip: 'Generate‚ÜíFeedback‚ÜíRefine loop. ~20% avg improvement.' },
                    stepback: { name: 'Step-Back Prompting', citation: 'Google DeepMind 2023', tip: 'Abstract to high-level principles first. +27% on TimeQA.' },
                    analogical: { name: 'Analogical Prompting', citation: 'DeepMind + Stanford 2023', tip: 'Generate own relevant examples. +5% over 0-shot CoT.' },
                    rar: { name: 'Rephrase & Respond', citation: 'UCLA 2023', tip: 'Rephrase question before answering. Reduces ambiguity.' },
                },
                // Model-specific features (2025) - optional capabilities per AI model
                modelFeatures: {
                    title: 'Model Features',
                    subtitle: 'Optional model-specific capabilities',
                    none: 'No special features',
                    claude: {
                        extended_thinking: { name: 'Extended Thinking', desc: 'Deep reasoning mode for complex problems', promptTag: 'Enable extended thinking for deep analysis.' },
                        research: { name: 'Research (Web)', desc: 'Access real-time web information', promptTag: 'Use web search to find current information.' },
                        artifacts: { name: 'Artifacts', desc: 'Create interactive components', promptTag: 'Create an artifact for this output.' },
                        analysis: { name: 'Analysis Tool', desc: 'Execute code for data analysis', promptTag: 'Use the analysis tool to process data.' },
                    },
                    gpt: {
                        web_browsing: { name: 'Web Browsing', desc: 'Search the web for information', promptTag: 'Search the web for current information.' },
                        dalle: { name: 'DALL-E', desc: 'Generate images', promptTag: 'Generate an image using DALL-E.' },
                        code_interpreter: { name: 'Code Interpreter', desc: 'Execute Python code', promptTag: 'Use Code Interpreter to execute code.' },
                        canvas: { name: 'Canvas', desc: 'Collaborative editing mode', promptTag: 'Use Canvas for collaborative editing.' },
                        memory: { name: 'Memory', desc: 'Remember context across chats', promptTag: 'Remember this for future conversations.' },
                    },
                    gemini: {
                        google_search: { name: 'Google Search', desc: 'Real-time web search', promptTag: 'Search Google for current information.' },
                        code_execution: { name: 'Code Execution', desc: 'Run Python code', promptTag: 'Execute code to solve this problem.' },
                        deep_research: { name: 'Deep Research', desc: 'Comprehensive research mode', promptTag: 'Conduct deep research on this topic.' },
                    },
                    llama: {
                        code_llama: { name: 'Code Mode', desc: 'Optimized for coding tasks', promptTag: 'Focus on code generation and analysis.' },
                    },
                    mistral: {
                        code_mode: { name: 'Code Mode', desc: 'Optimized coding responses', promptTag: 'Optimize for code generation.' },
                        function_calling: { name: 'Function Calling', desc: 'Structured tool use', promptTag: 'Use function calling for structured output.' },
                    },
                    cohere: {
                        rag: { name: 'RAG Mode', desc: 'Retrieval-augmented generation', promptTag: 'Use retrieval-augmented generation.' },
                        web_search: { name: 'Web Search', desc: 'Search for information', promptTag: 'Search the web for relevant information.' },
                    },
                    grok: {
                        realtime: { name: 'Real-time Data', desc: 'Access live X/Twitter data', promptTag: 'Use real-time data from X/Twitter.' },
                        think: { name: 'Think Mode', desc: 'Extended reasoning', promptTag: 'Enable deep thinking mode.' },
                        deepsearch: { name: 'DeepSearch', desc: 'Comprehensive web search', promptTag: 'Use DeepSearch for comprehensive results.' },
                    },
                    deepseek: {
                        deep_think: { name: 'Deep Think (R1)', desc: 'Advanced reasoning mode', promptTag: 'Enable Deep Think mode for complex reasoning.' },
                        code_mode: { name: 'Code Mode', desc: 'Optimized for programming', promptTag: 'Focus on code generation and analysis.' },
                        search: { name: 'Web Search', desc: 'Search for information', promptTag: 'Search the web for current information.' },
                    },
                    general: {},
                },
                database: {
                    title: 'Saved Prompts',
                    save: 'Save',
                    load: 'Load',
                    delete: 'Delete',
                    duplicate: 'Duplicate',
                    edit: 'Edit',
                    export: 'Export JSON',
                    import: 'Import JSON',
                    noPrompts: 'No saved prompts yet',
                    promptName: 'Prompt name',
                    saveAs: 'Save prompt as...',
                    confirmDelete: 'Delete this prompt?',
                    imported: 'Prompts imported successfully!',
                    exportedCount: 'prompts exported',
                    savedCount: 'prompts saved',
                },
                share: {
                    title: 'Share Prompt',
                    subtitle: 'Share your prompt settings via code',
                    codeLabel: 'Share Code',
                    wordsLabel: 'Word Phrase (alternative)',
                    urlLabel: 'Direct Link',
                    copyCode: 'Copy Code',
                    copyWords: 'Copy Words',
                    copyUrl: 'Copy Link',
                    importTitle: 'Import from Code',
                    importPlaceholder: 'Paste share code here...',
                    importBtn: 'Load Prompt',
                    importSuccess: 'Prompt loaded successfully!',
                    importError: 'Invalid share code',
                    generating: 'Generating...',
                    tip: 'Tip: The code contains all your settings. Share it via message or email!',
                },
                // Prompt verification feature - FREE, no API key required!
                // Uses Pollinations.ai - completely free, no registration needed
                verify: {
                    title: 'Verify Prompt',
                    button: 'Verify with AI',
                    buttonShort: 'Verify',
                    analyzing: 'AI is analyzing your prompt...',
                    analyzingHint: 'Using free Pollinations.ai',
                    result: 'AI Analysis',
                    close: 'Close',
                    retry: 'Retry',
                    noPrompt: 'Create a prompt first to verify it',
                    freeMode: 'üÜì Free Mode',
                    freeModeDesc: 'Works without registration!',
                    apiSettings: 'Settings (Optional)',
                    apiSettingsDesc: 'Optional settings',
                    apiKey: 'API Key (optional)',
                    apiKeyPlaceholder: 'Not required - works without key',
                    apiKeyHelp: 'No API key needed! This feature is completely free.',
                    hfLink: 'Pollinations.ai',
                    saveSettings: 'Save',
                    clearKey: 'Clear',
                    keySaved: 'Settings saved!',
                    keyCleared: 'Using free mode',
                    errorGeneric: 'Error analyzing prompt. Please try again.',
                    errorNetwork: 'Network error. Check your connection.',
                    errorRateLimit: 'Service temporarily unavailable. Please try again.',
                    understanding: 'How AI understands your prompt:',
                    poweredBy: 'Powered by Pollinations.ai üå∏',
                    prePrompt: `You are an expert prompt analyst. Analyze the following prompt and explain briefly:
1. **Task Understanding**: What task is being requested?
2. **Role/Persona**: What role should the AI take?
3. **Context**: What background information is provided?
4. **Constraints**: What requirements or limitations are specified?
5. **Expected Output**: What format/type of response is expected?

Be concise but clear. Use bullet points. Respond in the same language as the prompt.

Prompt to analyze:
`,
                },
                preview: 'Formatted Prompt',
                copy: 'Copy',
                copied: 'Copied!',
                placeholder: 'Fill in the fields to see your formatted prompt',
                chars: 'chars',
                optimizedFor: 'Optimized for',
                required: '*',
                newPrompt: 'New',
                footer: 'Methods based on: The Prompt Report (UMD, OpenAI, Stanford, 2025) ‚Ä¢ Wharton GenAI Labs ‚Ä¢ Google DeepMind ‚Ä¢ Princeton NLP',
                promptParts: {
                    youAre: 'You are', actAs: 'Act as', role: 'Role',
                    emotion: 'This task is very important to me. Your thorough and careful response will greatly help my work.',
                    context: 'Background/Context', task: 'Task',
                    cotInstructions: 'Think through this step-by-step:\n1. First, analyze the problem carefully\n2. Break it down into logical steps\n3. Show your reasoning for each step\n4. Then provide your final answer',
                    cotSimple: "Let's think through this step-by-step. Show your reasoning at each stage before reaching a conclusion.",
                    zeroshotTrigger: "Let's think step by step.",
                    zeroshotSimple: "Let's approach this step by step, thinking through each part carefully before reaching a conclusion.",
                    totExperts: "Imagine 3 different experts approaching this problem:\n- Expert 1: Takes a methodical, systematic approach\n- Expert 2: Looks for creative, unconventional solutions\n- Expert 3: Focuses on practical, efficient solutions\n\nEach expert shares one step of their thinking, then evaluates. If any approach seems wrong, abandon it and explore alternatives. Continue until reaching the best solution.",
                    totSimple: "Consider 3 different approaches to this problem. For each, take one step, evaluate if it's promising, and continue the best paths while abandoning dead ends.",
                    scVerify: 'Generate 3 independent solutions using different reasoning approaches. Then compare them and select the answer that appears most consistently across approaches, explaining why.',
                    scSimple: 'Solve this problem 3 different ways, then compare your answers and explain which is most likely correct and why.',
                    reactCycle: 'Follow this Thought-Action-Observation cycle:\n1. Thought: Reason about what you need to do next\n2. Action: Describe what action to take\n3. Observation: Note what you learned from the action\nRepeat until you have a complete solution.',
                    reactSimple: 'For each step, state your Thought (reasoning), Action (what to do), and Observation (what you learned). Repeat this cycle until solved.',
                    plansolveInstructions: "Let's first understand the problem, extract relevant variables and their corresponding numerals, and devise a plan. Then, let's carry out the plan, calculate intermediate variables (pay attention to correct numerical calculation and commonsense), solve the problem step by step, and show the answer.",
                    plansolveSimple: "First, understand and plan. Then execute step by step, showing calculations and reasoning at each stage.",
                    selfaskInstructions: "To answer this question, ask yourself follow-up questions and answer them:\n1. Are follow-up questions needed? If yes:\n2. Follow-up: [your question]\n3. Intermediate answer: [answer]\n4. Repeat until you can provide the final answer.",
                    selfaskSimple: "Break this down by asking yourself follow-up questions. Answer each one before moving to the next, then provide the final answer.",
                    palInstructions: "Solve this by writing Python code:\n1. Define the problem variables\n2. Write step-by-step calculations as code\n3. Use comments to explain your reasoning\n4. Print the final answer",
                    palSimple: "Write Python code to solve this problem. Use variables, calculations, and comments to show your reasoning.",
                    selfrefineInstructions: "Follow this iterative improvement process:\n1. GENERATE: Create your initial response\n2. FEEDBACK: Critique your response - what could be improved?\n3. REFINE: Create an improved version based on feedback\nRepeat the feedback-refine cycle until satisfied.",
                    selfrefineSimple: "Generate a response, then critique it and improve it. Repeat until you're satisfied with the quality.",
                    stepbackInstructions: "Before solving, step back and consider:\n1. What are the underlying principles or concepts relevant to this problem?\n2. What high-level approach or framework applies here?\n3. Now apply these principles to solve the specific problem.",
                    stepbackSimple: "First identify the key principles and concepts, then apply them to solve this specific problem.",
                    analogicalInstructions: "Before solving, recall similar problems:\n1. Think of 2-3 relevant problems you know how to solve\n2. Briefly describe each and its solution approach\n3. Apply the most relevant approach to the current problem",
                    analogicalSimple: "Think of similar problems you've solved before, then apply the same approach here.",
                    rarInstructions: "Rephrase and expand the question to ensure clarity, then respond to the rephrased version.",
                    rarSimple: "First rephrase this question more clearly, then answer the rephrased version.",
                    stepsFollow: 'Follow these steps', constraints: 'Requirements/Constraints',
                    examplesIntro: 'Here are examples of the expected input-output format:', examplesFollow: 'Follow these patterns for your response.',
                    fewshotIntro: 'Learn from these examples:', fewshotFollow: 'Apply the same pattern to the current task.',
                    outputFormat: 'Expected Output Format', expectations: 'Expected Outcome',
                },
                checklist: {
                    title: 'The X-Step Prompt Checklist',
                    subtitle: 'Essential elements for crafting effective AI prompts',
                    showColors: 'Show colors in output',
                    steps: [
                        { key: 'role', name: 'Role / Persona', desc: 'Define WHO the AI should be', example: '"You are an expert data scientist..."', color: 'purple', icon: 'User' },
                        { key: 'context', name: 'Context', desc: 'Provide background information', example: '"We are building a fintech app for..."', color: 'blue', icon: 'Info' },
                        { key: 'task', name: 'Task', desc: 'Clearly state WHAT you want done', example: '"Write a function that validates..."', color: 'green', icon: 'Target' },
                        { key: 'constraints', name: 'Constraints', desc: 'Set limits and requirements', example: '"Keep it under 100 lines, use TypeScript..."', color: 'orange', icon: 'Lock' },
                        { key: 'format', name: 'Output Format', desc: 'Specify HOW you want the response', example: '"Return as JSON with fields: name, value..."', color: 'pink', icon: 'FileText' },
                        { key: 'examples', name: 'Examples', desc: 'Show input‚Üíoutput patterns', example: '"Input: 5 ‚Üí Output: 120 (factorial)"', color: 'yellow', icon: 'Lightbulb' },
                        { key: 'methods', name: 'Methods (optional)', desc: 'Add reasoning techniques (CoT, etc.)', example: '"Think step-by-step before answering..."', color: 'red', icon: 'Brain' },
                    ],
                    tip: 'Not all steps are required. Minimum: Task. Recommended: Role + Task + Context + Format.',
                    legend: 'Color Legend',
                }
            },
            cs: {
                title: 'AI Prompt Form√°tovaƒç',
                subtitle: 'Techniky promptingu podlo≈æen√© v√Ωzkumem ze studi√≠ 2025 ‚Ä¢ v2.0',
                version: 'v2.0',
                backToHub: 'Zpƒõt na Hub',
                searchLanguage: 'Hledat jazyk...',
                templates: {
                    general: { name: 'Obecn√Ω √∫kol', desc: 'Flexibiln√≠ form√°t pro jak√Ωkoli √∫kol', context: '' },
                    coding: { name: 'Pomoc s k√≥dem', desc: 'Ladƒõn√≠, psan√≠ nebo vysvƒõtlen√≠ k√≥du', context: 'Zamƒõ≈ô se na psan√≠ ƒçist√©ho, efektivn√≠ho a dob≈ôe zdokumentovan√©ho k√≥du. P≈ôidej koment√°≈ôe tam, kde to pom≈Ø≈æe.' },
                    creative: { name: 'Kreativn√≠ psan√≠', desc: 'P≈ô√≠bƒõhy, obsah, copywriting', context: 'Zamƒõ≈ô se na kreativitu, poutav√Ω p≈ô√≠bƒõh a ≈æiv√Ω jazyk. Buƒè origin√°ln√≠ a expresivn√≠.' },
                    analysis: { name: 'Anal√Ωza', desc: 'V√Ωzkum, porovn√°n√≠, hodnocen√≠', context: 'Poskytni d≈Økladnou anal√Ωzu s argumentac√≠ zalo≈æenou na d≈Økazech. Zva≈æ v√≠ce perspektiv a uveƒè zdroje, kde je to vhodn√©.' },
                    explanation: { name: 'Vysvƒõtlen√≠', desc: 'V√Ωuka nebo objasnƒõn√≠ koncept≈Ø', context: 'Vysvƒõtli jasnƒõ pro c√≠lov√© publikum. Pou≈æij analogie a p≈ô√≠klady, aby byly slo≈æit√© koncepty srozumiteln√©.' },
                    // Nov√© kategorie z v√Ωzkumu vyu≈æit√≠ 2025
                    email: { name: 'Profesion√°ln√≠ email', desc: 'Obchodn√≠ komunikace, osloven√≠', context: 'Pi≈° profesion√°ln√≠, jasnou a efektivn√≠ emailovou komunikaci. Zva≈æ t√≥n, strukturu a v√Ωzvu k akci.' },
                    academic: { name: 'Akademick√© psan√≠', desc: 'V√Ωzkumn√© pr√°ce, eseje, citace', context: 'Dodr≈æuj akademick√© standardy. Pou≈æ√≠vej spr√°vnou strukturu, citace a argumenty podlo≈æen√© d≈Økazy.' },
                    data: { name: 'Data a tabulky', desc: 'Excel vzorce, SQL, anal√Ωza dat', context: 'Zamƒõ≈ô se na p≈ôesnou pr√°ci s daty. Poskytni vzorce, dotazy nebo skripty s jasn√Ωmi vysvƒõtlen√≠mi.' },
                    marketing: { name: 'Marketing a SEO', desc: 'Reklamy, soci√°ln√≠ s√≠tƒõ, SEO obsah', context: 'Vytvo≈ô poutav√Ω obsah zamƒõ≈ôen√Ω na konverzi. Optimalizuj pro c√≠lov√© publikum a po≈æadavky platformy.' },
                    summarization: { name: 'Sumarizace', desc: 'Shrnut√≠ dokument≈Ø, kl√≠ƒçov√© body', context: 'Extrahuj kl√≠ƒçov√© informace jasnƒõ a struƒçnƒõ. Zachovej p≈ôesnost p≈ôi zkr√°cen√≠ d√©lky.' },
                    image_gen: { name: 'Generov√°n√≠ obr√°zk≈Ø', desc: 'DALL-E, Midjourney, Stable Diffusion', context: 'Vytvo≈ô detailn√≠ vizu√°ln√≠ popisy. Zahr≈à styl, n√°ladu, kompozici a specifick√© umƒõleck√© prvky.' },
                    translation: { name: 'P≈ôeklad', desc: 'Jazykov√Ω p≈ôeklad, lokalizace', context: 'P≈ôekl√°dej p≈ôesnƒõ se zachov√°n√≠m v√Ωznamu, t√≥nu a kulturn√≠ho kontextu.' },
                    business: { name: 'Obchodn√≠ dokumenty', desc: 'Reporty, n√°vrhy, prezentace', context: 'Vytvo≈ô profesion√°ln√≠ obchodn√≠ dokumenty s jasnou strukturou, daty podlo≈æen√Ωmi poznatky a akƒçn√≠mi doporuƒçen√≠mi.' },
                    customer_service: { name: 'Z√°kaznick√° podpora', desc: 'Odpovƒõdi podpory, FAQ', context: 'Poskytni u≈æiteƒçn√©, empatick√© a na ≈ôe≈°en√≠ orientovan√© odpovƒõdi z√°kazn√≠k≈Øm.' },
                    productivity: { name: 'Produktivita', desc: 'Pl√°nov√°n√≠, organizace, c√≠le', context: 'Pomoz s osobn√≠ organizac√≠, stanoven√≠m c√≠l≈Ø a spr√°vou √∫kol≈Ø. Buƒè praktick√Ω a akƒçn√≠.' },
                },
                fields: {
                    role: { label: 'Role / Persona', placeholder: 'nap≈ô. expert na technick√© psan√≠' },
                    task: { label: '√ökol', placeholder: 'nap≈ô. Napi≈° dokumentaci pro REST API endpoint' },
                    context: { label: 'Kontext / Pozad√≠', placeholder: 'nap≈ô. Toto je pro fintech startup' },
                    constraints: { label: 'Omezen√≠ / Po≈æadavky', placeholder: 'nap≈ô. Buƒè struƒçn√Ω, pou≈æij p≈ô√≠klady' },
                    steps: { label: 'Kroky k n√°sledov√°n√≠', placeholder: 'Zadej ka≈æd√Ω krok na nov√Ω ≈ô√°dek...' },
                    outputFormat: { label: 'Form√°t v√Ωstupu', placeholder: 'nap≈ô. Markdown s nadpisy a bloky k√≥du' },
                    expectations: { label: 'Oƒçek√°v√°n√≠ / C√≠l', placeholder: 'nap≈ô. Jasn√°, pou≈æiteln√° dokumentace' },
                    examples: { label: 'P≈ô√≠klady (voliteln√©)', placeholder: 'nap≈ô. Vstup: ... ‚Üí V√Ωstup: ...' },
                    fewshot: { label: 'Few-Shot p≈ô√≠klady (Vstup ‚Üí V√Ωstup)', placeholder: 'Vstup: ... ‚Üí V√Ωstup: ...' },
                },
                // Enhanced examples section translations (Czech)
                examplesSection: {
                    title: 'P≈ô√≠klady s form√°tem souboru',
                    fileType: 'Form√°t dat',
                    fileTypes: {
                        none: { name: 'Prost√Ω text', desc: 'Jednoduch√© textov√© p≈ô√≠klady' },
                        excel: { name: 'Excel/Tabulka', desc: 'Struktura ≈ô√°dk≈Ø a sloupc≈Ø' },
                        csv: { name: 'CSV', desc: 'Hodnoty oddƒõlen√© ƒç√°rkou' },
                        json: { name: 'JSON', desc: 'P√°ry kl√≠ƒç-hodnota' },
                        table: { name: 'Tabulka', desc: 'Strukturovan√Ω tabulkov√Ω form√°t' },
                    },
                    params: {
                        columnSeparator: 'Oddƒõlovaƒç sloupc≈Ø',
                        rowDescription: 'Struktura ≈ô√°dku',
                        headers: 'Z√°hlav√≠ sloupc≈Ø',
                        headersPlaceholder: 'nap≈ô. Jm√©no | Vƒõk | Mƒõsto',
                    },
                    addRow: 'P≈ôidat ≈ô√°dek (+)',
                    removeRow: 'Odebrat',
                    rowPlaceholder: 'Data p≈ô√≠kladu ≈ô√°dku...',
                    rowSeparatorHint: 'Pou≈æij tlaƒç√≠tko (+) pro p≈ôid√°n√≠ oddƒõlen√Ωch ≈ô√°dk≈Ø p≈ô√≠klad≈Ø',
                    structurePreview: 'N√°hled struktury',
                },
                methods: {
                    title: 'V√Ωzkumem podlo≈æen√© metody',
                    active: 'aktivn√≠ metod(y)',
                    recommended: 'Doporuƒçen√©',
                    showAll: 'Zobrazit v≈°echny',
                    hideOthers: 'Skr√Ωt ostatn√≠',
                    bestFor: 'Nejlep≈°√≠ pro tuto kategorii',
                    cot: { name: 'Chain-of-Thought', citation: 'Google Brain 2022', tip: 'Nejlep≈°√≠ pro matematiku, logiku, v√≠cekrokov√© probl√©my. +39pp na GSM8K.' },
                    zeroshot: { name: 'Zero-Shot CoT', citation: 'U.Tokyo + Google 2022', tip: '"Pojƒème p≈ôem√Ω≈°let krok za krokem" - bez p≈ô√≠klad≈Ø. +61pp na MultiArith.' },
                    fewshot: { name: 'Few-Shot Learning', citation: 'OpenAI 2020', tip: 'Uƒçen√≠ z 1-10 p≈ô√≠klad≈Ø. M≈Ø≈æe zlep≈°it p≈ôesnost 0%‚Üí90%.' },
                    tot: { name: 'Tree of Thoughts', citation: 'Princeton + DeepMind 2023', tip: 'Prozkoumej v√≠ce cest s n√°vratem. 4%‚Üí74% na Game of 24.' },
                    selfconsistency: { name: 'Self-Consistency', citation: 'Google Research 2022', tip: 'V√≠ce cest uva≈æov√°n√≠, vƒõt≈°inov√© hlasov√°n√≠. +17.9% na GSM8K.' },
                    react: { name: 'ReAct', citation: 'Princeton + Google 2022', tip: 'Cyklus My≈°lenka-Akce-Pozorov√°n√≠ pro pou≈æit√≠ n√°stroj≈Ø. +34% na ALFWorld.' },
                    risen: { name: 'RISEN Framework', citation: 'Kyle Balmer', tip: 'Struktura Role-Instrukce-Kroky-C√≠l-Z√∫≈æen√≠.' },
                    emotion: { name: 'EmotionPrompt', citation: 'Microsoft + CAS 2023', tip: 'Emoƒçn√≠ stimuly zvy≈°uj√≠ v√Ωkon. +8% instrukce, +115% BIG-Bench.' },
                    plansolve: { name: 'Plan-and-Solve', citation: 'SUTD 2023', tip: 'Zero-shot pl√°nov√°n√≠ p≈ôed ≈ôe≈°en√≠m. +5% oproti Zero-Shot-CoT.' },
                    selfask: { name: 'Self-Ask', citation: 'UW + Meta AI 2022', tip: 'Ptej se na dopl≈àuj√≠c√≠ ot√°zky a≈æ do vy≈ôe≈°en√≠. Skvƒõl√© pro multi-hop QA.' },
                    pal: { name: 'PAL (Program-Aided)', citation: 'CMU 2022', tip: 'Generuj k√≥d pro v√Ωpoƒçty. +40% na GSM-Hard.' },
                    selfrefine: { name: 'Self-Refine', citation: 'CMU + AI2 + Google 2023', tip: 'Smyƒçka Generuj‚ÜíZpƒõtn√° vazba‚ÜíVylep≈°i. ~20% pr≈Ømƒõrn√© zlep≈°en√≠.' },
                    stepback: { name: 'Step-Back Prompting', citation: 'Google DeepMind 2023', tip: 'Nejprve abstrahuj na vysoko√∫rov≈àov√© principy. +27% na TimeQA.' },
                    analogical: { name: 'Analogical Prompting', citation: 'DeepMind + Stanford 2023', tip: 'Generuj vlastn√≠ relevantn√≠ p≈ô√≠klady. +5% oproti 0-shot CoT.' },
                    rar: { name: 'Rephrase & Respond', citation: 'UCLA 2023', tip: 'P≈ôeformuluj ot√°zku p≈ôed odpovƒõd√≠. Sni≈æuje nejednoznaƒçnost.' },
                },
                database: {
                    title: 'Ulo≈æen√© prompty',
                    save: 'Ulo≈æit',
                    load: 'Naƒç√≠st',
                    delete: 'Smazat',
                    duplicate: 'Duplikovat',
                    edit: 'Upravit',
                    export: 'Export JSON',
                    import: 'Import JSON',
                    noPrompts: 'Zat√≠m ≈æ√°dn√© ulo≈æen√© prompty',
                    promptName: 'N√°zev promptu',
                    saveAs: 'Ulo≈æit prompt jako...',
                    confirmDelete: 'Smazat tento prompt?',
                    imported: 'Prompty √∫spƒõ≈°nƒõ importov√°ny!',
                    exportedCount: 'prompt≈Ø exportov√°no',
                    savedCount: 'prompt≈Ø ulo≈æeno',
                },
                share: {
                    title: 'Sd√≠let prompt',
                    subtitle: 'Sd√≠lej nastaven√≠ promptu pomoc√≠ k√≥du',
                    codeLabel: 'Sd√≠lec√≠ k√≥d',
                    wordsLabel: 'Slovn√≠ fr√°ze (alternativa)',
                    urlLabel: 'P≈ô√≠m√Ω odkaz',
                    copyCode: 'Kop√≠rovat k√≥d',
                    copyWords: 'Kop√≠rovat slova',
                    copyUrl: 'Kop√≠rovat odkaz',
                    importTitle: 'Import z k√≥du',
                    importPlaceholder: 'Vlo≈æ sd√≠lec√≠ k√≥d zde...',
                    importBtn: 'Naƒç√≠st prompt',
                    importSuccess: 'Prompt √∫spƒõ≈°nƒõ naƒçten!',
                    importError: 'Neplatn√Ω sd√≠lec√≠ k√≥d',
                    generating: 'Generuji...',
                    tip: 'Tip: K√≥d obsahuje v≈°echna tv√° nastaven√≠. Sd√≠lej ho p≈ôes zpr√°vu nebo email!',
                },
                // Funkce verifikace promptu - ZDARMA, bez API kl√≠ƒçe!
                // Pou≈æ√≠v√° Pollinations.ai - kompletnƒõ zdarma, bez registrace
                verify: {
                    title: 'Ovƒõ≈ôit prompt',
                    button: 'Ovƒõ≈ôit pomoc√≠ AI',
                    buttonShort: 'Ovƒõ≈ôit',
                    analyzing: 'AI analyzuje tv≈Øj prompt...',
                    analyzingHint: 'Pou≈æ√≠v√°m bezplatn√© Pollinations.ai',
                    result: 'AI Anal√Ωza',
                    close: 'Zav≈ô√≠t',
                    retry: 'Zkusit znovu',
                    noPrompt: 'Nejprve vytvo≈ô prompt k ovƒõ≈ôen√≠',
                    freeMode: 'üÜì Bezplatn√Ω re≈æim',
                    freeModeDesc: 'Funguje bez registrace!',
                    apiSettings: 'Nastaven√≠ (voliteln√©)',
                    apiSettingsDesc: 'Voliteln√° nastaven√≠',
                    apiKey: 'API kl√≠ƒç (voliteln√Ω)',
                    apiKeyPlaceholder: 'Nen√≠ pot≈ôeba - funguje bez kl√≠ƒçe',
                    apiKeyHelp: 'API kl√≠ƒç nen√≠ pot≈ôeba! Tato funkce je zcela zdarma.',
                    hfLink: 'Pollinations.ai',
                    saveSettings: 'Ulo≈æit',
                    clearKey: 'Smazat',
                    keySaved: 'Nastaven√≠ ulo≈æeno!',
                    keyCleared: 'Pou≈æ√≠v√°m bezplatn√Ω re≈æim',
                    errorGeneric: 'Chyba p≈ôi anal√Ωze promptu. Zkus to znovu.',
                    errorNetwork: 'Chyba s√≠tƒõ. Zkontroluj p≈ôipojen√≠.',
                    errorRateLimit: 'Slu≈æba je doƒçasnƒõ nedostupn√°. Zkus to znovu.',
                    understanding: 'Jak AI rozum√≠ tv√©mu promptu:',
                    poweredBy: 'Poh√°nƒõno Pollinations.ai üå∏',
                    prePrompt: `Jsi expertn√≠ analytik prompt≈Ø. Analyzuj n√°sleduj√≠c√≠ prompt a struƒçnƒõ vysvƒõtli:
1. **Pochopen√≠ √∫kolu**: Jak√Ω √∫kol je po≈æadov√°n?
2. **Role/Persona**: Jakou roli by mƒõla AI zaujmout?
3. **Kontext**: Jak√© informace o pozad√≠ jsou poskytnuty?
4. **Omezen√≠**: Jak√© po≈æadavky nebo limity jsou specifikov√°ny?
5. **Oƒçek√°van√Ω v√Ωstup**: Jak√Ω form√°t/typ odpovƒõdi se oƒçek√°v√°?

Buƒè struƒçn√Ω, ale jasn√Ω. Pou≈æij odr√°≈æky. Odpovƒõz ve stejn√©m jazyce jako prompt.

Prompt k anal√Ωze:
`,
                },
                preview: 'Form√°tovan√Ω prompt',
                copy: 'Kop√≠rovat',
                copied: 'Zkop√≠rov√°no!',
                placeholder: 'Vypl≈à pole pro zobrazen√≠ form√°tovan√©ho promptu',
                chars: 'znak≈Ø',
                optimizedFor: 'Optimalizov√°no pro',
                required: '*',
                newPrompt: 'Nov√Ω',
                footer: 'Metody zalo≈æeny na: The Prompt Report (UMD, OpenAI, Stanford, 2025) ‚Ä¢ Wharton GenAI Labs ‚Ä¢ Google DeepMind ‚Ä¢ Princeton NLP',
                promptParts: {
                    youAre: 'Jsi', actAs: 'Chovej se jako', role: 'Role',
                    emotion: 'Tento √∫kol je pro mƒõ velmi d≈Øle≈æit√Ω. Tv√° d≈Økladn√° a peƒçliv√° odpovƒõƒè mi velmi pom≈Ø≈æe v pr√°ci.',
                    context: 'Pozad√≠/Kontext', task: '√ökol',
                    cotInstructions: 'Promysli si to krok za krokem:\n1. Nejprve peƒçlivƒõ analyzuj probl√©m\n2. Rozlo≈æ ho na logick√© kroky\n3. Uka≈æ sv√© uva≈æov√°n√≠ pro ka≈æd√Ω krok\n4. Pak poskytni svou fin√°ln√≠ odpovƒõƒè',
                    cotSimple: "Pojƒème si to promyslet krok za krokem. Uka≈æ sv√© uva≈æov√°n√≠ v ka≈æd√© f√°zi p≈ôed dosa≈æen√≠m z√°vƒõru.",
                    zeroshotTrigger: "Pojƒème p≈ôem√Ω≈°let krok za krokem.",
                    zeroshotSimple: "Pojƒème k tomu p≈ôistoupit krok za krokem, peƒçlivƒõ promyslet ka≈ædou ƒç√°st p≈ôed dosa≈æen√≠m z√°vƒõru.",
                    totExperts: "P≈ôedstav si 3 r≈Øzn√© experty p≈ôistupuj√≠c√≠ k tomuto probl√©mu:\n- Expert 1: Pou≈æ√≠v√° metodick√Ω, systematick√Ω p≈ô√≠stup\n- Expert 2: Hled√° kreativn√≠, nekonvenƒçn√≠ ≈ôe≈°en√≠\n- Expert 3: Zamƒõ≈ôuje se na praktick√°, efektivn√≠ ≈ôe≈°en√≠\n\nKa≈æd√Ω expert sd√≠l√≠ jeden krok sv√©ho my≈°len√≠, pak hodnot√≠. Pokud se nƒõjak√Ω p≈ô√≠stup zd√° ≈°patn√Ω, opus≈• ho a prozkoumej alternativy. Pokraƒçuj a≈æ do nalezen√≠ nejlep≈°√≠ho ≈ôe≈°en√≠.",
                    totSimple: "Zva≈æ 3 r≈Øzn√© p≈ô√≠stupy k tomuto probl√©mu. Pro ka≈æd√Ω udƒõlej jeden krok, zhodno≈• jestli je slibn√Ω, a pokraƒçuj nejlep≈°√≠mi cestami zat√≠mco opou≈°t√≠≈° slep√© uliƒçky.",
                    scVerify: 'Vygeneruj 3 nez√°visl√° ≈ôe≈°en√≠ pomoc√≠ r≈Øzn√Ωch p≈ô√≠stup≈Ø uva≈æov√°n√≠. Pak je porovnej a vyber odpovƒõƒè, kter√° se objevuje nejƒçastƒõji nap≈ô√≠ƒç p≈ô√≠stupy, a vysvƒõtli proƒç.',
                    scSimple: 'Vy≈ôe≈° tento probl√©m 3 r≈Øzn√Ωmi zp≈Øsoby, pak porovnej sv√© odpovƒõdi a vysvƒõtli, kter√° je nejpravdƒõpodobnƒõji spr√°vn√° a proƒç.',
                    reactCycle: 'N√°sleduj tento cyklus My≈°lenka-Akce-Pozorov√°n√≠:\n1. My≈°lenka: Rozmysli si, co mus√≠≈° udƒõlat d√°l\n2. Akce: Popi≈°, jakou akci prov√©st\n3. Pozorov√°n√≠: Zaznamenej, co jsi se z akce nauƒçil\nOpakuj a≈æ do kompletn√≠ho ≈ôe≈°en√≠.',
                    reactSimple: 'Pro ka≈æd√Ω krok uveƒè svou My≈°lenku (uva≈æov√°n√≠), Akci (co udƒõlat) a Pozorov√°n√≠ (co ses nauƒçil). Opakuj tento cyklus a≈æ do vy≈ôe≈°en√≠.',
                    plansolveInstructions: "Nejprve pochopme probl√©m, extrahujme relevantn√≠ promƒõnn√© a jejich odpov√≠daj√≠c√≠ ƒç√≠seln√© hodnoty, a sestavme pl√°n. Pak proveƒème pl√°n, vypoƒç√≠tejme meziv√Ωsledky (d√°vej pozor na spr√°vn√© numerick√© v√Ωpoƒçty a zdrav√Ω rozum), ≈ôe≈°me probl√©m krok za krokem, a uka≈æme odpovƒõƒè.",
                    plansolveSimple: "Nejprve pochop a napl√°nuj. Pak proveƒè krok za krokem, ukazuj v√Ωpoƒçty a uva≈æov√°n√≠ v ka≈æd√© f√°zi.",
                    selfaskInstructions: "Pro zodpovƒõzen√≠ t√©to ot√°zky se ptej na dopl≈àuj√≠c√≠ ot√°zky a odpov√≠dej na nƒõ:\n1. Jsou pot≈ôeba dopl≈àuj√≠c√≠ ot√°zky? Pokud ano:\n2. Dopl≈àuj√≠c√≠ ot√°zka: [tv√° ot√°zka]\n3. Meziv√Ωsledn√° odpovƒõƒè: [odpovƒõƒè]\n4. Opakuj, dokud nem≈Ø≈æe≈° poskytnout fin√°ln√≠ odpovƒõƒè.",
                    selfaskSimple: "Rozlo≈æ to kladen√≠m dopl≈àuj√≠c√≠ch ot√°zek sobƒõ. Odpovƒõz na ka≈ædou p≈ôed p≈ôechodem na dal≈°√≠, pak poskytni fin√°ln√≠ odpovƒõƒè.",
                    palInstructions: "Vy≈ôe≈° to naps√°n√≠m Python k√≥du:\n1. Definuj promƒõnn√© probl√©mu\n2. Napi≈° v√Ωpoƒçty krok za krokem jako k√≥d\n3. Pou≈æij koment√°≈ôe k vysvƒõtlen√≠ sv√©ho uva≈æov√°n√≠\n4. Vypi≈° fin√°ln√≠ odpovƒõƒè",
                    palSimple: "Napi≈° Python k√≥d k vy≈ôe≈°en√≠ tohoto probl√©mu. Pou≈æij promƒõnn√©, v√Ωpoƒçty a koment√°≈ôe k uk√°z√°n√≠ sv√©ho uva≈æov√°n√≠.",
                    selfrefineInstructions: "N√°sleduj tento iterativn√≠ proces zlep≈°ov√°n√≠:\n1. GENERUJ: Vytvo≈ô svou poƒç√°teƒçn√≠ odpovƒõƒè\n2. ZPƒöTN√Å VAZBA: Zkritizuj svou odpovƒõƒè - co by se dalo zlep≈°it?\n3. VYLEP≈†I: Vytvo≈ô vylep≈°enou verzi na z√°kladƒõ zpƒõtn√© vazby\nOpakuj cyklus zpƒõtn√° vazba-vylep≈°en√≠ a≈æ do spokojenosti.",
                    selfrefineSimple: "Vygeneruj odpovƒõƒè, pak ji zkritizuj a vylep≈°i. Opakuj a≈æ bude≈° spokojen√Ω s kvalitou.",
                    stepbackInstructions: "P≈ôed ≈ôe≈°en√≠m ustup a zva≈æ:\n1. Jak√© jsou z√°kladn√≠ principy nebo koncepty relevantn√≠ pro tento probl√©m?\n2. Jak√Ω vysoko√∫rov≈àov√Ω p≈ô√≠stup nebo framework zde plat√≠?\n3. Nyn√≠ aplikuj tyto principy k vy≈ôe≈°en√≠ konkr√©tn√≠ho probl√©mu.",
                    stepbackSimple: "Nejprve identifikuj kl√≠ƒçov√© principy a koncepty, pak je aplikuj k vy≈ôe≈°en√≠ tohoto konkr√©tn√≠ho probl√©mu.",
                    analogicalInstructions: "P≈ôed ≈ôe≈°en√≠m si vzpome≈à na podobn√© probl√©my:\n1. Promysli 2-3 relevantn√≠ probl√©my, kter√© um√≠≈° vy≈ôe≈°it\n2. Struƒçnƒõ popi≈° ka≈æd√Ω a jeho p≈ô√≠stup k ≈ôe≈°en√≠\n3. Aplikuj nejrelevantnƒõj≈°√≠ p≈ô√≠stup na souƒçasn√Ω probl√©m",
                    analogicalSimple: "Vzpome≈à si na podobn√© probl√©my, kter√© jsi ≈ôe≈°il d≈ô√≠ve, pak aplikuj stejn√Ω p≈ô√≠stup zde.",
                    rarInstructions: "P≈ôeformuluj a roz≈°i≈ô ot√°zku pro zaji≈°tƒõn√≠ jasnosti, pak odpovƒõz na p≈ôeformulovanou verzi.",
                    rarSimple: "Nejprve p≈ôeformuluj tuto ot√°zku jasnƒõji, pak odpovƒõz na p≈ôeformulovanou verzi.",
                    stepsFollow: 'N√°sleduj tyto kroky', constraints: 'Po≈æadavky/Omezen√≠',
                    examplesIntro: 'Zde jsou p≈ô√≠klady oƒçek√°van√©ho form√°tu vstup-v√Ωstup:', examplesFollow: 'N√°sleduj tyto vzory pro svou odpovƒõƒè.',
                    fewshotIntro: 'Uƒç se z tƒõchto p≈ô√≠klad≈Ø:', fewshotFollow: 'Aplikuj stejn√Ω vzor na souƒçasn√Ω √∫kol.',
                    outputFormat: 'Oƒçek√°van√Ω form√°t v√Ωstupu', expectations: 'Oƒçek√°van√Ω v√Ωsledek',
                },
                // Funkce specifick√© pro modely (2025) - voliteln√© schopnosti pro ka≈æd√Ω AI model
                modelFeatures: {
                    title: 'Funkce modelu',
                    subtitle: 'Voliteln√© schopnosti specifick√© pro model',
                    none: '≈Ω√°dn√© speci√°ln√≠ funkce',
                    claude: {
                        extended_thinking: { name: 'Roz≈°√≠≈ôen√© my≈°len√≠', desc: 'Re≈æim hlubok√©ho uva≈æov√°n√≠ pro slo≈æit√© probl√©my', promptTag: 'Zapni roz≈°√≠≈ôen√© my≈°len√≠ pro hlubokou anal√Ωzu.' },
                        research: { name: 'V√Ωzkum (Web)', desc: 'P≈ô√≠stup k aktu√°ln√≠m informac√≠m z webu', promptTag: 'Pou≈æij webov√© vyhled√°v√°n√≠ pro aktu√°ln√≠ informace.' },
                        artifacts: { name: 'Artefakty', desc: 'Vytvo≈ôen√≠ interaktivn√≠ch komponent', promptTag: 'Vytvo≈ô artefakt pro tento v√Ωstup.' },
                        analysis: { name: 'Analytick√Ω n√°stroj', desc: 'Spou≈°tƒõn√≠ k√≥du pro anal√Ωzu dat', promptTag: 'Pou≈æij analytick√Ω n√°stroj pro zpracov√°n√≠ dat.' },
                    },
                    gpt: {
                        web_browsing: { name: 'Prohl√≠≈æen√≠ webu', desc: 'Vyhled√°v√°n√≠ informac√≠ na webu', promptTag: 'Vyhledej na webu aktu√°ln√≠ informace.' },
                        dalle: { name: 'DALL-E', desc: 'Generov√°n√≠ obr√°zk≈Ø', promptTag: 'Vygeneruj obr√°zek pomoc√≠ DALL-E.' },
                        code_interpreter: { name: 'Interpret k√≥du', desc: 'Spou≈°tƒõn√≠ Python k√≥du', promptTag: 'Pou≈æij Interpret k√≥du pro spu≈°tƒõn√≠ k√≥du.' },
                        canvas: { name: 'Pl√°tno', desc: 'Re≈æim spolupr√°ce na editaci', promptTag: 'Pou≈æij Pl√°tno pro spolupr√°ci na editaci.' },
                        memory: { name: 'Pamƒõ≈•', desc: 'Pamatov√°n√≠ kontextu mezi chaty', promptTag: 'Zapamatuj si toto pro budouc√≠ konverzace.' },
                    },
                    gemini: {
                        google_search: { name: 'Google vyhled√°v√°n√≠', desc: 'Vyhled√°v√°n√≠ na webu v re√°ln√©m ƒçase', promptTag: 'Vyhledej na Googlu aktu√°ln√≠ informace.' },
                        code_execution: { name: 'Spou≈°tƒõn√≠ k√≥du', desc: 'Spou≈°tƒõn√≠ Python k√≥du', promptTag: 'Spus≈• k√≥d k vy≈ôe≈°en√≠ tohoto probl√©mu.' },
                        deep_research: { name: 'Hlubok√Ω v√Ωzkum', desc: 'Re≈æim komplexn√≠ho v√Ωzkumu', promptTag: 'Proveƒè hlubok√Ω v√Ωzkum na toto t√©ma.' },
                    },
                    llama: {
                        code_llama: { name: 'Re≈æim k√≥du', desc: 'Optimalizov√°no pro √∫lohy s k√≥dem', promptTag: 'Zamƒõ≈ô se na generov√°n√≠ a anal√Ωzu k√≥du.' },
                    },
                    mistral: {
                        code_mode: { name: 'Re≈æim k√≥du', desc: 'Optimalizovan√© odpovƒõdi s k√≥dem', promptTag: 'Optimalizuj pro generov√°n√≠ k√≥du.' },
                        function_calling: { name: 'Vol√°n√≠ funkc√≠', desc: 'Strukturovan√© pou≈æit√≠ n√°stroj≈Ø', promptTag: 'Pou≈æij vol√°n√≠ funkc√≠ pro strukturovan√Ω v√Ωstup.' },
                    },
                    cohere: {
                        rag: { name: 'RAG re≈æim', desc: 'Generov√°n√≠ s vyu≈æit√≠m vyhled√°v√°n√≠', promptTag: 'Pou≈æij generov√°n√≠ s vyu≈æit√≠m vyhled√°v√°n√≠.' },
                        web_search: { name: 'Webov√© vyhled√°v√°n√≠', desc: 'Vyhled√°v√°n√≠ informac√≠', promptTag: 'Vyhledej na webu relevantn√≠ informace.' },
                    },
                    grok: {
                        realtime: { name: 'Data v re√°ln√©m ƒçase', desc: 'P≈ô√≠stup k ≈æiv√Ωm dat≈Øm z X/Twitter', promptTag: 'Pou≈æij data v re√°ln√©m ƒçase z X/Twitter.' },
                        think: { name: 'Re≈æim my≈°len√≠', desc: 'Roz≈°√≠≈ôen√© uva≈æov√°n√≠', promptTag: 'Zapni re≈æim hlubok√©ho my≈°len√≠.' },
                        deepsearch: { name: 'DeepSearch', desc: 'Komplexn√≠ webov√© vyhled√°v√°n√≠', promptTag: 'Pou≈æij DeepSearch pro komplexn√≠ v√Ωsledky.' },
                    },
                    deepseek: {
                        deep_think: { name: 'Deep Think (R1)', desc: 'Pokroƒçil√Ω re≈æim uva≈æov√°n√≠', promptTag: 'Zapni re≈æim Deep Think pro slo≈æit√© uva≈æov√°n√≠.' },
                        code_mode: { name: 'Re≈æim k√≥du', desc: 'Optimalizov√°no pro programov√°n√≠', promptTag: 'Zamƒõ≈ô se na generov√°n√≠ a anal√Ωzu k√≥du.' },
                        search: { name: 'Webov√© vyhled√°v√°n√≠', desc: 'Vyhled√°v√°n√≠ informac√≠', promptTag: 'Vyhledej na webu aktu√°ln√≠ informace.' },
                    },
                    general: {},
                },
                checklist: {
                    title: 'X-krokov√Ω kontroln√≠ seznam promptu',
                    subtitle: 'Z√°kladn√≠ prvky pro tvorbu efektivn√≠ch AI prompt≈Ø',
                    showColors: 'Zobrazit barvy ve v√Ωstupu',
                    steps: [
                        { key: 'role', name: 'Role / Persona', desc: 'Definuj K√ùM m√° b√Ωt AI', example: '"Jsi expert na datovou vƒõdu..."', color: 'purple', icon: 'User' },
                        { key: 'context', name: 'Kontext', desc: 'Poskytni informace o pozad√≠', example: '"Vytv√°≈ô√≠me fintech aplikaci pro..."', color: 'blue', icon: 'Info' },
                        { key: 'task', name: '√ökol', desc: 'Jasnƒõ uveƒè CO chce≈° udƒõlat', example: '"Napi≈° funkci, kter√° validuje..."', color: 'green', icon: 'Target' },
                        { key: 'constraints', name: 'Omezen√≠', desc: 'Nastav limity a po≈æadavky', example: '"Dr≈æ to pod 100 ≈ô√°dk≈Ø, pou≈æij TypeScript..."', color: 'orange', icon: 'Lock' },
                        { key: 'format', name: 'Form√°t v√Ωstupu', desc: 'Specifikuj JAK chce≈° odpovƒõƒè', example: '"Vra≈• jako JSON s poli: name, value..."', color: 'pink', icon: 'FileText' },
                        { key: 'examples', name: 'P≈ô√≠klady', desc: 'Uka≈æ vzory vstup‚Üív√Ωstup', example: '"Vstup: 5 ‚Üí V√Ωstup: 120 (faktori√°l)"', color: 'yellow', icon: 'Lightbulb' },
                        { key: 'methods', name: 'Metody (voliteln√©)', desc: 'P≈ôidej techniky uva≈æov√°n√≠ (CoT, atd.)', example: '"P≈ôem√Ω≈°lej krok za krokem p≈ôed odpovƒõd√≠..."', color: 'red', icon: 'Brain' },
                    ],
                    tip: 'Ne v≈°echny kroky jsou povinn√©. Minimum: √ökol. Doporuƒçeno: Role + √ökol + Kontext + Form√°t.',
                    legend: 'Legenda barev',
                }
            }
        };

        // ==================== TRANSLATION HELPER ====================
        // Simple translation getter - uses manual translations only (no API)
        const getTranslations = (lang) => {
            return BASE_TRANSLATIONS[lang] || BASE_TRANSLATIONS.en;
        };

        // ==================== ICON COMPONENT ====================
        const Icon = ({ name, size = 20, className = "" }) => {
            const ref = useRef(null);
            useEffect(() => {
                if (ref.current && lucide[name]) {
                    ref.current.innerHTML = '';
                    const svg = lucide.createElement(lucide[name]);
                    svg.setAttribute('width', size);
                    svg.setAttribute('height', size);
                    ref.current.appendChild(svg);
                }
            }, [name, size]);
            return <span ref={ref} className={`inline-flex items-center justify-center ${className}`}></span>;
        };

        // ==================== AUTO-RESIZE TEXTAREA COMPONENT ====================
        // Textarea s automatick√Ωm roz≈°√≠≈ôen√≠m podle obsahu a manu√°ln√≠m resize
        const AutoResizeTextarea = ({ value, onChange, placeholder, className = "", minRows = 2, maxRows = 8, ...props }) => {
            const textareaRef = useRef(null);

            // Funkce pro automatick√© nastaven√≠ v√Ω≈°ky
            const adjustHeight = useCallback(() => {
                const textarea = textareaRef.current;
                if (!textarea) return;

                // Reset height to auto to get the correct scrollHeight
                textarea.style.height = 'auto';

                // Vypoƒç√≠tej min a max v√Ω≈°ku na z√°kladƒõ ≈ô√°dk≈Ø
                const lineHeight = parseInt(getComputedStyle(textarea).lineHeight) || 20;
                const paddingY = parseInt(getComputedStyle(textarea).paddingTop) + parseInt(getComputedStyle(textarea).paddingBottom) || 16;
                const minHeight = lineHeight * minRows + paddingY;
                const maxHeight = lineHeight * maxRows + paddingY;

                // Nastav novou v√Ω≈°ku
                const newHeight = Math.min(Math.max(textarea.scrollHeight, minHeight), maxHeight);
                textarea.style.height = `${newHeight}px`;
            }, [minRows, maxRows]);

            // Adjustovat v√Ω≈°ku p≈ôi zmƒõnƒõ hodnoty
            useEffect(() => {
                adjustHeight();
            }, [value, adjustHeight]);

            // Adjustovat v√Ω≈°ku p≈ôi mount
            useEffect(() => {
                adjustHeight();
                // Tak√© adjustovat p≈ôi resize okna
                window.addEventListener('resize', adjustHeight);
                return () => window.removeEventListener('resize', adjustHeight);
            }, [adjustHeight]);

            const handleChange = (e) => {
                onChange(e);
                // Mal√© zpo≈ædƒõn√≠ pro spr√°vn√© mƒõ≈ôen√≠
                setTimeout(adjustHeight, 0);
            };

            return (
                <div className="resize-handle-container">
                    <textarea
                        ref={textareaRef}
                        value={value}
                        onChange={handleChange}
                        placeholder={placeholder}
                        className={`auto-resize-textarea ${className}`}
                        {...props}
                    />
                </div>
            );
        };

        // ==================== LOCALSTORAGE DATABASE ====================
        const DB_KEY = 'ai_prompt_formatter_db';
        const loadDatabase = () => {
            try {
                const data = localStorage.getItem(DB_KEY);
                return data ? JSON.parse(data) : [];
            } catch { return []; }
        };
        const saveDatabase = (prompts) => {
            localStorage.setItem(DB_KEY, JSON.stringify(prompts));
        };

        // ==================== SHARE CODE SYSTEM ====================
        // Generate share code from prompt data (using LZ-String URI encoding)
        const ALL_METHODS = ['cot', 'zeroshot', 'fewshot', 'tot', 'selfconsistency', 'react', 'risen', 'emotion', 'plansolve', 'selfask', 'pal', 'selfrefine', 'stepback', 'analogical', 'rar'];
        // Template and target indices for share code encoding
        const ALL_TEMPLATES = ['general', 'coding', 'creative', 'analysis', 'explanation', 'email', 'academic', 'data', 'marketing', 'summarization', 'image_gen', 'translation', 'business', 'customer_service', 'productivity'];
        const ALL_TARGETS = ['claude', 'gpt', 'gemini', 'llama', 'mistral', 'cohere', 'general'];

        const generateShareCode = (promptData) => {
            try {
                // Get all language codes from AVAILABLE_LANGUAGES
                const langs = AVAILABLE_LANGUAGES.map(l => l.code);
                const minimal = {
                    t: ALL_TEMPLATES.indexOf(promptData.template),
                    a: ALL_TARGETS.indexOf(promptData.target),
                    m: promptData.selectedMethods.map(m => ALL_METHODS.indexOf(m)).filter(i => i >= 0),
                    l: langs.indexOf(promptData.lang),
                    f: promptData.fields,
                    // Enhanced examples data
                    eft: ['none', 'excel', 'csv', 'json', 'table'].indexOf(promptData.exampleFileType || 'none'),
                    eh: promptData.exampleHeaders || '',
                    er: promptData.exampleRows || [{ id: 1, content: '' }]
                };
                const json = JSON.stringify(minimal);
                return LZString.compressToEncodedURIComponent(json);
            } catch (e) {
                return null;
            }
        };

        // Decode share code to prompt data
        const decodeShareCode = (code) => {
            try {
                const cleanCode = code.trim().replace(/\s+/g, '');
                const json = LZString.decompressFromEncodedURIComponent(cleanCode);
                if (!json) return null;

                const minimal = JSON.parse(json);
                const fileTypes = ['none', 'excel', 'csv', 'json', 'table'];
                // Get all language codes from AVAILABLE_LANGUAGES
                const langs = AVAILABLE_LANGUAGES.map(l => l.code);

                return {
                    template: ALL_TEMPLATES[minimal.t] || 'general',
                    target: ALL_TARGETS[minimal.a] || 'claude',
                    selectedMethods: (minimal.m || []).map(i => ALL_METHODS[i]).filter(Boolean),
                    lang: langs[minimal.l] || 'en',
                    fields: minimal.f || { role: '', task: '', context: '', constraints: '', outputFormat: '', examples: '' },
                    // Enhanced examples data
                    exampleFileType: fileTypes[minimal.eft] || 'none',
                    exampleHeaders: minimal.eh || '',
                    exampleRows: minimal.er || [{ id: 1, content: '' }]
                };
            } catch (e) {
                return null;
            }
        };

        // Get shareable URL
        const getShareURL = (code) => {
            const url = new URL(window.location.href);
            url.searchParams.set('share', code);
            return url.toString();
        };

        // Check URL for share code on load
        const getShareCodeFromURL = () => {
            const params = new URLSearchParams(window.location.search);
            return params.get('share');
        };

        // ==================== TEMPLATE ICONS ====================
        // Extended with 10 new categories based on 2024-2025 AI usage research
        const templateIcons = {
            general: 'FileText',
            coding: 'Code',
            creative: 'Pencil',
            analysis: 'Lightbulb',
            explanation: 'MessageSquare',
            // New categories from usage research (2025)
            email: 'Mail',              // Professional Email & Communication - 5.5%+ usage
            academic: 'GraduationCap',  // Academic & Research Writing - 2nd largest use case
            data: 'Table',              // Data & Spreadsheet Tasks - 55% efficiency gains
            marketing: 'Megaphone',     // Marketing & SEO Content - 77% industry adoption
            summarization: 'FileSearch', // Document Summarization
            image_gen: 'Image',         // Image Generation Prompts - 2%‚Üí7% growth
            translation: 'Languages',   // Translation & Language - 44% business interest
            business: 'Briefcase',      // Business Documents & Reports
            customer_service: 'Headphones', // Customer Service Responses - 56% adoption
            productivity: 'ListTodo'    // Personal Productivity & Planning - 70% non-work usage
        };

        // ==================== METHOD-CATEGORY MAPPING ====================
        // Defines which methods are recommended for each prompt category
        // Based on research: EmotionPrompt works everywhere, PAL is best for coding
        const METHOD_CATEGORIES = {
            general: ['emotion', 'fewshot', 'risen', 'rar', 'zeroshot', 'cot'],
            coding: ['emotion', 'pal', 'cot', 'fewshot', 'zeroshot', 'tot', 'selfconsistency', 'react', 'plansolve', 'selfrefine'],
            creative: ['emotion', 'fewshot', 'analogical', 'selfrefine', 'rar'],
            analysis: ['emotion', 'fewshot', 'cot', 'zeroshot', 'tot', 'selfconsistency', 'react', 'plansolve', 'selfask', 'stepback'],
            explanation: ['emotion', 'fewshot', 'zeroshot', 'selfask', 'stepback', 'analogical', 'rar'],
            // New categories from 2025 research
            email: ['emotion', 'fewshot', 'rar', 'risen'],
            academic: ['emotion', 'fewshot', 'cot', 'selfask', 'stepback', 'selfrefine'],
            data: ['emotion', 'pal', 'cot', 'fewshot', 'plansolve'],
            marketing: ['emotion', 'fewshot', 'analogical', 'selfrefine', 'rar'],
            summarization: ['emotion', 'cot', 'zeroshot', 'stepback'],
            image_gen: ['fewshot', 'analogical', 'rar'],
            translation: ['emotion', 'fewshot', 'rar', 'selfrefine'],
            business: ['emotion', 'fewshot', 'risen', 'cot', 'plansolve'],
            customer_service: ['emotion', 'fewshot', 'rar', 'risen'],
            productivity: ['emotion', 'plansolve', 'risen', 'zeroshot']
        };
        const methodIcons = {
            cot: 'Brain',
            zeroshot: 'Sparkles',
            fewshot: 'Zap',
            tot: 'TreeDeciduous',
            selfconsistency: 'RefreshCw',
            react: 'GitBranch',
            risen: 'Target',
            emotion: 'Heart',
            plansolve: 'ClipboardList',
            selfask: 'HelpCircle',
            pal: 'Code2',
            selfrefine: 'RotateCw',
            stepback: 'ArrowLeftCircle',
            analogical: 'GitCompare',
            rar: 'MessageCircle'
        };

        // ==================== MAIN APP ====================
        const App = () => {
            const [lang, setLangState] = useState(() => localStorage.getItem('ai-prompt-lang') || 'en');
            const [template, setTemplate] = useState('general');
            const [target, setTarget] = useState('claude');
            const [copied, setCopied] = useState(false);
            const [showTemplates, setShowTemplates] = useState(false);
            const [selectedMethods, setSelectedMethods] = useState([]);
            const [showMethodInfo, setShowMethodInfo] = useState(null);
            const [showLangDropdown, setShowLangDropdown] = useState(false);
            const [showDatabase, setShowDatabase] = useState(false);
            const [savedPrompts, setSavedPrompts] = useState([]);
            const [saveModalOpen, setSaveModalOpen] = useState(false);
            const [promptName, setPromptName] = useState('');
            const [editingId, setEditingId] = useState(null);
            const [notification, setNotification] = useState('');
            const [showShareModal, setShowShareModal] = useState(false);
            const [showImportModal, setShowImportModal] = useState(false);
            const [shareData, setShareData] = useState(null);
            const [importCode, setImportCode] = useState('');
            const [showColors, setShowColors] = useState(true);
            const [showAllMethods, setShowAllMethods] = useState(false);

            // Model-specific features state - tracks which optional features are enabled for each model
            const [selectedFeatures, setSelectedFeatures] = useState({});

            // Verification feature states
            const [showVerifyModal, setShowVerifyModal] = useState(false);
            const [showApiSettingsModal, setShowApiSettingsModal] = useState(false);
            const [verifyResult, setVerifyResult] = useState('');
            const [verifyLoading, setVerifyLoading] = useState(false);
            const [verifyError, setVerifyError] = useState('');
            const [verifyStatus, setVerifyStatus] = useState(''); // Current status message
            const [verifyElapsed, setVerifyElapsed] = useState(0); // Elapsed time in seconds
            const [apiProvider, setApiProvider] = useState(() => localStorage.getItem('ai-prompt-api-provider') || 'gemini');
            const [apiKey, setApiKey] = useState(() => localStorage.getItem('ai-prompt-api-key') || '');
            const [tempApiKey, setTempApiKey] = useState('');

            const [fields, setFields] = useState({
                role: '', task: '', context: '', constraints: '', outputFormat: '', examples: '',
            });

            // Enhanced examples state - supports structured data formats and multiple rows
            const [exampleFileType, setExampleFileType] = useState('none'); // none, excel, csv, json, table
            const [exampleHeaders, setExampleHeaders] = useState(''); // Column headers for structured formats
            const [exampleRows, setExampleRows] = useState([{ id: 1, content: '' }]); // Dynamic rows with (+) separator

            // Get translations for current language (direct lookup, no API)
            const t = getTranslations(lang);
            const selectedLang = AVAILABLE_LANGUAGES.find(l => l.code === lang);

            // Language change handler (simple, synchronous)
            const setLang = useCallback((newLang) => {
                setShowLangDropdown(false);
                setLangState(newLang);
                localStorage.setItem('ai-prompt-lang', newLang);
            }, []);

            // Initialize language on mount
            useEffect(() => {
                const initLang = localStorage.getItem('ai-prompt-lang') || 'en';
                setLang(initLang);
            }, []);

            // Load database on mount
            useEffect(() => {
                setSavedPrompts(loadDatabase());
            }, []);

            // Save language
            useEffect(() => {
                localStorage.setItem('ai-prompt-lang', lang);
            }, [lang]);

            const showNotification = (msg) => {
                setNotification(msg);
                setTimeout(() => setNotification(''), 3000);
            };

            const updateField = (key, value) => setFields(prev => ({ ...prev, [key]: value }));
            const toggleMethod = (methodId) => setSelectedMethods(prev =>
                prev.includes(methodId) ? prev.filter(m => m !== methodId) : [...prev, methodId]
            );

            // Toggle model-specific features
            const toggleFeature = (featureId) => {
                setSelectedFeatures(prev => {
                    const currentFeatures = prev[target] || [];
                    const newFeatures = currentFeatures.includes(featureId)
                        ? currentFeatures.filter(f => f !== featureId)
                        : [...currentFeatures, featureId];
                    return { ...prev, [target]: newFeatures };
                });
            };

            // Get features for current target model
            const currentModelFeatures = selectedFeatures[target] || [];

            // Helper functions for dynamic example rows
            const addExampleRow = () => {
                setExampleRows(prev => [...prev, { id: Date.now(), content: '' }]);
            };
            const removeExampleRow = (id) => {
                if (exampleRows.length > 1) {
                    setExampleRows(prev => prev.filter(row => row.id !== id));
                }
            };
            const updateExampleRow = (id, content) => {
                setExampleRows(prev => prev.map(row => row.id === id ? { ...row, content } : row));
            };

            // Generate formatted examples based on file type and rows
            // Uses prompt engineering best practices (2025): clear structure, semantic separators
            const generateFormattedExamples = useMemo(() => {
                const hasContent = exampleRows.some(r => r.content.trim());
                if (!hasContent && !fields.examples) return '';

                // If using plain text (none), just use the original examples field
                if (exampleFileType === 'none') {
                    // If we have structured rows, join them with clear separators
                    if (exampleRows.some(r => r.content.trim())) {
                        return exampleRows
                            .filter(r => r.content.trim())
                            .map((r, i) => `[Example ${i + 1}]\n${r.content}`)
                            .join('\n\n---\n\n'); // Clear visual separator that AI understands
                    }
                    return fields.examples;
                }

                // Build structured format based on file type
                const rows = exampleRows.filter(r => r.content.trim());
                const headers = exampleHeaders.trim();

                let formattedOutput = '';

                switch (exampleFileType) {
                    case 'excel':
                    case 'table':
                        // Use ASCII table format for better AI comprehension
                        if (headers) {
                            const cols = headers.split('|').map(h => h.trim());
                            const colWidth = Math.max(15, ...cols.map(c => c.length + 2));
                            const separator = '+' + cols.map(() => '-'.repeat(colWidth)).join('+') + '+';

                            formattedOutput = `Data structure: Table with ${cols.length} columns\n`;
                            formattedOutput += `Columns: ${cols.join(' | ')}\n\n`;
                            formattedOutput += separator + '\n';
                            formattedOutput += '|' + cols.map(c => ` ${c.padEnd(colWidth - 1)}`).join('|') + '|\n';
                            formattedOutput += separator + '\n';

                            rows.forEach((row, idx) => {
                                const values = row.content.split('|').map(v => v.trim());
                                formattedOutput += '|' + values.map((v, i) => ` ${(v || '').padEnd(colWidth - 1)}`).join('|') + '|\n';
                                if (idx < rows.length - 1) {
                                    formattedOutput += separator + '\n'; // Row separator
                                }
                            });
                            formattedOutput += separator;
                        } else {
                            formattedOutput = 'Data rows:\n';
                            rows.forEach((row, idx) => {
                                formattedOutput += `Row ${idx + 1}: ${row.content}\n`;
                                if (idx < rows.length - 1) {
                                    formattedOutput += '---\n'; // Visual row separator
                                }
                            });
                        }
                        break;

                    case 'csv':
                        formattedOutput = 'CSV format data:\n';
                        if (headers) {
                            formattedOutput += `Headers: ${headers.replace(/\|/g, ',')}\n`;
                        }
                        formattedOutput += 'Data:\n';
                        rows.forEach((row, idx) => {
                            formattedOutput += `${row.content.replace(/\|/g, ',')}\n`;
                            if (idx < rows.length - 1) {
                                formattedOutput += ''; // No extra separator for CSV
                            }
                        });
                        break;

                    case 'json':
                        formattedOutput = 'JSON structured data:\n```json\n[\n';
                        const jsonHeaders = headers ? headers.split('|').map(h => h.trim()) : [];
                        rows.forEach((row, idx) => {
                            const values = row.content.split('|').map(v => v.trim());
                            if (jsonHeaders.length > 0) {
                                const obj = {};
                                jsonHeaders.forEach((h, i) => {
                                    obj[h] = values[i] || '';
                                });
                                formattedOutput += '  ' + JSON.stringify(obj);
                            } else {
                                formattedOutput += `  "${row.content}"`;
                            }
                            formattedOutput += idx < rows.length - 1 ? ',\n' : '\n';
                        });
                        formattedOutput += ']\n```';
                        break;

                    default:
                        formattedOutput = rows.map(r => r.content).join('\n---\n');
                }

                return formattedOutput;
            }, [exampleFileType, exampleHeaders, exampleRows, fields.examples]);

            const selectedTemplate = t.templates[template];
            const TemplateIcon = templateIcons[template];

            // ==================== AI MODEL FORMATTERS ====================
            // Format helpers for different AI models based on 2025 research
            const formatters = {
                // Claude: XML tags, extended thinking support
                claude: {
                    wrap: (tag, content) => `<${tag}>\n${content}\n</${tag}>`,
                    role: (role, p) => `${p.youAre} ${role}.`,
                    section: (label, content) => `<${label.toLowerCase().replace(/\s+/g, '_')}>\n${content}\n</${label.toLowerCase().replace(/\s+/g, '_')}>`
                },
                // GPT: Markdown structure, literal instructions
                gpt: {
                    wrap: (tag, content) => `**${tag}:**\n${content}`,
                    role: (role, p) => `${p.actAs} ${role}.`,
                    section: (label, content) => `**${label}:**\n${content}`
                },
                // Gemini: XML or Markdown consistently, context first
                gemini: {
                    wrap: (tag, content) => `## ${tag}\n${content}`,
                    role: (role, p) => `# Role\nYou are ${role}.`,
                    section: (label, content) => `## ${label}\n${content}`
                },
                // Llama: Special tokens format
                llama: {
                    wrap: (tag, content) => `[${tag.toUpperCase()}]\n${content}\n[/${tag.toUpperCase()}]`,
                    role: (role, p) => `<|begin_of_text|><|start_header_id|>system<|end_header_id|>\nYou are ${role}.<|eot_id|>`,
                    section: (label, content) => `[${label.toUpperCase()}]\n${content}`
                },
                // Mistral: [INST]/[/INST] tokens
                mistral: {
                    wrap: (tag, content) => `[INST] ${tag}: ${content} [/INST]`,
                    role: (role, p) => `[INST] You are ${role}. [/INST]`,
                    section: (label, content) => `${label}: ${content}`
                },
                // Cohere: Task & Context, Style Guide format
                cohere: {
                    wrap: (tag, content) => `## ${tag}\n${content}`,
                    role: (role, p) => `## Task & Context\nYou are ${role}.`,
                    section: (label, content) => `## ${label}\n${content}`
                },
                // General: Universal plain format
                general: {
                    wrap: (tag, content) => `${tag}:\n${content}`,
                    role: (role, p) => `${p.role}: ${role}`,
                    section: (label, content) => `${label}: ${content}`
                }
            };

            // Get formatter for current target
            const fmt = formatters[target] || formatters.general;

            // Generate formatted prompt with color sections
            const promptSections = useMemo(() => {
                const sections = [];
                const p = t.promptParts;
                const f = formatters[target] || formatters.general;

                // Role section
                if (fields.role) {
                    sections.push({ type: 'role', text: f.role(fields.role, p) });
                }

                // Emotion prompt (works well across all models)
                if (selectedMethods.includes('emotion')) {
                    sections.push({ type: 'methods', text: p.emotion });
                }

                // Context section - Gemini prefers context first
                if (fields.context) {
                    if (target === 'claude') {
                        sections.push({ type: 'context', text: `<context>\n${fields.context}\n</context>` });
                    } else if (target === 'cohere') {
                        sections.push({ type: 'context', text: `## Task & Context\n${fields.context}` });
                    } else if (target === 'gemini') {
                        sections.push({ type: 'context', text: `## Context\n${fields.context}\n\nBased on the information above:` });
                    } else if (target === 'llama') {
                        sections.push({ type: 'context', text: `<|start_header_id|>user<|end_header_id|>\nContext: ${fields.context}<|eot_id|>` });
                    } else if (target === 'mistral') {
                        sections.push({ type: 'context', text: `[INST] Context: ${fields.context} [/INST]` });
                    } else {
                        sections.push({ type: 'context', text: f.section(p.context, fields.context) });
                    }
                }

                // Task section
                if (fields.task) {
                    if (target === 'claude') {
                        sections.push({ type: 'task', text: `<task>\n${fields.task}\n</task>` });
                    } else if (target === 'llama') {
                        sections.push({ type: 'task', text: `<|start_header_id|>user<|end_header_id|>\n${fields.task}<|eot_id|><|start_header_id|>assistant<|end_header_id|>` });
                    } else if (target === 'mistral') {
                        sections.push({ type: 'task', text: `[INST] ${fields.task} [/INST]` });
                    } else if (target === 'cohere') {
                        sections.push({ type: 'task', text: `## Task & Context\n${fields.task}` });
                    } else {
                        sections.push({ type: 'task', text: f.section(p.task, fields.task) });
                    }
                }

                // Method-specific instructions
                const addMethodSection = (methodId, claudeTag, content, simpleContent) => {
                    if (selectedMethods.includes(methodId)) {
                        if (target === 'claude') {
                            sections.push({ type: 'methods', text: `<${claudeTag}>\n${content}\n</${claudeTag}>` });
                        } else if (target === 'cohere') {
                            sections.push({ type: 'methods', text: `## Style Guide\n${simpleContent}` });
                        } else {
                            sections.push({ type: 'methods', text: f.section(methodId.charAt(0).toUpperCase() + methodId.slice(1), simpleContent) });
                        }
                    }
                };

                addMethodSection('cot', 'instructions', p.cotInstructions, p.cotSimple);
                addMethodSection('zeroshot', 'thinking', p.zeroshotTrigger, p.zeroshotSimple);
                addMethodSection('tot', 'reasoning_approach', p.totExperts, p.totSimple);
                addMethodSection('selfconsistency', 'verification', p.scVerify, p.scSimple);
                addMethodSection('react', 'approach', p.reactCycle, p.reactSimple);
                addMethodSection('plansolve', 'planning', p.plansolveInstructions, p.plansolveSimple);
                addMethodSection('selfask', 'self_questioning', p.selfaskInstructions, p.selfaskSimple);
                addMethodSection('pal', 'code_solution', p.palInstructions, p.palSimple);
                addMethodSection('selfrefine', 'iterative_improvement', p.selfrefineInstructions, p.selfrefineSimple);
                addMethodSection('stepback', 'abstraction', p.stepbackInstructions, p.stepbackSimple);
                addMethodSection('analogical', 'analogical_reasoning', p.analogicalInstructions, p.analogicalSimple);
                addMethodSection('rar', 'clarification', p.rarInstructions, p.rarSimple);

                // Constraints/Steps
                if (fields.constraints) {
                    const steps = selectedMethods.includes('risen')
                        ? fields.constraints.split('\n').map((s, i) => `${i + 1}. ${s}`).join('\n')
                        : fields.constraints;
                    const label = selectedMethods.includes('risen') ? p.stepsFollow : p.constraints;

                    if (target === 'claude') {
                        const tag = selectedMethods.includes('risen') ? 'steps' : 'constraints';
                        sections.push({ type: 'constraints', text: `<${tag}>\n${selectedMethods.includes('risen') ? label + ':\n' : ''}${steps}\n</${tag}>` });
                    } else if (target === 'cohere') {
                        sections.push({ type: 'constraints', text: `## Style Guide\n${steps}` });
                    } else {
                        sections.push({ type: 'constraints', text: f.section(label, steps) });
                    }
                }

                // Examples section
                const examplesContent = generateFormattedExamples || fields.examples;
                if (examplesContent) {
                    const intro = selectedMethods.includes('fewshot') ? `${p.examplesIntro}\n\n${examplesContent}\n\n${p.examplesFollow}` : examplesContent;
                    if (target === 'claude') {
                        sections.push({ type: 'examples', text: `<examples>\n${intro}\n</examples>` });
                    } else {
                        sections.push({ type: 'examples', text: f.section('Examples', intro) });
                    }
                }

                // Output format
                if (fields.outputFormat) {
                    const label = selectedMethods.includes('risen') ? p.expectations : p.outputFormat;
                    if (target === 'claude') {
                        const tag = selectedMethods.includes('risen') ? 'expectations' : 'output_format';
                        sections.push({ type: 'format', text: `<${tag}>\n${fields.outputFormat}\n</${tag}>` });
                    } else if (target === 'cohere') {
                        sections.push({ type: 'format', text: `## Style Guide\nOutput format: ${fields.outputFormat}` });
                    } else {
                        sections.push({ type: 'format', text: f.section(label, fields.outputFormat) });
                    }
                }

                // Template-specific context/guidance
                const templateContext = t.templates[template]?.context;
                if (templateContext) {
                    if (target === 'claude') {
                        sections.push({ type: 'template', text: `<approach>\n${templateContext}\n</approach>` });
                    } else {
                        sections.push({ type: 'template', text: f.section('Approach', templateContext) });
                    }
                }

                // Model-specific features (2025) - optional capabilities
                const activeFeatures = selectedFeatures[target] || [];
                if (activeFeatures.length > 0) {
                    const featureTranslations = t.modelFeatures?.[target] || {};
                    const featureInstructions = activeFeatures
                        .map(featureId => featureTranslations[featureId]?.promptTag)
                        .filter(Boolean);

                    if (featureInstructions.length > 0) {
                        const featuresText = featureInstructions.join('\n');
                        if (target === 'claude') {
                            sections.push({ type: 'features', text: `<model_capabilities>\n${featuresText}\n</model_capabilities>` });
                        } else if (target === 'gpt') {
                            sections.push({ type: 'features', text: `## Special Instructions\n${featuresText}` });
                        } else if (target === 'gemini') {
                            sections.push({ type: 'features', text: `## Model Features\n${featuresText}` });
                        } else if (target === 'grok') {
                            sections.push({ type: 'features', text: `## Grok Capabilities\n${featuresText}` });
                        } else if (target === 'deepseek') {
                            sections.push({ type: 'features', text: `## DeepSeek Features\n${featuresText}` });
                        } else {
                            sections.push({ type: 'features', text: f.section('Model Features', featuresText) });
                        }
                    }
                }

                return sections;
            }, [fields, target, selectedMethods, t, template, generateFormattedExamples, selectedFeatures]);

            // Plain text version for copying
            const formattedPrompt = useMemo(() => {
                return promptSections.map(s => s.text).join('\n\n').trim();
            }, [promptSections]);

            // ==================== VERIFICATION API FUNCTIONS ====================
            // Verify prompt using FREE Pollinations.ai API (no key required!)
            // Completely free, supports CORS, works immediately without registration
            const verifyPromptWithAI = async () => {
                if (!formattedPrompt) {
                    showNotification(t.verify?.noPrompt || 'Create a prompt first');
                    return;
                }

                // Status messages based on language
                const statusMessages = lang === 'cs' ? {
                    init: 'P≈ôipravuji po≈æadavek...',
                    connecting: 'P≈ôipojuji se k AI...',
                    sending: 'Odes√≠l√°m prompt...',
                    waiting: 'AI analyzuje prompt...',
                    processing: 'Zpracov√°v√°m odpovƒõƒè...',
                    done: 'Hotovo!'
                } : {
                    init: 'Preparing request...',
                    connecting: 'Connecting to AI...',
                    sending: 'Sending prompt...',
                    waiting: 'AI is analyzing...',
                    processing: 'Processing response...',
                    done: 'Done!'
                };

                setVerifyLoading(true);
                setVerifyError('');
                setVerifyResult('');
                setVerifyStatus(statusMessages.init);
                setVerifyElapsed(0);
                setShowVerifyModal(true);

                // Start elapsed time counter
                const startTime = Date.now();
                const timerInterval = setInterval(() => {
                    setVerifyElapsed(Math.floor((Date.now() - startTime) / 1000));
                }, 1000);

                const systemPrompt = t.verify?.systemPrompt || 'You are a helpful assistant that analyzes AI prompts. Provide a brief, structured analysis of the prompt quality, clarity, and suggestions for improvement.';
                const userPrompt = (t.verify?.prePrompt || 'Analyze this prompt:\n\n') + formattedPrompt;

                try {
                    setVerifyStatus(statusMessages.connecting);

                    // Small delay to show connecting status
                    await new Promise(r => setTimeout(r, 300));
                    setVerifyStatus(statusMessages.sending);

                    // Pollinations.ai - completely FREE, no API key required, supports CORS
                    const response = await fetch('https://text.pollinations.ai/', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            messages: [
                                { role: 'system', content: systemPrompt },
                                { role: 'user', content: userPrompt }
                            ],
                            model: 'openai',
                            seed: Math.floor(Math.random() * 1000000)
                        })
                    });

                    setVerifyStatus(statusMessages.waiting);

                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}`);
                    }

                    setVerifyStatus(statusMessages.processing);
                    const result = await response.text();

                    clearInterval(timerInterval);

                    if (result) {
                        setVerifyStatus(statusMessages.done);
                        setVerifyResult(result);
                        setVerifyLoading(false);
                        return;
                    }
                    throw new Error('Empty response');
                } catch (error) {
                    clearInterval(timerInterval);
                    console.error('Pollinations API failed:', error.message);
                    setVerifyError(t.verify?.errorGeneric || 'Error analyzing prompt. Please try again.');
                    setVerifyLoading(false);
                }
            };

            // Save optional API key for higher limits
            const saveApiSettings = () => {
                const keyToSave = tempApiKey.trim();
                setApiKey(keyToSave);
                localStorage.setItem('ai-prompt-api-key', keyToSave);
                localStorage.setItem('ai-prompt-api-provider', apiProvider);
                setShowApiSettingsModal(false);
                if (keyToSave) {
                    showNotification(t.verify?.keySaved || 'API key saved!');
                } else {
                    showNotification(t.verify?.keyCleared || 'Using free mode');
                }
            };

            // Open API settings modal
            const openApiSettings = () => {
                setTempApiKey(apiKey);
                setShowApiSettingsModal(true);
            };

            const copyToClipboard = async () => {
                await navigator.clipboard.writeText(formattedPrompt);
                setCopied(true);
                setTimeout(() => setCopied(false), 2000);
            };

            // Database functions
            const savePrompt = () => {
                if (!promptName.trim()) return;
                const newPrompt = {
                    id: editingId || Date.now().toString(),
                    name: promptName,
                    template, target, fields, selectedMethods, lang,
                    // Include enhanced examples data
                    exampleFileType, exampleHeaders, exampleRows,
                    // Include model-specific features
                    selectedFeatures,
                    createdAt: editingId ? savedPrompts.find(p => p.id === editingId)?.createdAt : new Date().toISOString(),
                    updatedAt: new Date().toISOString(),
                };
                let updated;
                if (editingId) {
                    updated = savedPrompts.map(p => p.id === editingId ? newPrompt : p);
                } else {
                    updated = [...savedPrompts, newPrompt];
                }
                setSavedPrompts(updated);
                saveDatabase(updated);
                setSaveModalOpen(false);
                setPromptName('');
                setEditingId(null);
                showNotification(`${updated.length} ${t.database.savedCount}`);
            };

            const loadPrompt = (prompt) => {
                setTemplate(prompt.template || 'general');
                setTarget(prompt.target || 'claude');
                setFields(prompt.fields || { role: '', task: '', context: '', constraints: '', outputFormat: '', examples: '' });
                setSelectedMethods(prompt.selectedMethods || []);
                if (prompt.lang) setLang(prompt.lang);
                // Load enhanced examples data
                setExampleFileType(prompt.exampleFileType || 'none');
                setExampleHeaders(prompt.exampleHeaders || '');
                setExampleRows(prompt.exampleRows || [{ id: 1, content: '' }]);
                // Load model-specific features
                setSelectedFeatures(prompt.selectedFeatures || {});
                setShowDatabase(false);
            };

            const deletePrompt = (id) => {
                const updated = savedPrompts.filter(p => p.id !== id);
                setSavedPrompts(updated);
                saveDatabase(updated);
            };

            const duplicatePrompt = (prompt) => {
                const newPrompt = { ...prompt, id: Date.now().toString(), name: `${prompt.name} (copy)`, createdAt: new Date().toISOString(), updatedAt: new Date().toISOString() };
                const updated = [...savedPrompts, newPrompt];
                setSavedPrompts(updated);
                saveDatabase(updated);
            };

            const editPrompt = (prompt) => {
                loadPrompt(prompt);
                setEditingId(prompt.id);
                setPromptName(prompt.name);
                setSaveModalOpen(true);
                setShowDatabase(false);
            };

            const exportDatabase = () => {
                const dataStr = JSON.stringify(savedPrompts, null, 2);
                const blob = new Blob([dataStr], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `prompts_backup_${new Date().toISOString().split('T')[0]}.json`;
                a.click();
                URL.revokeObjectURL(url);
                showNotification(`${savedPrompts.length} ${t.database.exportedCount}`);
            };

            const importDatabase = (e) => {
                const file = e.target.files?.[0];
                if (!file) return;
                const reader = new FileReader();
                reader.onload = (event) => {
                    try {
                        const imported = JSON.parse(event.target?.result);
                        if (Array.isArray(imported)) {
                            const merged = [...savedPrompts, ...imported.map(p => ({ ...p, id: Date.now().toString() + Math.random() }))];
                            setSavedPrompts(merged);
                            saveDatabase(merged);
                            showNotification(t.database.imported);
                        }
                    } catch { showNotification('Import failed'); }
                };
                reader.readAsText(file);
                e.target.value = '';
            };

            const resetForm = () => {
                setFields({ role: '', task: '', context: '', constraints: '', outputFormat: '', examples: '' });
                setSelectedMethods([]);
                setEditingId(null);
                // Reset enhanced examples state
                setExampleFileType('none');
                setExampleHeaders('');
                setExampleRows([{ id: 1, content: '' }]);
            };

            // Share code functions
            const openShareModal = () => {
                const promptData = {
                    template, target, selectedMethods, lang, fields,
                    // Include enhanced examples data
                    exampleFileType, exampleHeaders, exampleRows,
                    // Include model-specific features
                    selectedFeatures
                };
                const code = generateShareCode(promptData);
                if (code) {
                    setShareData({
                        code: code,
                        url: getShareURL(code)
                    });
                    setShowShareModal(true);
                }
            };

            const copyShareCode = async (text) => {
                await navigator.clipboard.writeText(text);
                showNotification(t.copied);
            };

            const importFromCode = () => {
                const decoded = decodeShareCode(importCode);
                if (decoded) {
                    setTemplate(decoded.template);
                    setTarget(decoded.target);
                    setSelectedMethods(decoded.selectedMethods);
                    setLang(decoded.lang);
                    setFields(decoded.fields);
                    // Load enhanced examples data
                    setExampleFileType(decoded.exampleFileType || 'none');
                    setExampleHeaders(decoded.exampleHeaders || '');
                    setExampleRows(decoded.exampleRows || [{ id: 1, content: '' }]);
                    // Load model-specific features
                    setSelectedFeatures(decoded.selectedFeatures || {});
                    setShowImportModal(false);
                    setImportCode('');
                    showNotification(t.share.importSuccess);
                } else {
                    showNotification(t.share.importError);
                }
            };

            // Check for share code in URL on mount
            useEffect(() => {
                const urlCode = getShareCodeFromURL();
                if (urlCode) {
                    const decoded = decodeShareCode(urlCode);
                    if (decoded) {
                        setTemplate(decoded.template);
                        setTarget(decoded.target);
                        setSelectedMethods(decoded.selectedMethods);
                        setLang(decoded.lang);
                        setFields(decoded.fields);
                        // Load enhanced examples data
                        setExampleFileType(decoded.exampleFileType || 'none');
                        setExampleHeaders(decoded.exampleHeaders || '');
                        setExampleRows(decoded.exampleRows || [{ id: 1, content: '' }]);
                        // Load model-specific features
                        setSelectedFeatures(decoded.selectedFeatures || {});
                        showNotification(t.share.importSuccess);
                        // Clean URL
                        window.history.replaceState({}, '', window.location.pathname);
                    }
                }
            }, []);

            // AI Models with their specific formatting preferences (based on 2025 research)
            // Each model has unique prompting requirements per the .md guide
            const aiTargets = [
                { id: 'claude', name: 'Claude', color: '#D97706', icon: 'üß°', desc: 'XML tags, extended thinking', features: ['extended_thinking', 'research', 'artifacts', 'analysis'] },
                { id: 'gpt', name: 'ChatGPT', color: '#10A37F', icon: 'üíö', desc: 'Markdown, literal instructions', features: ['web_browsing', 'dalle', 'code_interpreter', 'canvas', 'memory'] },
                { id: 'gemini', name: 'Gemini', color: '#4285F4', icon: 'üíô', desc: 'XML or Markdown, context first', features: ['google_search', 'code_execution', 'deep_research'] },
                { id: 'llama', name: 'Llama', color: '#0668E1', icon: 'ü¶ô', desc: 'Special tokens format', features: ['code_llama'] },
                { id: 'mistral', name: 'Mistral', color: '#FF7000', icon: 'üå™Ô∏è', desc: '[INST] tokens, objective measures', features: ['code_mode', 'function_calling'] },
                { id: 'cohere', name: 'Cohere', color: '#D946EF', icon: 'üîÆ', desc: 'Task & Context, Style Guide', features: ['rag', 'web_search'] },
                { id: 'grok', name: 'Grok', color: '#000000', icon: '‚ö°', desc: 'Real-time X data, Think mode', features: ['realtime', 'think', 'deepsearch'] },
                { id: 'deepseek', name: 'DeepSeek', color: '#4D6BFE', icon: 'üîç', desc: 'Deep Think R1, Code', features: ['deep_think', 'code_mode', 'search'] },
                { id: 'general', name: 'Any AI', color: '#6B7280', icon: 'ü§ñ', desc: 'Universal format', features: [] }
            ];

            return (
                <div className="min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4 md:p-6">
                    {/* Notification */}
                    {notification && (
                        <div className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50 animate-pulse">
                            {notification}
                        </div>
                    )}

                    {/* Save Modal */}
                    {saveModalOpen && (
                        <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50" onClick={() => setSaveModalOpen(false)}>
                            <div className="bg-slate-800 p-6 rounded-xl border border-slate-700 w-96" onClick={e => e.stopPropagation()}>
                                <h3 className="text-lg font-bold text-white mb-4">{t.database.saveAs}</h3>
                                <input
                                    type="text"
                                    value={promptName}
                                    onChange={e => setPromptName(e.target.value)}
                                    placeholder={t.database.promptName}
                                    className="w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white mb-4 focus:outline-none focus:ring-2 focus:ring-amber-500"
                                    autoFocus
                                />
                                <div className="flex gap-2">
                                    <button onClick={() => setSaveModalOpen(false)} className="flex-1 px-4 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-600">
                                        Cancel
                                    </button>
                                    <button onClick={savePrompt} className="flex-1 px-4 py-2 bg-amber-500 text-slate-900 rounded-lg hover:bg-amber-400 font-medium">
                                        {t.database.save}
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Share Modal - Compact Design */}
                    {showShareModal && shareData && (
                        <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50" onClick={() => setShowShareModal(false)}>
                            <div className="bg-slate-800 p-5 rounded-xl border border-slate-700 w-[380px] max-w-[95vw]" onClick={e => e.stopPropagation()}>
                                <div className="flex justify-between items-center mb-4">
                                    <h3 className="text-lg font-bold text-white flex items-center gap-2">
                                        <Icon name="Share2" size={20} className="text-amber-400" />
                                        {t.share.title}
                                    </h3>
                                    <button onClick={() => setShowShareModal(false)} className="text-slate-400 hover:text-white">
                                        <Icon name="X" size={20} />
                                    </button>
                                </div>

                                {/* Share Code */}
                                <div className="mb-4">
                                    <div className="flex items-center gap-2 mb-2">
                                        <span className="text-xs text-slate-400">{t.share.codeLabel}:</span>
                                        <span className="text-xs text-slate-500">({shareData.code.length} chars)</span>
                                    </div>
                                    <div className="p-3 bg-slate-900 border border-slate-600 rounded-lg font-mono text-xs text-amber-400 break-all max-h-24 overflow-y-auto select-all">
                                        {shareData.code}
                                    </div>
                                </div>

                                {/* Action Buttons */}
                                <div className="grid grid-cols-2 gap-2 mb-3">
                                    <button onClick={() => copyShareCode(shareData.code)}
                                        className="px-3 py-2.5 bg-amber-500 text-slate-900 rounded-lg hover:bg-amber-400 font-medium text-sm flex items-center justify-center gap-2">
                                        <Icon name="Copy" size={16} /> {t.share.copyCode}
                                    </button>
                                    <button onClick={() => copyShareCode(shareData.url)}
                                        className="px-3 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-500 font-medium text-sm flex items-center justify-center gap-2">
                                        <Icon name="Link" size={16} /> {t.share.copyUrl}
                                    </button>
                                </div>

                                {/* Tip */}
                                <div className="p-2 bg-slate-700/30 rounded-lg border border-slate-700/50">
                                    <p className="text-xs text-slate-500 flex items-start gap-2">
                                        <Icon name="Lightbulb" size={12} className="text-amber-400/70 flex-shrink-0 mt-0.5" />
                                        {t.share.tip}
                                    </p>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Import Modal */}
                    {showImportModal && (
                        <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50" onClick={() => setShowImportModal(false)}>
                            <div className="bg-slate-800 p-6 rounded-xl border border-slate-700 w-96" onClick={e => e.stopPropagation()}>
                                <div className="flex justify-between items-center mb-4">
                                    <h3 className="text-lg font-bold text-white flex items-center gap-2">
                                        <Icon name="Download" size={20} className="text-amber-400" />
                                        {t.share.importTitle}
                                    </h3>
                                    <button onClick={() => setShowImportModal(false)} className="text-slate-400 hover:text-white">
                                        <Icon name="X" size={20} />
                                    </button>
                                </div>
                                <textarea
                                    value={importCode}
                                    onChange={e => setImportCode(e.target.value)}
                                    placeholder={t.share.importPlaceholder}
                                    rows={4}
                                    className="w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white mb-4 focus:outline-none focus:ring-2 focus:ring-amber-500 font-mono text-sm resize-y min-h-[100px] max-h-[200px]"
                                    autoFocus
                                />
                                <div className="flex gap-2">
                                    <button onClick={() => setShowImportModal(false)} className="flex-1 px-4 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-600">
                                        Cancel
                                    </button>
                                    <button onClick={importFromCode} disabled={!importCode.trim()}
                                        className="flex-1 px-4 py-2 bg-amber-500 text-slate-900 rounded-lg hover:bg-amber-400 font-medium disabled:opacity-50">
                                        {t.share.importBtn}
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* API Settings Modal - Info about free Pollinations.ai service */}
                    {showApiSettingsModal && (
                        <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-[60]" onClick={() => setShowApiSettingsModal(false)}>
                            <div className="bg-slate-800 p-5 rounded-xl border border-slate-700 w-[400px] max-w-[95vw]" onClick={e => e.stopPropagation()}>
                                <div className="flex justify-between items-center mb-4">
                                    <h3 className="text-lg font-bold text-white flex items-center gap-2">
                                        <Icon name="Info" size={20} className="text-amber-400" />
                                        {t.verify?.apiSettings || 'About Verification'}
                                    </h3>
                                    <button onClick={() => setShowApiSettingsModal(false)} className="text-slate-400 hover:text-white">
                                        <Icon name="X" size={20} />
                                    </button>
                                </div>

                                {/* Free Mode Info */}
                                <div className="mb-4 p-4 bg-green-500/10 border border-green-500/30 rounded-lg">
                                    <div className="flex items-center gap-2 text-green-400 font-medium mb-2">
                                        <Icon name="CheckCircle" size={18} />
                                        {t.verify?.freeMode || 'üÜì 100% Free'}
                                    </div>
                                    <p className="text-sm text-green-300/80">
                                        {t.verify?.freeModeDesc || 'This feature is completely free!'}
                                    </p>
                                    <ul className="text-xs text-slate-400 mt-3 space-y-1">
                                        <li className="flex items-center gap-2">
                                            <Icon name="Check" size={12} className="text-green-400" />
                                            {lang === 'cs' ? '≈Ω√°dn√Ω API kl√≠ƒç nen√≠ pot≈ôeba' : 'No API key required'}
                                        </li>
                                        <li className="flex items-center gap-2">
                                            <Icon name="Check" size={12} className="text-green-400" />
                                            {lang === 'cs' ? '≈Ω√°dn√° registrace' : 'No registration'}
                                        </li>
                                        <li className="flex items-center gap-2">
                                            <Icon name="Check" size={12} className="text-green-400" />
                                            {lang === 'cs' ? 'Neomezen√© pou≈æit√≠' : 'Unlimited usage'}
                                        </li>
                                    </ul>
                                </div>

                                {/* Powered by */}
                                <div className="p-3 bg-slate-700/50 rounded-lg text-center">
                                    <p className="text-xs text-slate-400 mb-2">
                                        {lang === 'cs' ? 'Poh√°nƒõno slu≈æbou' : 'Powered by'}
                                    </p>
                                    <a href="https://pollinations.ai" target="_blank" rel="noopener noreferrer"
                                        className="text-amber-400 hover:text-amber-300 flex items-center justify-center gap-2 font-medium">
                                        üå∏ Pollinations.ai
                                        <Icon name="ExternalLink" size={14} />
                                    </a>
                                </div>

                                {/* Close Button */}
                                <div className="mt-4">
                                    <button
                                        onClick={() => setShowApiSettingsModal(false)}
                                        className="w-full px-4 py-2.5 bg-amber-500 text-slate-900 rounded-lg hover:bg-amber-400 font-medium flex items-center justify-center gap-2"
                                    >
                                        <Icon name="Check" size={18} />
                                        {t.verify?.close || 'Close'}
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Verification Result Modal */}
                    {showVerifyModal && (
                        <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50" onClick={() => setShowVerifyModal(false)}>
                            <div className="bg-slate-800 p-5 rounded-xl border border-slate-700 w-[550px] max-w-[95vw] max-h-[85vh] flex flex-col" onClick={e => e.stopPropagation()}>
                                <div className="flex justify-between items-center mb-4">
                                    <h3 className="text-lg font-bold text-white flex items-center gap-2">
                                        <Icon name="Brain" size={20} className="text-purple-400" />
                                        {t.verify?.result || 'AI Analysis'}
                                    </h3>
                                    <div className="flex items-center gap-2">
                                        <button
                                            onClick={openApiSettings}
                                            className="p-2 text-slate-400 hover:text-white hover:bg-slate-700 rounded-lg"
                                            title={t.verify?.apiSettings || 'API Settings'}
                                        >
                                            <Icon name="Settings" size={18} />
                                        </button>
                                        <button onClick={() => setShowVerifyModal(false)} className="text-slate-400 hover:text-white">
                                            <Icon name="X" size={20} />
                                        </button>
                                    </div>
                                </div>

                                {/* Loading State with Progress Monitoring */}
                                {verifyLoading && (
                                    <div className="flex flex-col items-center justify-center py-10">
                                        {/* Animated spinner with pulse effect */}
                                        <div className="relative mb-6">
                                            <div className="w-16 h-16 border-4 border-slate-600 border-t-amber-400 rounded-full animate-spin"></div>
                                            <div className="absolute inset-0 w-16 h-16 border-4 border-transparent border-t-amber-400/30 rounded-full animate-ping"></div>
                                        </div>

                                        {/* Dynamic status message */}
                                        <p className="text-slate-200 font-medium text-lg mb-2">{verifyStatus}</p>

                                        {/* Elapsed time */}
                                        <div className="flex items-center gap-2 text-slate-400 text-sm mb-4">
                                            <Icon name="Clock" size={14} />
                                            <span>{verifyElapsed}s</span>
                                        </div>

                                        {/* Progress stages indicator */}
                                        <div className="flex items-center gap-1 mt-2">
                                            <div className={`w-2 h-2 rounded-full transition-colors ${verifyStatus.includes('P≈ôiprav') || verifyStatus.includes('Prepar') ? 'bg-amber-400' : 'bg-slate-600'}`}></div>
                                            <div className={`w-2 h-2 rounded-full transition-colors ${verifyStatus.includes('P≈ôipoj') || verifyStatus.includes('Connect') ? 'bg-amber-400' : 'bg-slate-600'}`}></div>
                                            <div className={`w-2 h-2 rounded-full transition-colors ${verifyStatus.includes('Odes√≠l') || verifyStatus.includes('Send') ? 'bg-amber-400' : 'bg-slate-600'}`}></div>
                                            <div className={`w-2 h-2 rounded-full transition-colors ${verifyStatus.includes('analyz') || verifyStatus.includes('analyz') ? 'bg-amber-400' : 'bg-slate-600'}`}></div>
                                            <div className={`w-2 h-2 rounded-full transition-colors ${verifyStatus.includes('Zpracov') || verifyStatus.includes('Process') ? 'bg-amber-400' : 'bg-slate-600'}`}></div>
                                        </div>

                                        {/* Service info */}
                                        <p className="text-xs text-slate-500 mt-4 flex items-center gap-1">
                                            üå∏ Pollinations.ai
                                        </p>
                                    </div>
                                )}

                                {/* Error State */}
                                {verifyError && !verifyLoading && (
                                    <div className="flex flex-col items-center justify-center py-8">
                                        <div className="w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mb-4">
                                            <Icon name="AlertCircle" size={32} className="text-red-400" />
                                        </div>
                                        <p className="text-red-400 mb-4 text-center">{verifyError}</p>
                                        <div className="flex gap-2">
                                            <button
                                                onClick={openApiSettings}
                                                className="px-4 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-600 flex items-center gap-2"
                                            >
                                                <Icon name="Settings" size={16} />
                                                {t.verify?.apiSettings || 'Settings'}
                                            </button>
                                            <button
                                                onClick={verifyPromptWithAI}
                                                className="px-4 py-2 bg-amber-500 text-slate-900 rounded-lg hover:bg-amber-400 font-medium flex items-center gap-2"
                                            >
                                                <Icon name="RefreshCw" size={16} />
                                                {t.verify?.retry || 'Retry'}
                                            </button>
                                        </div>
                                    </div>
                                )}

                                {/* Result Content */}
                                {verifyResult && !verifyLoading && (
                                    <div className="flex-1 overflow-y-auto">
                                        <p className="text-xs text-slate-500 mb-2 flex items-center gap-1">
                                            <Icon name="Sparkles" size={12} />
                                            {t.verify?.understanding || 'How AI understands your prompt:'}
                                        </p>
                                        <div className="bg-slate-900/50 border border-slate-700 rounded-lg p-4 prose prose-invert prose-sm max-w-none">
                                            <div className="text-slate-200 text-sm whitespace-pre-wrap leading-relaxed"
                                                dangerouslySetInnerHTML={{
                                                    __html: verifyResult
                                                        .replace(/\*\*(.*?)\*\*/g, '<strong class="text-amber-400">$1</strong>')
                                                        .replace(/\n/g, '<br />')
                                                }}
                                            />
                                        </div>
                                    </div>
                                )}

                                {/* Footer */}
                                {!verifyLoading && (verifyResult || verifyError) && (
                                    <div className="mt-4 pt-4 border-t border-slate-700 flex justify-between items-center">
                                        <span className="text-xs text-slate-500 flex items-center gap-1">
                                            üå∏ {t.verify?.poweredBy || 'Powered by Pollinations.ai'}
                                        </span>
                                        <button
                                            onClick={() => setShowVerifyModal(false)}
                                            className="px-4 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-600"
                                        >
                                            {t.verify?.close || 'Close'}
                                        </button>
                                    </div>
                                )}
                            </div>
                        </div>
                    )}

                    {/* Database Panel */}
                    {showDatabase && (
                        <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50" onClick={() => setShowDatabase(false)}>
                            <div className="bg-slate-800 p-6 rounded-xl border border-slate-700 w-[500px] max-h-[80vh] overflow-hidden flex flex-col" onClick={e => e.stopPropagation()}>
                                <div className="flex justify-between items-center mb-4">
                                    <h3 className="text-lg font-bold text-white flex items-center gap-2">
                                        <Icon name="Database" size={20} className="text-amber-400" />
                                        {t.database.title} ({savedPrompts.length})
                                    </h3>
                                    <button onClick={() => setShowDatabase(false)} className="text-slate-400 hover:text-white">
                                        <Icon name="X" size={20} />
                                    </button>
                                </div>

                                {/* Import/Export */}
                                <div className="flex gap-2 mb-4">
                                    <button onClick={exportDatabase} disabled={savedPrompts.length === 0} className="flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-600 disabled:opacity-50 text-sm">
                                        <Icon name="Download" size={16} /> {t.database.export}
                                    </button>
                                    <label className="flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-600 cursor-pointer text-sm">
                                        <Icon name="Upload" size={16} /> {t.database.import}
                                        <input type="file" accept=".json" onChange={importDatabase} className="hidden" />
                                    </label>
                                </div>

                                {/* Prompts List */}
                                <div className="flex-1 overflow-y-auto space-y-2">
                                    {savedPrompts.length === 0 ? (
                                        <div className="text-center text-slate-500 py-8">{t.database.noPrompts}</div>
                                    ) : (
                                        savedPrompts.map(prompt => (
                                            <div key={prompt.id} className="bg-slate-700/50 p-3 rounded-lg border border-slate-600">
                                                <div className="flex justify-between items-start mb-2">
                                                    <div>
                                                        <div className="text-white font-medium">{prompt.name}</div>
                                                        <div className="text-xs text-slate-400">{new Date(prompt.updatedAt).toLocaleDateString()}</div>
                                                    </div>
                                                    <div className="flex gap-1">
                                                        <button onClick={() => loadPrompt(prompt)} className="p-1.5 bg-green-500/20 text-green-400 rounded hover:bg-green-500/30" title={t.database.load}>
                                                            <Icon name="FolderOpen" size={14} />
                                                        </button>
                                                        <button onClick={() => editPrompt(prompt)} className="p-1.5 bg-blue-500/20 text-blue-400 rounded hover:bg-blue-500/30" title={t.database.edit}>
                                                            <Icon name="Edit3" size={14} />
                                                        </button>
                                                        <button onClick={() => duplicatePrompt(prompt)} className="p-1.5 bg-amber-500/20 text-amber-400 rounded hover:bg-amber-500/30" title={t.database.duplicate}>
                                                            <Icon name="Copy" size={14} />
                                                        </button>
                                                        <button onClick={() => deletePrompt(prompt.id)} className="p-1.5 bg-red-500/20 text-red-400 rounded hover:bg-red-500/30" title={t.database.delete}>
                                                            <Icon name="Trash2" size={14} />
                                                        </button>
                                                    </div>
                                                </div>
                                                <div className="text-xs text-slate-400 truncate">{prompt.fields?.task?.substring(0, 80)}...</div>
                                            </div>
                                        ))
                                    )}
                                </div>
                            </div>
                        </div>
                    )}

                    <div className="max-w-7xl mx-auto">
                        {/* Header */}
                        <div className="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6">
                            <div className="flex items-center gap-4">
                                <a href="../../index.html" className="flex items-center gap-2 px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-slate-300 hover:text-white hover:bg-slate-700 transition-colors">
                                    <Icon name="ArrowLeft" size={18} />
                                    <span className="hidden sm:inline">{t.backToHub}</span>
                                </a>
                                <div>
                                    <div className="flex items-center gap-2">
                                        <Icon name="Sparkles" size={24} className="text-amber-400" />
                                        <h1 className="text-2xl font-bold text-white">{t.title}</h1>
                                    </div>
                                    <p className="text-slate-400 text-sm">{t.subtitle}</p>
                                </div>
                            </div>

                            <div className="flex items-center gap-2">
                                {/* Share Button */}
                                <button onClick={openShareModal} disabled={!formattedPrompt} className="flex items-center gap-2 px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white hover:bg-slate-700 disabled:opacity-50" title={t.share.title}>
                                    <Icon name="Share2" size={16} className="text-green-400" />
                                </button>

                                {/* Import Button */}
                                <button onClick={() => setShowImportModal(true)} className="flex items-center gap-2 px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white hover:bg-slate-700" title={t.share.importTitle}>
                                    <Icon name="Download" size={16} className="text-blue-400" />
                                </button>

                                {/* Database Button */}
                                <button onClick={() => setShowDatabase(true)} className="flex items-center gap-2 px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white hover:bg-slate-700">
                                    <Icon name="Database" size={16} className="text-amber-400" />
                                    <span className="text-sm">{savedPrompts.length}</span>
                                </button>

                                {/* Language Selector */}
                                <div className="relative">
                                    <button
                                        onClick={() => setShowLangDropdown(!showLangDropdown)}
                                        className="flex items-center gap-2 px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white hover:bg-slate-700"
                                    >
                                        <Icon name="Globe" size={16} className="text-slate-400" />
                                        <span className="text-lg">{selectedLang?.flag}</span>
                                        <span className="hidden sm:inline text-sm text-slate-300">{selectedLang?.native}</span>
                                        <Icon name="ChevronDown" size={14} className={`transition-transform ${showLangDropdown ? 'rotate-180' : ''}`} />
                                    </button>
                                    {showLangDropdown && (
                                        <div className="absolute top-full right-0 mt-1 w-48 bg-slate-800 border border-slate-700 rounded-lg shadow-xl z-30 overflow-hidden">
                                            {AVAILABLE_LANGUAGES.map(l => (
                                                <button
                                                    key={l.code}
                                                    onClick={() => setLang(l.code)}
                                                    className={`w-full flex items-center gap-2 px-3 py-2 hover:bg-slate-700 text-left ${lang === l.code ? 'bg-slate-700 border-l-2 border-amber-500' : ''}`}
                                                >
                                                    <span className="text-lg">{l.flag}</span>
                                                    <div className="flex-1 min-w-0">
                                                        <div className="text-sm text-white truncate">{l.native}</div>
                                                        <div className="text-xs text-slate-400 truncate">{l.name}</div>
                                                    </div>
                                                </button>
                                            ))}
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>

                        <div className="grid lg:grid-cols-5 gap-6">
                            {/* Input Panel */}
                            <div className="lg:col-span-2 space-y-4">
                                {/* Template & Target */}
                                {/* Category Selector */}
                                <div className="relative">
                                    <button onClick={() => setShowTemplates(!showTemplates)} className="w-full flex items-center justify-between gap-2 px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white">
                                        <div className="flex items-center gap-2">
                                            <Icon name={TemplateIcon} size={16} className="text-amber-400" />
                                            <span className="text-sm">{selectedTemplate?.name}</span>
                                        </div>
                                        <Icon name="ChevronDown" size={16} className={`transition-transform ${showTemplates ? 'rotate-180' : ''}`} />
                                    </button>
                                    {showTemplates && (
                                        <div className="absolute top-full left-0 right-0 mt-1 bg-slate-800 border border-slate-700 rounded-lg overflow-hidden z-10 shadow-xl max-h-[400px] overflow-y-auto">
                                            {Object.entries(t.templates).map(([key, val]) => (
                                                <button key={key} onClick={() => { setTemplate(key); setShowTemplates(false); }}
                                                    className={`w-full flex items-center gap-3 px-4 py-2.5 hover:bg-slate-700 ${template === key ? 'bg-slate-700' : ''}`}>
                                                    <Icon name={templateIcons[key] || 'FileText'} size={16} className="text-amber-400" />
                                                    <div className="text-left">
                                                        <div className="text-white text-sm">{val.name}</div>
                                                        <div className="text-slate-400 text-xs">{val.desc}</div>
                                                    </div>
                                                </button>
                                            ))}
                                        </div>
                                    )}
                                </div>

                                {/* AI Model Hotbar - Visual cards with brand colors */}
                                <div className="bg-slate-800/50 border border-slate-700 rounded-lg p-3">
                                    <div className="flex items-center justify-between mb-2">
                                        <span className="text-xs font-medium text-slate-400 flex items-center gap-1.5">
                                            <Icon name="Cpu" size={14} className="text-amber-400" />
                                            {lang === 'cs' ? 'Optimalizovat pro AI model' : 'Optimize for AI model'}
                                        </span>
                                        <span className="text-xs text-slate-500">
                                            {aiTargets.find(a => a.id === target)?.desc}
                                        </span>
                                    </div>
                                    <div className="grid grid-cols-3 sm:grid-cols-5 lg:grid-cols-9 gap-1.5">
                                        {aiTargets.map(ai => (
                                            <button
                                                key={ai.id}
                                                onClick={() => setTarget(ai.id)}
                                                className={`relative flex flex-col items-center justify-center p-2 rounded-lg transition-all ${
                                                    target === ai.id
                                                        ? 'ring-2 ring-offset-1 ring-offset-slate-800 shadow-lg'
                                                        : 'hover:bg-slate-700/50 opacity-70 hover:opacity-100'
                                                }`}
                                                style={{
                                                    backgroundColor: target === ai.id ? `${ai.color}20` : 'transparent',
                                                    borderColor: target === ai.id ? ai.color : 'transparent',
                                                    ringColor: target === ai.id ? ai.color : 'transparent'
                                                }}
                                                title={ai.desc}
                                            >
                                                <span className="text-lg mb-0.5">{ai.icon}</span>
                                                <span className={`text-[10px] font-medium ${target === ai.id ? 'text-white' : 'text-slate-400'}`}>
                                                    {ai.name}
                                                </span>
                                                {target === ai.id && (
                                                    <div className="absolute -top-1 -right-1 w-3 h-3 rounded-full bg-green-500 border-2 border-slate-800">
                                                        <Icon name="Check" size={8} className="text-white absolute top-0.5 left-0.5" />
                                                    </div>
                                                )}
                                            </button>
                                        ))}
                                    </div>

                                    {/* Model Features - Optional capabilities for each AI model */}
                                    {(() => {
                                        const currentTarget = aiTargets.find(a => a.id === target);
                                        const availableFeatures = currentTarget?.features || [];
                                        const featureTranslations = t.modelFeatures?.[target] || {};

                                        if (availableFeatures.length === 0) return null;

                                        return (
                                            <div className="mt-3 pt-3 border-t border-slate-700/50">
                                                <div className="flex items-center gap-2 mb-2">
                                                    <Icon name="Sparkles" size={12} className="text-amber-400" />
                                                    <span className="text-[10px] text-slate-400">
                                                        {t.modelFeatures?.title || 'Model Features'}
                                                    </span>
                                                    {currentModelFeatures.length > 0 && (
                                                        <span className="text-[10px] px-1.5 py-0.5 bg-amber-500/20 text-amber-400 rounded">
                                                            {currentModelFeatures.length} active
                                                        </span>
                                                    )}
                                                </div>
                                                <div className="flex flex-wrap gap-1.5">
                                                    {availableFeatures.map(featureId => {
                                                        const feature = featureTranslations[featureId];
                                                        if (!feature) return null;
                                                        const isActive = currentModelFeatures.includes(featureId);
                                                        return (
                                                            <button
                                                                key={featureId}
                                                                onClick={() => toggleFeature(featureId)}
                                                                className={`px-2 py-1 rounded text-[10px] font-medium transition-all ${
                                                                    isActive
                                                                        ? 'text-white shadow-sm'
                                                                        : 'bg-slate-700/50 text-slate-400 hover:bg-slate-700 hover:text-slate-300'
                                                                }`}
                                                                style={{
                                                                    backgroundColor: isActive ? `${currentTarget.color}40` : undefined,
                                                                    borderColor: isActive ? currentTarget.color : 'transparent',
                                                                    border: isActive ? `1px solid ${currentTarget.color}` : '1px solid transparent'
                                                                }}
                                                                title={feature.desc}
                                                            >
                                                                {isActive && <Icon name="Check" size={10} className="inline mr-1" />}
                                                                {feature.name}
                                                            </button>
                                                        );
                                                    })}
                                                </div>
                                            </div>
                                        );
                                    })()}
                                </div>

                                {/* Input Fields */}
                                <div className="space-y-3">
                                    {[
                                        { key: 'role', field: t.fields.role },
                                        { key: 'task', field: t.fields.task, required: true },
                                        { key: 'context', field: t.fields.context },
                                        { key: 'constraints', field: selectedMethods.includes('risen') ? t.fields.steps : t.fields.constraints },
                                        { key: 'outputFormat', field: selectedMethods.includes('risen') ? t.fields.expectations : t.fields.outputFormat },
                                    ].map(({ key, field, required }) => (
                                        <div key={key}>
                                            <label className="block text-sm font-medium text-slate-300 mb-1.5">
                                                {field.label} {required && <span className="text-amber-400">{t.required}</span>}
                                            </label>
                                            {key === 'role' ? (
                                                <input type="text" value={fields[key]} onChange={e => updateField(key, e.target.value)} placeholder={field.placeholder}
                                                    className="w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-amber-500/50 text-sm" />
                                            ) : (
                                                <AutoResizeTextarea
                                                    value={fields[key]}
                                                    onChange={e => updateField(key, e.target.value)}
                                                    placeholder={field.placeholder}
                                                    minRows={2}
                                                    maxRows={key === 'task' ? 10 : 6}
                                                    className="w-full px-3 py-2 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-amber-500/50 text-sm"
                                                />
                                            )}
                                        </div>
                                    ))}

                                    {/* Enhanced Examples Section with File Format Support */}
                                    <div className="bg-slate-800/50 border border-slate-700 rounded-lg p-3">
                                        <div className="flex items-center justify-between mb-3">
                                            <label className="text-sm font-medium text-slate-300 flex items-center gap-2">
                                                <Icon name="Lightbulb" size={16} className="text-yellow-400" />
                                                {selectedMethods.includes('fewshot') ? t.fields.fewshot.label : t.fields.examples.label}
                                            </label>
                                            {/* File type dropdown */}
                                            <select
                                                value={exampleFileType}
                                                onChange={e => setExampleFileType(e.target.value)}
                                                className="px-2 py-1 bg-slate-700 border border-slate-600 rounded text-xs text-white focus:outline-none focus:ring-1 focus:ring-amber-500"
                                            >
                                                {t.examplesSection && Object.entries(t.examplesSection.fileTypes).map(([key, val]) => (
                                                    <option key={key} value={key}>{val.name}</option>
                                                ))}
                                            </select>
                                        </div>

                                        {/* Headers input for structured formats */}
                                        {exampleFileType !== 'none' && (
                                            <div className="mb-3">
                                                <label className="block text-xs text-slate-400 mb-1">
                                                    {t.examplesSection?.params.headers || 'Column headers'}
                                                </label>
                                                <input
                                                    type="text"
                                                    value={exampleHeaders}
                                                    onChange={e => setExampleHeaders(e.target.value)}
                                                    placeholder={t.examplesSection?.params.headersPlaceholder || 'e.g., Name | Age | City'}
                                                    className="w-full px-2 py-1.5 bg-slate-700 border border-slate-600 rounded text-sm text-white placeholder-slate-500 focus:outline-none focus:ring-1 focus:ring-amber-500"
                                                />
                                                <p className="text-xs text-slate-500 mt-1">
                                                    {exampleFileType === 'excel' || exampleFileType === 'table'
                                                        ? (lang === 'cs' ? 'Oddƒõl sloupce znakem |' : 'Separate columns with |')
                                                        : exampleFileType === 'csv'
                                                        ? (lang === 'cs' ? 'Oddƒõl sloupce ƒç√°rkou nebo znakem |' : 'Separate with commas or |')
                                                        : (lang === 'cs' ? 'Zadej kl√≠ƒçe pro JSON objekty' : 'Enter keys for JSON objects')}
                                                </p>
                                            </div>
                                        )}

                                        {/* Dynamic example rows with (+) button */}
                                        <div className="space-y-2">
                                            {exampleRows.map((row, idx) => (
                                                <div key={row.id} className="flex gap-2 items-start">
                                                    <span className="text-xs text-slate-500 pt-2 w-6">{idx + 1}.</span>
                                                    <textarea
                                                        value={row.content}
                                                        onChange={e => updateExampleRow(row.id, e.target.value)}
                                                        placeholder={exampleFileType !== 'none'
                                                            ? (lang === 'cs' ? 'Data ≈ô√°dku (oddƒõl hodnoty znakem |)...' : 'Row data (separate values with |)...')
                                                            : (t.examplesSection?.rowPlaceholder || 'Example row data...')}
                                                        rows={2}
                                                        className="flex-1 px-2 py-1.5 bg-slate-700 border border-slate-600 rounded text-sm text-white placeholder-slate-500 focus:outline-none focus:ring-1 focus:ring-amber-500 resize-y min-h-[44px] max-h-[150px]"
                                                    />
                                                    {exampleRows.length > 1 && (
                                                        <button
                                                            onClick={() => removeExampleRow(row.id)}
                                                            className="p-1.5 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded"
                                                            title={t.examplesSection?.removeRow || 'Remove'}
                                                        >
                                                            <Icon name="X" size={14} />
                                                        </button>
                                                    )}
                                                </div>
                                            ))}
                                        </div>

                                        {/* Add row button (+) */}
                                        <button
                                            onClick={addExampleRow}
                                            className="mt-2 flex items-center gap-1.5 px-3 py-1.5 bg-amber-500/20 border border-amber-500/30 rounded text-amber-400 hover:bg-amber-500/30 text-xs font-medium transition-colors"
                                        >
                                            <Icon name="Plus" size={14} />
                                            {t.examplesSection?.addRow || 'Add row (+)'}
                                        </button>

                                        {/* Hint about row separators */}
                                        <p className="mt-2 text-xs text-slate-500 flex items-center gap-1">
                                            <Icon name="Info" size={12} />
                                            {t.examplesSection?.rowSeparatorHint || 'Use (+) button to add separated example rows'}
                                        </p>

                                        {/* Fallback: Original examples textarea for plain text mode */}
                                        {exampleFileType === 'none' && exampleRows.every(r => !r.content.trim()) && (
                                            <div className="mt-3 pt-3 border-t border-slate-700">
                                                <label className="block text-xs text-slate-400 mb-1">
                                                    {lang === 'cs' ? 'Nebo zadej p≈ô√≠klady voln√Ωm textem:' : 'Or enter examples as free text:'}
                                                </label>
                                                <AutoResizeTextarea
                                                    value={fields.examples}
                                                    onChange={e => updateField('examples', e.target.value)}
                                                    placeholder={selectedMethods.includes('fewshot') ? t.fields.fewshot.placeholder : t.fields.examples.placeholder}
                                                    minRows={2}
                                                    maxRows={6}
                                                    className="w-full px-2 py-1.5 bg-slate-700 border border-slate-600 rounded text-sm text-white placeholder-slate-500 focus:outline-none focus:ring-1 focus:ring-amber-500"
                                                />
                                            </div>
                                        )}

                                        {/* Structure preview for non-plain formats */}
                                        {exampleFileType !== 'none' && exampleRows.some(r => r.content.trim()) && (
                                            <div className="mt-3 pt-3 border-t border-slate-700">
                                                <label className="block text-xs text-slate-400 mb-1 flex items-center gap-1">
                                                    <Icon name="Eye" size={12} />
                                                    {t.examplesSection?.structurePreview || 'Structure preview'}
                                                </label>
                                                <pre className="p-2 bg-slate-900 rounded text-xs text-green-400 overflow-x-auto whitespace-pre-wrap max-h-32 overflow-y-auto">
                                                    {generateFormattedExamples}
                                                </pre>
                                            </div>
                                        )}
                                    </div>
                                </div>

                                {/* Action Buttons */}
                                <div className="flex gap-2">
                                    <button onClick={resetForm} className="flex items-center gap-2 px-4 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-600 text-sm">
                                        <Icon name="Plus" size={16} /> {t.newPrompt}
                                    </button>
                                    <button onClick={() => { setEditingId(null); setPromptName(''); setSaveModalOpen(true); }} disabled={!formattedPrompt}
                                        className="flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-500 disabled:opacity-50 text-sm font-medium">
                                        <Icon name="Save" size={16} /> {t.database.save}
                                    </button>
                                </div>
                            </div>

                            {/* Methods Panel - with category-based recommendations */}
                            <div className="lg:col-span-1">
                                <div className="flex items-center justify-between mb-3">
                                    <h3 className="text-sm font-medium text-slate-300">{t.methods.title}</h3>
                                </div>

                                {/* Recommended methods for current category */}
                                <div className="mb-3">
                                    <div className="flex items-center gap-2 mb-2">
                                        <Icon name="Star" size={14} className="text-amber-400" />
                                        <span className="text-xs font-medium text-amber-400">{t.methods.recommended}</span>
                                    </div>
                                    <div className="space-y-1.5">
                                        {Object.entries(t.methods)
                                            .filter(([k]) => !['title', 'active', 'recommended', 'showAll', 'hideOthers', 'bestFor'].includes(k))
                                            .filter(([key]) => METHOD_CATEGORIES[template]?.includes(key))
                                            .map(([key, method]) => (
                                            <div key={key} className="relative">
                                                <button onClick={() => toggleMethod(key)} onMouseEnter={() => setShowMethodInfo(key)} onMouseLeave={() => setShowMethodInfo(null)}
                                                    className={`w-full flex items-center gap-2 px-3 py-2 rounded-lg border transition-all text-left ${
                                                        selectedMethods.includes(key)
                                                            ? 'bg-amber-500/20 border-amber-500/50 text-amber-300'
                                                            : 'bg-amber-500/5 border-amber-500/20 text-slate-300 hover:border-amber-500/40'
                                                    }`}>
                                                    <Icon name={methodIcons[key]} size={16} className={`flex-shrink-0 ${selectedMethods.includes(key) ? 'text-amber-400' : 'text-amber-400/60'}`} />
                                                    <div className="min-w-0 flex-1">
                                                        <div className="text-xs font-medium truncate">{method.name}</div>
                                                        <div className="text-xs text-slate-500 truncate">{method.citation}</div>
                                                    </div>
                                                    {key === 'emotion' && (
                                                        <span className="text-xs bg-green-500/20 text-green-400 px-1.5 py-0.5 rounded" title="Works with all categories">‚òÖ</span>
                                                    )}
                                                    {key === 'pal' && template === 'coding' && (
                                                        <span className="text-xs bg-blue-500/20 text-blue-400 px-1.5 py-0.5 rounded" title="Best for coding">‚ö°</span>
                                                    )}
                                                </button>
                                                {showMethodInfo === key && (
                                                    <div className="absolute left-full ml-2 top-0 w-48 p-3 bg-slate-800 border border-slate-600 rounded-lg shadow-xl z-20">
                                                        <div className="text-xs font-medium text-white mb-1">{method.name}</div>
                                                        <div className="text-xs text-amber-400">{method.tip}</div>
                                                    </div>
                                                )}
                                            </div>
                                        ))}
                                    </div>
                                </div>

                                {/* Toggle to show all methods */}
                                <button
                                    onClick={() => setShowAllMethods(!showAllMethods)}
                                    className="w-full flex items-center justify-center gap-2 px-3 py-1.5 bg-slate-700/50 border border-slate-600 rounded-lg text-slate-400 hover:text-white hover:bg-slate-700 text-xs mb-3 transition-colors"
                                >
                                    <Icon name={showAllMethods ? "ChevronUp" : "ChevronDown"} size={14} />
                                    {showAllMethods ? t.methods.hideOthers : t.methods.showAll}
                                </button>

                                {/* Other methods (non-recommended) */}
                                {showAllMethods && (
                                    <div className="space-y-1.5 pt-2 border-t border-slate-700">
                                        {Object.entries(t.methods)
                                            .filter(([k]) => !['title', 'active', 'recommended', 'showAll', 'hideOthers', 'bestFor'].includes(k))
                                            .filter(([key]) => !METHOD_CATEGORIES[template]?.includes(key))
                                            .map(([key, method]) => (
                                            <div key={key} className="relative">
                                                <button onClick={() => toggleMethod(key)} onMouseEnter={() => setShowMethodInfo(key)} onMouseLeave={() => setShowMethodInfo(null)}
                                                    className={`w-full flex items-center gap-2 px-3 py-2 rounded-lg border transition-all text-left ${
                                                        selectedMethods.includes(key)
                                                            ? 'bg-amber-500/20 border-amber-500/50 text-amber-300'
                                                            : 'bg-slate-800/50 border-slate-700 text-slate-400 hover:border-slate-600'
                                                    }`}>
                                                    <Icon name={methodIcons[key]} size={16} className={`flex-shrink-0 ${selectedMethods.includes(key) ? 'text-amber-400' : 'text-slate-500'}`} />
                                                    <div className="min-w-0">
                                                        <div className="text-xs font-medium truncate">{method.name}</div>
                                                        <div className="text-xs text-slate-500 truncate">{method.citation}</div>
                                                    </div>
                                                </button>
                                                {showMethodInfo === key && (
                                                    <div className="absolute left-full ml-2 top-0 w-48 p-3 bg-slate-800 border border-slate-600 rounded-lg shadow-xl z-20">
                                                        <div className="text-xs font-medium text-white mb-1">{method.name}</div>
                                                        <div className="text-xs text-amber-400">{method.tip}</div>
                                                    </div>
                                                )}
                                            </div>
                                        ))}
                                    </div>
                                )}

                                {selectedMethods.length > 0 && (
                                    <div className="mt-3 p-2 bg-slate-800/50 rounded-lg border border-slate-700">
                                        <div className="text-xs text-slate-400"><span className="text-amber-400">{selectedMethods.length}</span> {t.methods.active}</div>
                                    </div>
                                )}
                            </div>

                            {/* Preview Panel */}
                            <div className="lg:col-span-2 flex flex-col">
                                <div className="flex items-center justify-between mb-3">
                                    <div className="flex items-center gap-3">
                                        <h2 className="text-sm font-medium text-slate-300">{t.preview}</h2>
                                        <label className="flex items-center gap-2 cursor-pointer">
                                            <input type="checkbox" checked={showColors} onChange={e => setShowColors(e.target.checked)}
                                                className="w-4 h-4 rounded border-slate-600 bg-slate-700 text-amber-500 focus:ring-amber-500/30" />
                                            <span className="text-xs text-slate-400">{t.checklist?.showColors}</span>
                                        </label>
                                    </div>
                                    <button onClick={copyToClipboard} disabled={!formattedPrompt}
                                        className={`flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-colors ${formattedPrompt ? 'bg-amber-500 text-slate-900 hover:bg-amber-400' : 'bg-slate-700 text-slate-500 cursor-not-allowed'}`}>
                                        <Icon name={copied ? "Check" : "Copy"} size={16} />
                                        {copied ? t.copied : t.copy}
                                    </button>
                                </div>
                                <div className="flex-1 bg-slate-800/50 border border-slate-700 rounded-lg p-4 overflow-auto min-h-[400px]">
                                    {promptSections.length > 0 ? (
                                        <div className="space-y-3">
                                            {promptSections.map((section, idx) => (
                                                <div key={idx} className={`rounded ${showColors ? `color-${section.type}` : ''}`}>
                                                    <pre className="text-slate-200 text-sm whitespace-pre-wrap font-mono leading-relaxed">{section.text}</pre>
                                                </div>
                                            ))}
                                        </div>
                                    ) : (
                                        <div className="h-full flex items-center justify-center text-slate-500 text-sm text-center px-4">{t.placeholder}</div>
                                    )}
                                </div>
                                {formattedPrompt && (
                                    <div className="mt-3 flex flex-col gap-3">
                                        <div className="flex justify-between text-xs text-slate-500">
                                            <span>{t.optimizedFor} {aiTargets.find(a => a.id === target)?.name}</span>
                                            <span>{formattedPrompt.length} {t.chars}</span>
                                        </div>
                                        {/* Verify with AI Button - FREE, no API key required! */}
                                        <button
                                            onClick={verifyPromptWithAI}
                                            className="w-full flex items-center justify-center gap-2 px-4 py-2.5 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-500 hover:to-indigo-500 text-white rounded-lg font-medium text-sm transition-all shadow-lg shadow-purple-500/25 hover:shadow-purple-500/40"
                                        >
                                            <Icon name="Brain" size={18} />
                                            {t.verify?.button || 'Verify with AI'}
                                            <span className="text-[10px] bg-green-500/30 text-green-300 px-1.5 py-0.5 rounded ml-1">
                                                FREE
                                            </span>
                                        </button>
                                    </div>
                                )}
                            </div>
                        </div>

                        {/* X-Step Prompt Checklist */}
                        {t.checklist && (
                            <div className="mt-8 p-6 bg-slate-800/40 border border-slate-700/50 rounded-xl">
                                <div className="flex items-center gap-3 mb-4">
                                    <Icon name="CheckSquare" size={24} className="text-amber-400" />
                                    <div>
                                        <h3 className="text-lg font-bold text-white">{t.checklist.title}</h3>
                                        <p className="text-sm text-slate-400">{t.checklist.subtitle}</p>
                                    </div>
                                </div>

                                {/* Checklist Steps */}
                                <div className="grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 mb-4">
                                    {t.checklist.steps.map((step, idx) => (
                                        <div key={step.key} className={`p-3 rounded-lg border bg-check-${step.color}`}>
                                            <div className="flex items-center gap-2 mb-2">
                                                <div className={`w-6 h-6 rounded-full dot-${step.color} flex items-center justify-center text-white text-xs font-bold`}>
                                                    {idx + 1}
                                                </div>
                                                <span className={`font-medium text-sm text-check-${step.color}`}>{step.name}</span>
                                            </div>
                                            <p className="text-xs text-slate-300 mb-2">{step.desc}</p>
                                            <div className="text-xs text-slate-500 italic bg-slate-900/30 p-2 rounded">
                                                {step.example}
                                            </div>
                                        </div>
                                    ))}
                                </div>

                                {/* Legend */}
                                <div className="flex flex-wrap items-center gap-4 pt-4 border-t border-slate-700/50">
                                    <span className="text-xs text-slate-400 font-medium">{t.checklist.legend}:</span>
                                    {t.checklist.steps.map(step => (
                                        <div key={step.key} className="flex items-center gap-1.5">
                                            <div className={`w-3 h-3 rounded-full dot-${step.color}`}></div>
                                            <span className="text-xs text-slate-400">{step.name}</span>
                                        </div>
                                    ))}
                                </div>

                                {/* Tip */}
                                <div className="mt-4 p-3 bg-amber-500/10 border border-amber-500/20 rounded-lg flex items-start gap-2">
                                    <Icon name="Lightbulb" size={16} className="text-amber-400 flex-shrink-0 mt-0.5" />
                                    <p className="text-xs text-amber-200">{t.checklist.tip}</p>
                                </div>
                            </div>
                        )}

                        {/* Footer */}
                        <div className="mt-6 p-4 bg-slate-800/30 border border-slate-700/50 rounded-lg">
                            <div className="text-xs text-slate-500 text-center">{t.footer}</div>
                        </div>
                    </div>
                </div>
            );
        };

        // Render app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
