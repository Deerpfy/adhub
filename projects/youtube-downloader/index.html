<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AdHUB YouTube Downloader - Stahov√°n√≠ vide√≠ bez serveru</title>
    <link rel="stylesheet" href="styles.css">
    <script defer src="script.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>üé• AdHUB YouTube Downloader</h1>
            <div class="controls">
                <div class="extension-status-container">
                    <span id="extensionStatus" class="extension-status extension-status-checking"></span>
                    <span id="extensionStatusText" class="extension-status-text">Kontroluji roz≈°√≠≈ôen√≠...</span>
                </div>
                <div class="header-buttons">
                    <button id="installExtensionBtn" class="btn btn-secondary" style="display: none;">
                        üì¶ Nainstalovat roz≈°√≠≈ôen√≠
                    </button>
                    <button id="settingsBtn" class="btn btn-secondary">‚öôÔ∏è Nastaven√≠</button>
                </div>
            </div>
        </header>

        <div class="main-content">
            <div class="download-section">
                <!-- Info panel o roz≈°√≠≈ôen√≠ -->
                <div id="extensionInfoPanel" class="info-panel" style="display: none;">
                    <div class="info-icon">üß©</div>
                    <h3>Vy≈æadov√°no roz≈°√≠≈ôen√≠ prohl√≠≈æeƒçe</h3>
                    <p>Pro stahov√°n√≠ YouTube vide√≠ je pot≈ôeba nainstalovat roz≈°√≠≈ôen√≠ do prohl√≠≈æeƒçe.</p>
                    <div class="info-actions">
                        <button id="showInstallGuideBtn" class="btn btn-primary">
                            üìñ Zobrazit n√°vod k instalaci
                        </button>
                    </div>
                </div>

                <div class="input-card">
                    <h2>üîó Zadejte URL YouTube videa</h2>
                    <form id="videoForm">
                        <div class="input-group">
                            <label for="videoUrl">YouTube URL nebo Video ID:</label>
                            <input 
                                type="text" 
                                id="videoUrl" 
                                placeholder="https://www.youtube.com/watch?v=... nebo dQw4w9WgXcQ" 
                                required
                            >
                        </div>
                        
                        <button type="submit" class="btn btn-primary" id="fetchInfoBtn">
                            üìã Z√≠skat informace
                        </button>
                    </form>
                </div>

                <div id="videoInfoCard" class="video-info-card" style="display: none;">
                    <div class="video-thumbnail">
                        <img id="videoThumbnail" src="" alt="Video thumbnail">
                    </div>
                    <div class="video-details">
                        <h3 id="videoTitle"></h3>
                        <div class="video-meta">
                            <span id="videoUploader"></span>
                            <span id="videoDuration"></span>
                            <span id="videoViews"></span>
                        </div>
                    </div>
                </div>

                <!-- Form√°ty ke sta≈æen√≠ -->
                <div id="formatsCard" class="formats-card" style="display: none;">
                    <h3>üì• Dostupn√© form√°ty ke sta≈æen√≠</h3>
                    
                    <div class="formats-section" id="combinedFormatsSection" style="display: none;">
                        <h4>üìπ Video (s audiem)</h4>
                        <div id="combinedFormatsList" class="formats-list"></div>
                    </div>
                    
                    <div class="formats-section" id="videoFormatsSection" style="display: none;">
                        <h4>üé¨ Video (bez audia)</h4>
                        <div id="videoFormatsList" class="formats-list"></div>
                    </div>
                    
                    <div class="formats-section" id="audioFormatsSection" style="display: none;">
                        <h4>üéµ Audio</h4>
                        <div id="audioFormatsList" class="formats-list"></div>
                    </div>
                </div>

                <div id="downloadProgressCard" class="download-progress-card" style="display: none;">
                    <h3>üì• Prob√≠h√° stahov√°n√≠...</h3>
                    <div class="progress-bar-container">
                        <div class="progress-bar" id="progressBar">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                        <span class="progress-text" id="progressText">0%</span>
                    </div>
                    <p class="download-status" id="downloadStatus">P≈ôipravuje se...</p>
                </div>

                <div id="downloadCompleteCard" class="download-complete-card" style="display: none;">
                    <h3>‚úÖ Stahov√°n√≠ zah√°jeno!</h3>
                    <p id="downloadFilename"></p>
                    <p class="download-note">Soubor se stahuje prost≈ôednictv√≠m prohl√≠≈æeƒçe. Zkontrolujte slo≈æku stahov√°n√≠.</p>
                </div>
            </div>

            <div class="info-sidebar">
                <div class="info-card">
                    <h2>‚ÑπÔ∏è Jak to funguje</h2>
                    <ol class="how-it-works">
                        <li>
                            <span class="step-icon">1Ô∏è‚É£</span>
                            <span>Nainstalujte roz≈°√≠≈ôen√≠ do prohl√≠≈æeƒçe</span>
                        </li>
                        <li>
                            <span class="step-icon">2Ô∏è‚É£</span>
                            <span>Zadejte URL YouTube videa</span>
                        </li>
                        <li>
                            <span class="step-icon">3Ô∏è‚É£</span>
                            <span>Vyberte form√°t a kvalitu</span>
                        </li>
                        <li>
                            <span class="step-icon">4Ô∏è‚É£</span>
                            <span>St√°hnƒõte video p≈ô√≠mo do prohl√≠≈æeƒçe</span>
                        </li>
                    </ol>
                </div>

                <div class="info-card features-card">
                    <h2>‚ú® Funkce</h2>
                    <ul class="features-list">
                        <li>‚úÖ Bez pot≈ôeby serveru</li>
                        <li>‚úÖ Funguje na GitHub Pages</li>
                        <li>‚úÖ MP4, M4A, WebM form√°ty</li>
                        <li>‚úÖ R≈Øzn√© kvality videa</li>
                        <li>‚úÖ Tlaƒç√≠tko p≈ô√≠mo na YouTube</li>
                        <li>‚úÖ Open source</li>
                    </ul>
                </div>

                <div class="downloads-history">
                    <h2>üìö Historie</h2>
                    <div id="downloadsList" class="downloads-list">
                        <p class="empty-state-text">Zat√≠m ≈æ√°dn√© sta≈æen√© soubory</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Installation Guide Modal -->
    <div id="installModal" class="modal">
        <div class="modal-content install-modal-content">
            <div class="modal-header">
                <h2>üì¶ Instalace roz≈°√≠≈ôen√≠</h2>
                <button class="close-btn" id="closeInstallModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="install-steps">
                    <div class="install-step">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <h4>St√°hnƒõte roz≈°√≠≈ôen√≠</h4>
                            <p>St√°hnƒõte slo≈æku <code>extension</code> z tohoto projektu nebo klonujte repozit√°≈ô.</p>
                            <a href="extension/" class="btn btn-secondary" download>üìÅ Otev≈ô√≠t slo≈æku extension</a>
                        </div>
                    </div>
                    
                    <div class="install-step">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <h4>Otev≈ôete spr√°vu roz≈°√≠≈ôen√≠</h4>
                            <p>V Chrome/Edge zadejte do adresn√≠ho ≈ô√°dku:</p>
                            <code class="url-code">chrome://extensions</code>
                            <p>nebo pro Edge:</p>
                            <code class="url-code">edge://extensions</code>
                        </div>
                    </div>
                    
                    <div class="install-step">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <h4>Zapnƒõte v√Ωvoj√°≈ôsk√Ω re≈æim</h4>
                            <p>V prav√©m horn√≠m rohu p≈ôepnƒõte p≈ôep√≠naƒç <strong>"V√Ωvoj√°≈ôsk√Ω re≈æim"</strong> (Developer mode).</p>
                        </div>
                    </div>
                    
                    <div class="install-step">
                        <div class="step-number">4</div>
                        <div class="step-content">
                            <h4>Naƒçtƒõte roz≈°√≠≈ôen√≠</h4>
                            <p>Kliknƒõte na <strong>"Naƒç√≠st rozbalen√©"</strong> (Load unpacked) a vyberte slo≈æku <code>extension</code>.</p>
                        </div>
                    </div>
                    
                    <div class="install-step">
                        <div class="step-number">5</div>
                        <div class="step-content">
                            <h4>Hotovo! üéâ</h4>
                            <p>Roz≈°√≠≈ôen√≠ je nainstalovan√©. Obnovte tuto str√°nku a zaƒçnƒõte stahovat videa.</p>
                            <button id="refreshPageBtn" class="btn btn-primary">üîÑ Obnovit str√°nku</button>
                        </div>
                    </div>
                </div>
                
                <div class="install-note">
                    <strong>üí° Tip:</strong> Po instalaci roz≈°√≠≈ôen√≠ se na YouTube vide√≠ch objev√≠ tlaƒç√≠tko "St√°hnout" p≈ô√≠mo pod videem!
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
        <div class="modal-content settings-modal-content" style="max-width: 600px;">
            <h2>‚öôÔ∏è Nastaven√≠</h2>
            <form id="settingsForm">
                <div style="margin-bottom: 25px; padding: 15px; background: rgba(59, 130, 246, 0.1); border-left: 4px solid #3b82f6; border-radius: 8px;">
                    <strong style="color: #3b82f6;">‚ÑπÔ∏è Informace:</strong>
                    <p style="margin: 8px 0 0 0; color: #aaa; font-size: 13px;">
                        Tato verze funguje zcela v prohl√≠≈æeƒçi bez pot≈ôeby serveru. Stahov√°n√≠ prob√≠h√° p≈ôes roz≈°√≠≈ôen√≠ prohl√≠≈æeƒçe.
                    </p>
                </div>
                
                <h3 style="color: #fff; margin-top: 20px; margin-bottom: 15px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px;">üß© Roz≈°√≠≈ôen√≠</h3>
                
                <div class="extension-id-section">
                    <label for="extensionId">ID roz≈°√≠≈ôen√≠ (pro komunikaci):</label>
                    <input 
                        type="text" 
                        id="extensionId" 
                        placeholder="Automaticky detekov√°no..."
                        style="margin-bottom: 10px;"
                    >
                    <small style="color: #aaa; font-size: 12px; display: block; margin-bottom: 15px;">
                        ID se automaticky detekuje p≈ôi instalaci roz≈°√≠≈ôen√≠. Pokud m√°te probl√©my, m≈Ø≈æete ho zadat ruƒçnƒõ.
                    </small>
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">üíæ Ulo≈æit</button>
                    <button type="button" class="btn btn-secondary" id="cancelSettingsBtn">Zru≈°it</button>
                </div>
            </form>
        </div>
    </div>

</body>
</html>
