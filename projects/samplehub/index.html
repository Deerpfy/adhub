<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0a0a0f">
    <meta name="description" content="SampleHub - Offline Sample Pack Manager pro hudebn칤 produkci">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <title>SampleHub - Sample Pack Manager</title>

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>游꿧</text></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>游꿧</text></svg>">

    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- App Container -->
    <div id="app" class="app-container">

        <!-- Sidebar Navigation -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <span class="logo-icon"><svg class="icon"><use href="icons.svg#icon-logo"></use></svg></span>
                    <span class="logo-text">SampleHub</span>
                </div>
                <span class="version-badge">v1.0</span>
            </div>

            <nav class="sidebar-nav">
                <button class="nav-item active" data-view="library">
                    <span class="nav-icon"><svg class="icon"><use href="icons.svg#icon-library"></use></svg></span>
                    <span class="nav-text" data-i18n="nav.library">Knihovna</span>
                    <span class="nav-count" id="libraryCount">0</span>
                </button>
                <button class="nav-item" data-view="browse">
                    <span class="nav-icon"><svg class="icon"><use href="icons.svg#icon-browse"></use></svg></span>
                    <span class="nav-text" data-i18n="nav.browse">Proch치zet</span>
                </button>
                <button class="nav-item" data-view="discover">
                    <span class="nav-icon"><svg class="icon"><use href="icons.svg#icon-discover"></use></svg></span>
                    <span class="nav-text" data-i18n="nav.discover">Discover</span>
                </button>
                <button class="nav-item" data-view="packs">
                    <span class="nav-icon"><svg class="icon"><use href="icons.svg#icon-packs"></use></svg></span>
                    <span class="nav-text" data-i18n="nav.packs">Packy</span>
                    <span class="nav-count" id="packsCount">0</span>
                </button>
                <button class="nav-item" data-view="favorites">
                    <span class="nav-icon"><svg class="icon"><use href="icons.svg#icon-favorites"></use></svg></span>
                    <span class="nav-text" data-i18n="nav.favorites">Obl칤ben칠</span>
                    <span class="nav-count" id="favoritesCount">0</span>
                </button>
            </nav>

            <div class="sidebar-section">
                <h3 class="section-label" data-i18n="sidebar.filters">Filtry</h3>
                <div class="filter-group">
                    <label class="filter-label" data-i18n="filter.genre">콯치nr</label>
                    <select id="genreFilter" class="filter-select">
                        <option value="">V코echny</option>
                        <option value="dubstep">Dubstep</option>
                        <option value="house">House</option>
                        <option value="dnb">Drum & Bass</option>
                        <option value="hiphop">Hip-Hop</option>
                        <option value="trap">Trap</option>
                        <option value="ambient">Ambient</option>
                        <option value="techno">Techno</option>
                        <option value="other">Ostatn칤</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label class="filter-label" data-i18n="filter.type">Typ</label>
                    <select id="typeFilter" class="filter-select">
                        <option value="">V코echny</option>
                        <option value="loop">Loops</option>
                        <option value="oneshot">One-shots</option>
                        <option value="drum">Drums</option>
                        <option value="bass">Bass</option>
                        <option value="synth">Synth</option>
                        <option value="vocal">Vocals</option>
                        <option value="fx">FX</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label class="filter-label">BPM</label>
                    <div class="bpm-range">
                        <input type="number" id="bpmMin" class="bpm-input" placeholder="Min" min="60" max="200">
                        <span class="bpm-separator">-</span>
                        <input type="number" id="bpmMax" class="bpm-input" placeholder="Max" min="60" max="200">
                    </div>
                </div>
                <div class="filter-group">
                    <label class="filter-label">Key</label>
                    <select id="keyFilter" class="filter-select">
                        <option value="">V코echny</option>
                        <option value="C">C</option>
                        <option value="C#">C#</option>
                        <option value="D">D</option>
                        <option value="D#">D#</option>
                        <option value="E">E</option>
                        <option value="F">F</option>
                        <option value="F#">F#</option>
                        <option value="G">G</option>
                        <option value="G#">G#</option>
                        <option value="A">A</option>
                        <option value="A#">A#</option>
                        <option value="B">B</option>
                    </select>
                </div>
            </div>

            <div class="sidebar-footer">
                <button class="btn-import" id="importBtn">
                    <svg class="icon"><use href="icons.svg#icon-import"></use></svg>
                    <span data-i18n="action.import">Import</span>
                </button>
                <button class="btn-settings" id="settingsBtn">
                    <svg class="icon"><use href="icons.svg#icon-settings"></use></svg>
                </button>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">

            <!-- Top Bar -->
            <header class="top-bar">
                <button class="menu-toggle" id="menuToggle">
                    <svg class="icon"><use href="icons.svg#icon-menu"></use></svg>
                </button>

                <div class="search-container">
                    <input type="text"
                           id="searchInput"
                           class="search-input"
                           placeholder="Hledat samply..."
                           data-i18n-placeholder="search.placeholder">
                    <span class="search-icon"><svg class="icon"><use href="icons.svg#icon-search"></use></svg></span>
                </div>

                <div class="top-bar-actions">
                    <button class="btn-icon" id="viewToggle" title="Zm캩nit zobrazen칤">
                        <span id="viewIcon"><svg class="icon"><use href="icons.svg#icon-grid"></use></svg></span>
                    </button>
                    <div class="offline-indicator" id="offlineIndicator">
                        <span class="offline-dot"></span>
                        <span class="offline-text">Offline</span>
                    </div>
                </div>
            </header>

            <!-- Content Views -->
            <div class="content-wrapper">

                <!-- Library View -->
                <section class="view active" id="libraryView">
                    <div class="view-header">
                        <h2 class="view-title">
                            <svg class="icon"><use href="icons.svg#icon-library"></use></svg>
                            <span data-i18n="view.library">Moje knihovna</span>
                        </h2>
                        <div class="view-actions">
                            <span class="sample-count" id="sampleCountDisplay">0 sampl콢</span>
                            <button class="btn-sort" id="sortBtn">
                                <svg class="icon"><use href="icons.svg#icon-sort"></use></svg>
                                <span data-i18n="action.sort">Se콏adit</span>
                            </button>
                        </div>
                    </div>

                    <!-- Empty State -->
                    <div class="empty-state" id="emptyState">
                        <div class="empty-icon"><svg class="icon icon-4x"><use href="icons.svg#icon-waveform"></use></svg></div>
                        <h3 class="empty-title" data-i18n="empty.title">Zat칤m 쮂멳n칠 samply</h3>
                        <p class="empty-text" data-i18n="empty.text">Importujte sv칠 sample packy nebo p콏et치hn캩te soubory sem</p>
                        <button class="btn-primary btn-large" id="emptyImportBtn">
                            <svg class="icon"><use href="icons.svg#icon-import"></use></svg>
                            <span data-i18n="action.importSamples">Importovat samply</span>
                        </button>
                    </div>

                    <!-- Samples Grid -->
                    <div class="samples-grid" id="samplesGrid"></div>
                </section>

                <!-- Browse View -->
                <section class="view" id="browseView">
                    <div class="view-header">
                        <h2 class="view-title">
                            <svg class="icon"><use href="icons.svg#icon-browse"></use></svg>
                            <span data-i18n="view.browse">Proch치zet</span>
                        </h2>
                    </div>

                    <div class="browse-categories">
                        <div class="category-card" data-category="drums">
                            <span class="category-icon"><svg class="icon icon-2x"><use href="icons.svg#icon-waveform"></use></svg></span>
                            <span class="category-name">Drums</span>
                        </div>
                        <div class="category-card" data-category="bass">
                            <span class="category-icon"><svg class="icon icon-2x"><use href="icons.svg#icon-waveform"></use></svg></span>
                            <span class="category-name">Bass</span>
                        </div>
                        <div class="category-card" data-category="synth">
                            <span class="category-icon"><svg class="icon icon-2x"><use href="icons.svg#icon-key"></use></svg></span>
                            <span class="category-name">Synth</span>
                        </div>
                        <div class="category-card" data-category="vocal">
                            <span class="category-icon"><svg class="icon icon-2x"><use href="icons.svg#icon-waveform"></use></svg></span>
                            <span class="category-name">Vocals</span>
                        </div>
                        <div class="category-card" data-category="fx">
                            <span class="category-icon"><svg class="icon icon-2x"><use href="icons.svg#icon-waveform"></use></svg></span>
                            <span class="category-name">FX</span>
                        </div>
                        <div class="category-card" data-category="loop">
                            <span class="category-icon"><svg class="icon icon-2x"><use href="icons.svg#icon-loop"></use></svg></span>
                            <span class="category-name">Loops</span>
                        </div>
                    </div>

                    <div class="browse-results" id="browseResults"></div>
                </section>

                <!-- Discover View (Torrent Search) -->
                <section class="view" id="discoverView">
                    <div class="view-header">
                        <h2 class="view-title">
                            <svg class="icon"><use href="icons.svg#icon-discover"></use></svg>
                            <span data-i18n="view.discover">Discover Sample Packs</span>
                        </h2>
                        <div class="discover-status" id="discoverStatus">
                            <span class="status-dot offline"></span>
                            <span class="status-text">Server offline</span>
                        </div>
                    </div>

                    <div class="discover-search">
                        <div class="discover-search-row">
                            <input type="text"
                                   id="discoverSearchInput"
                                   class="search-input discover-input"
                                   placeholder="Hledat sample packy (nap콏. Cymatics, Splice, KSHMR)...">
                            <button class="btn-primary" id="discoverSearchBtn">
                                <svg class="icon"><use href="icons.svg#icon-search"></use></svg>
                                <span>Hledat</span>
                            </button>
                        </div>

                        <div class="discover-filters">
                            <div class="filter-group">
                                <label class="filter-label">Zdroje (klikni pro zapnut칤/vypnut칤)</label>
                                <div class="source-toggles" id="sourceToggles">
                                    <!-- Dynamicky generov치no z discover.js -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="discover-info-banner" id="discoverBanner">
                        <span class="banner-icon"><svg class="icon icon-xl icon-warning"><use href="icons.svg#icon-warning"></use></svg></span>
                        <div class="banner-content">
                            <strong>Pr치vn칤 upozorn캩n칤</strong>
                            <p>Tato funkce pouze vyhled치v치 ve콏ejn캩 indexovan칳 obsah. Stahov치n칤 chr치n캩n칠ho obsahu m콢쬰 b칳t v n캩kter칳ch zem칤ch neleg치ln칤. Pou쮂셨ejte zodpov캩dn캩.</p>
                        </div>
                        <button class="banner-close" id="closeBanner"><svg class="icon"><use href="icons.svg#icon-close"></use></svg></button>
                    </div>

                    <div class="discover-loading" id="discoverLoading" style="display: none">
                        <div class="loading-spinner"></div>
                        <p>Prohled치v치m zdroje...</p>
                    </div>

                    <div class="discover-results" id="discoverResults">
                        <div class="discover-empty">
                            <div class="empty-icon"><svg class="icon icon-4x"><use href="icons.svg#icon-search"></use></svg></div>
                            <h3>Vyhledejte sample packy</h3>
                            <p>Zadejte n치zev producenta, labelu nebo packu pro vyhled치n칤 ve ve콏ejn칳ch torrent indexech</p>
                        </div>
                    </div>
                </section>

                <!-- Packs View -->
                <section class="view" id="packsView">
                    <div class="view-header">
                        <h2 class="view-title">
                            <svg class="icon"><use href="icons.svg#icon-packs"></use></svg>
                            <span data-i18n="view.packs">Sample Packy</span>
                        </h2>
                        <button class="btn-primary" id="addPackBtn">
                            <svg class="icon"><use href="icons.svg#icon-plus"></use></svg>
                            <span data-i18n="action.addPack">P콏idat pack</span>
                        </button>
                    </div>

                    <div class="packs-grid" id="packsGrid"></div>
                </section>

                <!-- Favorites View -->
                <section class="view" id="favoritesView">
                    <div class="view-header">
                        <h2 class="view-title">
                            <svg class="icon"><use href="icons.svg#icon-favorites"></use></svg>
                            <span data-i18n="view.favorites">Obl칤ben칠</span>
                        </h2>
                    </div>

                    <div class="samples-grid" id="favoritesGrid"></div>
                </section>

            </div>
        </main>

        <!-- Audio Player Bar (fixed at bottom) -->
        <div class="player-bar" id="playerBar">
            <div class="player-info">
                <div class="player-artwork" id="playerArtwork"><svg class="icon icon-xl"><use href="icons.svg#icon-waveform"></use></svg></div>
                <div class="player-details">
                    <div class="player-title" id="playerTitle">Nen칤 vybr치no</div>
                    <div class="player-meta" id="playerMeta">--</div>
                </div>
            </div>

            <div class="player-controls">
                <button class="player-btn" id="prevBtn" title="P콏edchoz칤">
                    <svg class="icon"><use href="icons.svg#icon-prev"></use></svg>
                </button>
                <button class="player-btn player-btn-main" id="playPauseBtn" title="P콏ehr치t/Pozastavit">
                    <span id="playPauseIcon"><svg class="icon"><use href="icons.svg#icon-play"></use></svg></span>
                </button>
                <button class="player-btn" id="nextBtn" title="Dal코칤">
                    <svg class="icon"><use href="icons.svg#icon-next"></use></svg>
                </button>
                <button class="player-btn" id="loopBtn" title="Opakovat">
                    <svg class="icon"><use href="icons.svg#icon-loop"></use></svg>
                </button>
            </div>

            <div class="player-waveform-container">
                <div class="waveform" id="waveform"></div>
                <div class="player-time">
                    <span id="currentTime">0:00</span>
                    <span>/</span>
                    <span id="totalTime">0:00</span>
                </div>
            </div>

            <div class="player-volume">
                <button class="player-btn" id="volumeBtn" title="Hlasitost">
                    <span id="volumeIcon"><svg class="icon"><use href="icons.svg#icon-volume-high"></use></svg></span>
                </button>
                <input type="range"
                       id="volumeSlider"
                       class="volume-slider"
                       min="0"
                       max="100"
                       value="80">
            </div>
        </div>
    </div>

    <!-- Import Modal -->
    <div class="modal-overlay" id="importModal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3 class="modal-title"><svg class="icon"><use href="icons.svg#icon-import"></use></svg> Import Sampl콢</h3>
                <button class="modal-close" id="closeImportModal"><svg class="icon"><use href="icons.svg#icon-close"></use></svg></button>
            </div>
            <div class="modal-body">
                <div class="import-dropzone" id="importDropzone">
                    <div class="dropzone-icon"><svg class="icon icon-3x"><use href="icons.svg#icon-folder"></use></svg></div>
                    <p class="dropzone-text">P콏et치hn캩te soubory nebo slo쬶y sem</p>
                    <p class="dropzone-subtext">Podporovan칠 form치ty: WAV, MP3, FLAC, AIFF, OGG</p>
                    <button class="btn-primary" id="selectFilesBtn">
                        <svg class="icon"><use href="icons.svg#icon-folder-open"></use></svg>
                        <span>Vybrat soubory</span>
                    </button>
                    <input type="file"
                           id="fileInput"
                           multiple
                           accept=".wav,.mp3,.flac,.aiff,.ogg,.aif"
                           style="display: none">
                </div>

                <div class="import-options">
                    <h4>Mo쬹osti importu</h4>
                    <label class="checkbox-label">
                        <input type="checkbox" id="autoDetectBpm" checked>
                        <span>Automaticky detekovat BPM</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="autoDetectKey" checked>
                        <span>Automaticky detekovat t칩ninu</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="createPack">
                        <span>Vytvo콏it nov칳 pack</span>
                    </label>
                    <div class="pack-name-input" id="packNameInput" style="display: none">
                        <input type="text" id="newPackName" placeholder="N치zev packu">
                    </div>
                </div>

                <div class="import-progress" id="importProgress" style="display: none">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <p class="progress-text" id="progressText">Importuji...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal-overlay" id="settingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title"><svg class="icon"><use href="icons.svg#icon-settings"></use></svg> Nastaven칤</h3>
                <button class="modal-close" id="closeSettingsModal"><svg class="icon"><use href="icons.svg#icon-close"></use></svg></button>
            </div>
            <div class="modal-body">
                <div class="settings-section">
                    <h4>P콏ehr치v치n칤</h4>
                    <label class="checkbox-label">
                        <input type="checkbox" id="autoPlayNext" checked>
                        <span>Automaticky p콏ehr치t dal코칤</span>
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="fadeOnStop">
                        <span>Fade out p콏i zastaven칤</span>
                    </label>
                </div>

                <div class="settings-section">
                    <h4>Zobrazen칤</h4>
                    <div class="settings-row">
                        <label>Waveform barva</label>
                        <input type="color" id="waveformColor" value="#7C3AED">
                    </div>
                    <div class="settings-row">
                        <label>Progress barva</label>
                        <input type="color" id="progressColor" value="#A78BFA">
                    </div>
                </div>

                <div class="settings-section">
                    <h4>Data</h4>
                    <button class="btn-secondary" id="exportDataBtn">
                        <svg class="icon"><use href="icons.svg#icon-export"></use></svg>
                        <span>Exportovat knihovnu</span>
                    </button>
                    <button class="btn-danger" id="clearDataBtn">
                        <svg class="icon"><use href="icons.svg#icon-trash"></use></svg>
                        <span>Vymazat v코e</span>
                    </button>
                </div>

                <div class="settings-section">
                    <h4>O aplikaci</h4>
                    <p class="settings-info">
                        SampleHub v1.0<br>
                        Offline-first sample manager<br>
                        <small>Data jsou ulo쬰na lok치ln캩 v prohl칤쬰캜i</small>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Pack Detail Modal -->
    <div class="modal-overlay" id="packDetailModal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h3 class="modal-title" id="packDetailTitle"><svg class="icon"><use href="icons.svg#icon-packs"></use></svg> Pack</h3>
                <button class="modal-close" id="closePackDetailModal"><svg class="icon"><use href="icons.svg#icon-close"></use></svg></button>
            </div>
            <div class="modal-body">
                <div class="pack-detail-info" id="packDetailInfo"></div>
                <div class="pack-detail-samples" id="packDetailSamples"></div>
            </div>
        </div>
    </div>

    <!-- Sample Context Menu -->
    <div class="context-menu" id="contextMenu">
        <button class="context-item" data-action="play">
            <svg class="icon"><use href="icons.svg#icon-play"></use></svg>
            <span>P콏ehr치t</span>
        </button>
        <button class="context-item" data-action="favorite">
            <svg class="icon"><use href="icons.svg#icon-favorites"></use></svg>
            <span>Obl칤ben칠</span>
        </button>
        <button class="context-item" data-action="edit">
            <svg class="icon"><use href="icons.svg#icon-edit"></use></svg>
            <span>Upravit</span>
        </button>
        <button class="context-item" data-action="export">
            <svg class="icon"><use href="icons.svg#icon-export"></use></svg>
            <span>Exportovat</span>
        </button>
        <div class="context-divider"></div>
        <button class="context-item context-danger" data-action="delete">
            <svg class="icon"><use href="icons.svg#icon-trash"></use></svg>
            <span>Smazat</span>
        </button>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Scripts -->
    <script src="db.js"></script>
    <script src="audio.js"></script>
    <script src="discover.js"></script>
    <script src="script.js"></script>

    <!-- Register Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(reg => console.log('SW registered:', reg.scope))
                    .catch(err => console.error('SW registration failed:', err));
            });
        }
    </script>
</body>
</html>
